<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>hugo的使用 - 小厮</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="测试hugo" /><meta name="keywords" content='hugo' /><meta itemprop="name" content="hugo的使用">
<meta itemprop="description" content="测试hugo"><meta itemprop="datePublished" content="2022-06-04T19:46:45+08:00" />
<meta itemprop="dateModified" content="2024-01-29T17:36:27+08:00" />
<meta itemprop="wordCount" content="8451">
<meta itemprop="keywords" content="hugo," /><meta property="og:title" content="hugo的使用" />
<meta property="og:description" content="测试hugo" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/hugo/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-04T19:46:45+08:00" />
<meta property="article:modified_time" content="2024-01-29T17:36:27+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="hugo的使用"/>
<meta name="twitter:description" content="测试hugo"/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#ffffff" data-dark="#252627" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="/hugo/" /><link rel="prev" href="/goQuestion/" /><link rel="next" href="/%E8%A1%97%E9%9C%B85/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "hugo的使用",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "\/hugo\/"
    },"genre": "posts","keywords": "hugo","wordcount":  8451 ,
    "url": "\/hugo\/","datePublished": "2022-06-04T19:46:45+08:00","dateModified": "2024-01-29T17:36:27+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "小厮"
      },"description": "测试hugo"
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="wide"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="小厮"><span class="header-title-text">首页</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class='fa-solid fa-archive fa-fw fa-sm'></i> 所有文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="小厮"><span class="header-title-text">首页</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class='fa-solid fa-archive fa-fw fa-sm'></i> 所有文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container container-reverse"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>hugo的使用</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      小厮</span></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/hugo/" class="post-category" title="分类 - hugo"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> hugo</a></span></div><div class="post-meta-line"><span title="发布于 2022-06-04 19:46:45"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2022-06-04">2022-06-04</time></span>&nbsp;<span title="更新于 2024-01-29 17:36:27"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden="true"></i><time datetime="2024-01-29">2024-01-29</time></span>&nbsp;<span title="8451 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 8500 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 17 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#hugo">hugo</a></li>
    <li><a href="#安装">安装</a>
      <ul>
        <li><a href="#源码编译">源码编译</a></li>
        <li><a href="#直接安装不修改源码">直接安装（不修改源码）</a></li>
        <li><a href="#docker-运行-hugo">docker 运行 hugo</a>
          <ul>
            <li><a href="#注意事项">注意事项</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#目录结构">目录结构</a></li>
    <li><a href="#命令">命令</a>
      <ul>
        <li><a href="#hugo-1">hugo</a></li>
      </ul>
    </li>
    <li><a href="#配置文件">配置文件</a></li>
    <li><a href="#内容管理">内容管理</a>
      <ul>
        <li><a href="#资源分组">资源分组</a></li>
        <li><a href="#内容格式">内容格式</a></li>
        <li><a href="#前置变量">前置变量</a></li>
        <li><a href="#内容类型">内容类型</a></li>
        <li><a href="#内容模板">内容模板</a></li>
        <li><a href="#内容分组">内容分组</a></li>
        <li><a href="#短代码">短代码</a></li>
        <li><a href="#hugo与markdown资源引用差异">hugo与markdown资源引用差异</a></li>
      </ul>
    </li>
    <li><a href="#主题">主题</a>
      <ul>
        <li><a href="#next主题">next主题</a></li>
        <li><a href="#fixit">FixIt</a></li>
        <li><a href="#修改字体">修改字体</a></li>
      </ul>
    </li>
    <li><a href="#error">error</a>
      <ul>
        <li><a href="#hugo-lib64libstdcso6">hugo: /lib64/libstdc++.so.6</a></li>
      </ul>
    </li>
    <li><a href="#使用incron实现hugo自动发布">使用incron实现hugo自动发布</a>
      <ul>
        <li><a href="#verysync是一款简单易用的多平台文件同步软件">verysync是一款简单易用的多平台文件同步软件</a></li>
        <li><a href="#incron配置文件监控">incron配置文件监控</a></li>
      </ul>
    </li>
    <li><a href="#配置-artalk-评论">配置 Artalk 评论</a>
      <ul>
        <li><a href="#使用docker容器创建artalk">使用<code>docker</code>容器创建<code>artalk</code></a></li>
        <li><a href="#修改hugo配置文件">修改<code>hugo</code>配置文件</a></li>
      </ul>
    </li>
    <li><a href="#我的网站配置">我的网站配置</a></li>
    <li><a href="#允许-url-使用大写字母">允许 URL 使用大写字母</a></li>
    <li><a href="#通过定时任务发布">通过定时任务发布</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><!-- FileID: FID -->
<blockquote>
<p>运行环境：</p>
<ul>
<li>hugo: 0.102.0、0.111.3</li>
<li>centos:7</li>
<li>docker:20</li>
</ul>
<p>内容来自以下文档：</p>
<ul>
<li><a href="https://next--gohugoio.netlify.app/documentation/"target="_blank" rel="external nofollow noopener noreferrer">hugo官方文档</a></li>
<li><code>凡梦星尘</code>: <a href="https://gitee.com/hugo-next/hugo-theme-next"target="_blank" rel="external nofollow noopener noreferrer">hugo-theme-next</a></li>
<li><code>大妞</code>: <a href="https://blog.csdn.net/zvivi521/article/details/7920834"target="_blank" rel="external nofollow noopener noreferrer">inux inotify 研究7</a></li>
<li><a href="http://www.verysync.com/manual/"target="_blank" rel="external nofollow noopener noreferrer">微力同步用户使用手册</a></li>
<li><a href="https://artalk.js.org/guide/intro.html"target="_blank" rel="external nofollow noopener noreferrer">Artalk官方文档</a></li>
</ul>
</blockquote>
<!-- 网址链接 -->
<!-- [url]:https://gohugo.io/documentation/ "hugo官方文档" -->
<!-- 图片链接 -->
<!-- 其它链接 -->
<h1 id="hugo" class="heading-element">
  <a href="#hugo" class="heading-mark"></a>hugo</h1><p>Hugo是一个用Go编写的快速而现代的静态网站生成器</p>
<h1 id="安装" class="heading-element">
  <a href="#%e5%ae%89%e8%a3%85" class="heading-mark"></a>安装</h1><p>有以下几种安装方式：</p>
<ul>
<li>从<a href="https://github.com/gohugoio/hugo/releases"target="_blank" rel="external nofollow noopener noreferrer">hugo-Releases</a>下载二进制包直接运行。
但二进制包生产的编译环境高于当前使用环境时，无法运行。
如<code>v0.101.0</code>无法在<code>centos7</code>运行</li>
<li>源码编译，推荐方式</li>
<li>docker镜像，没必要且使用场景少</li>
</ul>
<h2 id="源码编译" class="heading-element">
  <a href="#%e6%ba%90%e7%a0%81%e7%bc%96%e8%af%91" class="heading-mark"></a>源码编译</h2><div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir <span class="nv">$HOME</span>/src
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$HOME</span>/src
</span></span><span class="line"><span class="cl">git clone https://github.com/gohugoio/hugo.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> hugo
</span></span><span class="line"><span class="cl">go install --tags extended
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 编译完成后hugo在$GOPATH变量值目录中</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 如果该变量值为空则在$HOME/go/bin下</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># /root/go/bin/hugo version</span>
</span></span><span class="line"><span class="cl">hugo v0.102.0-DEV-223bf2800488ad5d38854bbb595d789bc35ebe32+extended linux/amd64 <span class="nv">BuildDate</span><span class="o">=</span>2022-07-09T14:03:11Z
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># mv /root/go/bin/hugo /usr/local/bin/</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># hugo version</span>
</span></span><span class="line"><span class="cl">hugo v0.102.0-DEV-223bf2800488ad5d38854bbb595d789bc35ebe32+extended linux/amd64 <span class="nv">BuildDate</span><span class="o">=</span>2022-07-09T14:03:11Z</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="直接安装不修改源码" class="heading-element">
  <a href="#%e7%9b%b4%e6%8e%a5%e5%ae%89%e8%a3%85%e4%b8%8d%e4%bf%ae%e6%94%b9%e6%ba%90%e7%a0%81" class="heading-mark"></a>直接安装（不修改源码）</h2><p><code>v0.111.3+extended</code>安装前提</p>
<ul>
<li>安装 <code>git</code></li>
<li>安装 <code>go 1.18+</code></li>
<li>安装目录由 <code>GOPATH</code> 和 <code>GOBIN</code> 环境变量控制。如果设置了 <code>GOBIN</code>，则会将二进制文件安装到该目录。如果设置了 <code>GOPATH</code>，则二进制文件将安装到 <code>GOPATH</code> 列表中第一个目录的 <code>bin</code> 子目录中。否则，二进制文件将安装到默认 <code>GOPATH</code> 的 <code>bin</code> 子目录（$<code>HOME/go</code> 或 <code>%USERPROFILE%\go</code>）</li>
</ul>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># go install -tags extended github.com/gohugoio/hugo@latest</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># /root/go/bin/hugo version</span>
</span></span><span class="line"><span class="cl">hugo v0.111.3+extended linux/amd64 <span class="nv">BuildDate</span><span class="o">=</span>unknown
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># mv /root/go/bin/hugo /usr/local/bin/</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="docker-运行-hugo" class="heading-element">
  <a href="#docker-%e8%bf%90%e8%a1%8c-hugo" class="heading-mark"></a>docker 运行 hugo</h2><p>官方没有制作 docker 镜像，但推荐使用 <code>klakegg/hugo</code>。 该镜像有几个标签：</p>
<ul>
<li>latest：基础版，是基于 busybox</li>
<li>ext：扩展版，有基于 alpine debian 等系统</li>
</ul>
<br/>
<p>初始化目录：</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@c8 hugo<span class="o">]</span><span class="c1"># docker container run --rm -it -v $(pwd):/src klakegg/hugo:ext-alpine new site  book</span>
</span></span><span class="line"><span class="cl">Congratulations! Your new Hugo site is created in /src/book.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Just a few more steps and you<span class="err">&#39;</span>re ready to go:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1. Download a theme into the same-named folder.
</span></span><span class="line"><span class="cl">   Choose a theme from https://themes.gohugo.io/ or
</span></span><span class="line"><span class="cl">   create your own with the <span class="s2">&#34;hugo new theme &lt;THEMENAME&gt;&#34;</span> command.
</span></span><span class="line"><span class="cl">2. Perhaps you want to add some content. You can add single files
</span></span><span class="line"><span class="cl">   with <span class="s2">&#34;hugo new &lt;SECTIONNAME&gt;/&lt;FILENAME&gt;.&lt;FORMAT&gt;&#34;</span>.
</span></span><span class="line"><span class="cl">3. Start the built-in live server via <span class="s2">&#34;hugo server&#34;</span>.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Visit https://gohugo.io/ <span class="k">for</span> quickstart guide and full documentation.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@c8 hugo<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">book</span></span></code></pre></td></tr></table>
</div>
</div><p>运行服务：</p>
<div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@c8 book<span class="o">]</span><span class="c1"># docker container run -d --name book -it -v $(pwd):/src -p 1313:1313 klakegg/hugo:ext-alpine server -t book</span>
</span></span><span class="line"><span class="cl">362614c608e99215961fee9c1fe3d8473944b3a47d28893c5a6a2f6e3cfceefb</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="注意事项" class="heading-element">
  <a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="heading-mark"></a>注意事项</h3><p>配置文件中的<code>bashURL</code>不会覆盖默认值，可以通过<code>-b</code>或<code>--baseURL</code>覆盖</p>
<div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># grep &#34;baseURL&#34; config.yaml </span>
</span></span><span class="line"><span class="cl">baseURL: a.b.c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># docker container run --rm -it -v $(pwd):/src klakegg/hugo:ext-alpine  server</span>
</span></span><span class="line"><span class="cl">Start building sites … 
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Web Server is available at //localhost:1313/ <span class="o">(</span><span class="nb">bind</span> address 0.0.0.0<span class="o">)</span>
</span></span><span class="line"><span class="cl">Press Ctrl+C to stop
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># docker container run --rm -it -v $(pwd):/src klakegg/hugo:ext-alpine  server -b a.b.c</span>
</span></span><span class="line"><span class="cl">Start building sites … 
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Web Server is available at //a.b.c:1313/ <span class="o">(</span><span class="nb">bind</span> address 0.0.0.0<span class="o">)</span>
</span></span><span class="line"><span class="cl">Press Ctrl+C to stop</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="目录结构" class="heading-element">
  <a href="#%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84" class="heading-mark"></a>目录结构</h1><div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost hugo<span class="o">]</span><span class="c1"># ls next/ | sed &#39;s/ /\n/&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># hugo new 命令创建的文档存放位置</span>
</span></span><span class="line"><span class="cl">archetypes
</span></span><span class="line"><span class="cl"><span class="c1"># 配置文件，也可以是config目录</span>
</span></span><span class="line"><span class="cl">config.toml
</span></span><span class="line"><span class="cl"><span class="c1"># 原使网站内容，即md文档之类的</span>
</span></span><span class="line"><span class="cl">content
</span></span><span class="line"><span class="cl"><span class="c1"># 生成网站时可使用的配置文件或数据模板目录</span>
</span></span><span class="line"><span class="cl">data
</span></span><span class="line"><span class="cl"><span class="c1"># 以文件的形式存储模板，指定如何将内容视图呈现到静态网站中。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 模板包括列表页 、主页、 分类模板、 部分、 单页模板等。.html</span>
</span></span><span class="line"><span class="cl">layouts
</span></span><span class="line"><span class="cl"><span class="c1"># hugo生成的所有静态内容，即网站主页</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 从 Hugo 0.31 开始，您可以拥有多个静态目录。</span>
</span></span><span class="line"><span class="cl">public
</span></span><span class="line"><span class="cl"><span class="c1"># 静态内容</span>
</span></span><span class="line"><span class="cl">static
</span></span><span class="line"><span class="cl"><span class="c1"># 主题文件</span>
</span></span><span class="line"><span class="cl">themes</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="命令" class="heading-element">
  <a href="#%e5%91%bd%e4%bb%a4" class="heading-mark"></a>命令</h1><h2 id="hugo-1" class="heading-element">
  <a href="#hugo-1" class="heading-mark"></a>hugo</h2><p><code>hugo</code>命令用来快速生成静态页面</p>
<div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># hugo [flags]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-b, --baseURL string
</span></span><span class="line"><span class="cl">    <span class="c1"># 修改访问网站的URL地址</span>
</span></span><span class="line"><span class="cl">-D, --buildDrafts 
</span></span><span class="line"><span class="cl">    <span class="c1"># 生成静态页面时包含 draft 标记的文档</span>
</span></span><span class="line"><span class="cl">-E, --buildExpired
</span></span><span class="line"><span class="cl">    <span class="c1"># 生成静态页面时包含 expired 标记的文档</span>
</span></span><span class="line"><span class="cl">-F, --buildFuture
</span></span><span class="line"><span class="cl">    <span class="c1"># 生成静态页面时包含 Future 标记的文档</span>
</span></span><span class="line"><span class="cl">-d, --destination string
</span></span><span class="line"><span class="cl">    <span class="c1"># 静态页面位置</span>
</span></span><span class="line"><span class="cl">-e, --environment string
</span></span><span class="line"><span class="cl">    <span class="c1"># 包含环境变量</span>
</span></span><span class="line"><span class="cl">-t, --theme strings
</span></span><span class="line"><span class="cl">    <span class="c1"># 指定主题</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="配置文件" class="heading-element">
  <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="heading-mark"></a>配置文件</h1><p>配置文件有<code>yaml</code>,<code>json</code>,<code>toml</code>三种格式，
默认配置文件为<code>config.toml</code>，在主目录下。
可以使用<code>hugo --config</code>选项指定1个或多个配置文件</p>
<div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo --config debugconfig.toml
</span></span><span class="line"><span class="cl"><span class="c1"># 多个配置文件使用逗号分隔</span>
</span></span><span class="line"><span class="cl">hugo --config a.toml,b.toml,c.toml</span></span></code></pre></td></tr></table>
</div>
</div><p>还可以在主目录下使用配置目录<code>config</code>，可以把配置项目分为多个文件，方便维护</p>
<div class="highlight" id="id-9"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">├── config
</span></span><span class="line"><span class="cl">│   ├── _default            <span class="c1"># 默认配置文件</span>
</span></span><span class="line"><span class="cl">│   │   ├── config.toml     <span class="c1"># 配置文件</span>
</span></span><span class="line"><span class="cl">│   │   ├── languages.toml  <span class="c1"># languages对象配置文件</span>
</span></span><span class="line"><span class="cl">│   │   ├── menus.en.toml
</span></span><span class="line"><span class="cl">│   │   ├── menus.zh.toml
</span></span><span class="line"><span class="cl">│   │   └── params.toml     <span class="c1"># params对象配置文件</span>
</span></span><span class="line"><span class="cl">│   ├── production
</span></span><span class="line"><span class="cl">│   │   ├── config.toml
</span></span><span class="line"><span class="cl">│   │   └── params.toml
</span></span><span class="line"><span class="cl">│   └── staging
</span></span><span class="line"><span class="cl">│       ├── config.toml
</span></span><span class="line"><span class="cl">│       └── params.toml
</span></span><span class="line"><span class="cl"><span class="c1"># 每个文件表示一个配置根对象，在对象配置文件中，内容必须是顶级的</span></span></span></code></pre></td></tr></table>
</div>
</div><p>以下是一些配置说明，<a href="https://next--gohugoio.netlify.app/documentation/getting-started/configuration"target="_blank" rel="external nofollow noopener noreferrer">更多配置</a>查看官方文件</p>
<div class="highlight" id="id-10"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># 内容模板目录位置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 所需版本：Hugo 0.56</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">archetypeDir</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;archetypes&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 资源文件的目录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 所需版本：Hugo 0.56</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">assetDir</span><span class="p">:</span><span class="w"> </span><span class="l">“assets”</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># hostname，为/时表示本地</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 启用 balckFriday(Markdown 渲染引擎，已被Goldmark取代)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">blackfriday</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 构建静态文件时的选项</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># https://next--gohugoio.netlify.app/documentation/getting-started/configuration/#configure-build</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># New in v0.66.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">build</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 是否将 jsconfig.json 写入 /assets 目录，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 该文件旨在帮助在 VS Code 等代码编辑器中进行智能感知/导航</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># New in v0.78.0 </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">noJSConfigInAssets</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 何时将 /resources/_gen 中的缓存资源用于 PostCSS 和 ToCSS。有以下值：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - never: 禁止</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - always: 总是</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - fallback: 如果 PostCSS/扩展版本不可用，将尝试缓存</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># New in v0.78.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">useResourceCacheWhen</span><span class="p">:</span><span class="w"> </span><span class="l">fallback</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 生成 hugo_stats.json 文件，其中包含一些关于构建的聚合数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># New in v0.69.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">writeStats</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 生成静态文件时是否包含带有 draft: true 标识的文档</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 该标识表示文档为：草稿</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">buildDrafts</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 生成静态文件时是否包含带有 expirydate: date 标识的文档</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 该标识表示文档为：设置过期时间，如果过期，则不生成静态文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">buildExpired</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 生成静态文件时是否包含带有 publishdate: date 标识的文档</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 该标识表示文档为：设置发布时间，如果时间来到，则不生成静态文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">buildFuture</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 缓存配置:https://next--gohugoio.netlify.app/documentation/getting-started/configuration/#configure-file-caches</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 0.52</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">caches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">assets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dir</span><span class="p">:</span><span class="w"> </span><span class="p">:</span><span class="l">resourceDir/_gen</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxAge</span><span class="p">:</span><span class="w"> </span>-<span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">getcsv</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dir</span><span class="p">:</span><span class="w"> </span><span class="p">:</span><span class="l">cacheDir/:project</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxAge</span><span class="p">:</span><span class="w"> </span>-<span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">getjson</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dir</span><span class="p">:</span><span class="w"> </span><span class="p">:</span><span class="l">cacheDir/:project</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxAge</span><span class="p">:</span><span class="w"> </span>-<span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">images</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dir</span><span class="p">:</span><span class="w"> </span><span class="p">:</span><span class="l">resourceDir/_gen</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxAge</span><span class="p">:</span><span class="w"> </span>-<span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">modules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dir</span><span class="p">:</span><span class="w"> </span><span class="p">:</span><span class="l">cacheDir/modules</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxAge</span><span class="p">:</span><span class="w"> </span>-<span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否将相对 URL 转换为绝对 URL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">canonifyURLs</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 原文件内容目录，如md文档目录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Hugo 0.56</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">contentDir</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;conftent&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 数据目录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Hugo 0.56</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">dataDir</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;data&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 默认语言</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">defaultContentLanguage</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;en&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否在 subdir 中渲染默认的内容语言</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">defaultContentLanguageInSubdir</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否启用别名重定向，请注意，即使设置了，别名本身也会保留在页面上</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">disableAliases</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否禁止hugo在主页注入元数据(可以在主页源代码中看到hugo，提升人气)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">disableHugoGeneratorInject</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 禁用指定的页面类型</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">disableKinds</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否浏览器窗口的自动实时重新加载</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">disableLiveReload</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否把网址路径转换为小写</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">disablePathToLower</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否启用emoji表情支持</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">enableEmoji</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 是否自动检测内容中的中文/日文/韩文语言 </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">hasCJKLanguage</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># 图片处理</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># https://next--gohugoio.netlify.app/documentation/content-management/image-processing/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">imaging</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 锚点</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">anchor</span><span class="p">:</span><span class="w"> </span><span class="l">Smart</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 支持透明度的格式</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">bgColor</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;#ffffff&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 此选项适用于 WebP 图像：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - drawing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - icon</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - photo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - picture</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - text</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hint</span><span class="p">:</span><span class="w"> </span><span class="l">photo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 该值适用于 JPEG 和 WebP 图像</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 值为1-100，值越高，生成的图像质量越好</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">quality</span><span class="p">:</span><span class="w"> </span><span class="m">75</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 重采样过滤器</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">resampleFilter</span><span class="p">:</span><span class="w"> </span><span class="l">Box</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#  语言选项</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">languages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ar</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">languagedirection</span><span class="p">:</span><span class="w"> </span><span class="l">rtl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">مدونتي</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">en</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">linkedin</span><span class="p">:</span><span class="w"> </span><span class="l">https://linkedin.com/whoever</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">My blog</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">fr</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">linkedin</span><span class="p">:</span><span class="w"> </span><span class="l">https://linkedin.com/fr/whoever</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">navigation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="l">Aide</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">Mon blogue</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">pt-pt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">O meu blog</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Markdown 渲染</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># New in v0.60.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># https://next--gohugoio.netlify.app/documentation/getting-started/configuration-markup/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">markup</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 设置默认渲染引擎</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">defaultMarkdownHandler</span><span class="p">:</span><span class="w"> </span><span class="l">goldmark</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">asciidocExt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">attributes</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">backend</span><span class="p">:</span><span class="w"> </span><span class="l">html5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extensions</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">failureLevel</span><span class="p">:</span><span class="w"> </span><span class="l">fatal</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">noHeaderOrFooter</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">preserveTOC</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">safeMode</span><span class="p">:</span><span class="w"> </span><span class="l">unsafe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">sectionNumbers</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">trace</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">verbose</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">workingFolderCurrent</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># blackFriday 渲染引擎</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">blackFriday</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">angledQuotes</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extensions</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extensionsMask</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">footnoteAnchorPrefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">footnoteReturnLinkContents</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">fractions</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hrefTargetBlank</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">latexDashes</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">nofollowLinks</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">noreferrerLinks</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">plainIDAnchors</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">skipHTML</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">smartDashes</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">smartypants</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">smartypantsQuotesNBSP</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">taskLists</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># goldmark 渲染引擎，Hugo 0.60</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># https://github.com/yuin/goldmark/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">goldmark</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">definitionList</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">footnote</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">linkify</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">strikethrough</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">taskList</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 是否将标点符号替换为排版实体</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">typographer</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parser</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">attribute</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">block</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">autoHeadingID</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">autoHeadingIDType</span><span class="p">:</span><span class="w"> </span><span class="l">github</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">renderer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">hardWraps</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 是否呈现原始 HPL 和潜在危险链接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">unsafe</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">xhtml</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 高亮</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">highlight</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">anchorLineNos</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">codeFences</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">guessSyntax</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hl_Lines</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">lineAnchors</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">lineNoStart</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">lineNos</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">lineNumbersInTable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">noClasses</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">style</span><span class="p">:</span><span class="w"> </span><span class="l">monokai</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tabWidth</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 目录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tableOfContents</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 目录结束级别</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">endLevel</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 是否用户有序列表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ordered</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 目录起始级别</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">startLevel</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># hugo 模块：https://next--gohugoio.netlify.app/documentation/hugo-modules/configuration/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">module:</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="内容管理" class="heading-element">
  <a href="#%e5%86%85%e5%ae%b9%e7%ae%a1%e7%90%86" class="heading-mark"></a>内容管理</h1><p>在 Hugo 中，内容应以反映呈现的网站的方式进行组织，
无需任何其他配置，以下操作将正常工作</p>
<div class="highlight" id="id-11"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">└── content
</span></span><span class="line"><span class="cl">    └── about
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   └── index.md  // &lt;- https://example.com/about/
</span></span><span class="line"><span class="cl">    ├── posts
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   ├── firstpost.md   // &lt;- https://example.com/posts/firstpost/
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   ├── happy
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   <span class="p">|</span>   └── ness.md    // &lt;- https://example.com/posts/happy/ness/
</span></span><span class="line"><span class="cl">    <span class="p">|</span>   └── secondpost.md  // &lt;- https://example.com/posts/secondpost/
</span></span><span class="line"><span class="cl">    └── quote
</span></span><span class="line"><span class="cl">        ├── first.md       // &lt;- https://example.com/quote/first/
</span></span><span class="line"><span class="cl">        └── second.md      // &lt;- https://example.com/quote/second/</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="资源分组" class="heading-element">
  <a href="#%e8%b5%84%e6%ba%90%e5%88%86%e7%bb%84" class="heading-mark"></a>资源分组</h2><p>资源分组有以下方式：</p>
<ul>
<li>以<code>_index.md</code>做为索引页面</li>
<li>以<code>index.md</code>做为索引页面</li>
</ul>
<p>示例：</p>
<div class="highlight" id="id-12"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">content/
</span></span><span class="line"><span class="cl">├── posts
</span></span><span class="line"><span class="cl">│   ├── my-post
</span></span><span class="line"><span class="cl">│   │   ├── content1.md
</span></span><span class="line"><span class="cl">│   │   ├── content2.md
</span></span><span class="line"><span class="cl">│   │   ├── image1.jpg
</span></span><span class="line"><span class="cl">│   │   ├── image2.png
</span></span><span class="line"><span class="cl">│   │   └── index.md
</span></span><span class="line"><span class="cl">│   └── my-other-post
</span></span><span class="line"><span class="cl">├── branch-bundle-1
</span></span><span class="line"><span class="cl">│   ├── branch-content1.md
</span></span><span class="line"><span class="cl">│   ├── branch-content2.md
</span></span><span class="line"><span class="cl">│   ├── image1.jpg
</span></span><span class="line"><span class="cl">│   ├── image2.png
</span></span><span class="line"><span class="cl">│   └── _index.md
</span></span><span class="line"><span class="cl">└── branch-bundle-2
</span></span><span class="line"><span class="cl">    ├── _index.md
</span></span><span class="line"><span class="cl">    └── a-leaf-bundle
</span></span><span class="line"><span class="cl">        └── index.md</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="内容格式" class="heading-element">
  <a href="#%e5%86%85%e5%ae%b9%e6%a0%bc%e5%bc%8f" class="heading-mark"></a>内容格式</h2><p><code>html</code>文档与<code>markdown</code>文档都是默认支持的，
扩展格式文档参考<a href="https://next--gohugoio.netlify.app/documentation/content-management/formats/"target="_blank" rel="external nofollow noopener noreferrer">内容格式</a></p>
<h2 id="前置变量" class="heading-element">
  <a href="#%e5%89%8d%e7%bd%ae%e5%8f%98%e9%87%8f" class="heading-mark"></a>前置变量</h2><p>前置变量是将元数据附加到内容类型的实例（即嵌入在内容文件中）进行保留，
并且是赋予Hugo其优势的众多功能之一</p>
<p>这些变量定义在文档开头，它会覆盖默认值</p>
<div class="highlight" id="id-13"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-md" data-lang="md"><span class="line"><span class="cl"><span class="c">&lt;!-- toml格式--&gt;</span>
</span></span><span class="line"><span class="cl">+++
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">+++
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- yaml格式 --&gt;</span>
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- json格式 --&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div><p>这些变量是给<code>hugo</code>模板调用的，不会被转换为<code>html</code>内容。<code>yaml</code>格式示例</p>
<div class="highlight" id="id-14"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">categories</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">Development</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">VIM</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2012-04-06&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">spf13-vim is a cross platform distribution of vim plugins and resources</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">for Vim.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="l">spf13-vim-3-0-release-and-new-website</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">tags</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">.vimrc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">plugins</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">spf13-vim</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">vim</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">spf13-vim 3.0 release and new website</span></span></span></code></pre></td></tr></table>
</div>
</div><p>有以下变量：</p>
<ul>
<li><code>aliases</code>: 别名</li>
<li><code>audio</code>: 音频文件的路径数组</li>
<li><code>cascade</code>: 映射，其值将向下传递</li>
<li><code>date</code>: 创建日期，可以由<code>hugo</code>自动生成</li>
<li><code>description</code>: 内容描述</li>
<li><code>summary</code>: 内容摘要</li>
<li><code>draft: true</code>: 表示为草稿，默认不生成html文件</li>
<li><code>expiryDate</code>: 到期日期，过期时不会生成html文件</li>
<li><code>headless: true</code>: 表示不使用索引文件<code>inde.md</code></li>
<li><code>images</code>: 图片路径</li>
<li><code>isCJKLanguage: true</code>: 是否含有CJK语言</li>
<li><code>keywords</code>: 关键字</li>
<li><code>publishDate</code>: 发布(生效)日期，时间不到则不生成html文件</li>
<li><code>title</code>: 标题</li>
<li><code>type</code>: 内容归类类型</li>
<li><code>url</code>: url地址，通常由hugo生成</li>
<li><code>weight</code>: 排序权重，值越小则优先级越高，0表示不设置</li>
<li><code>_bulid</code>: 构建静态文件时的选项，使用与配置文件<code>config.yaml</code>中的<code>build</code>相同</li>
<li>更多变量：<a href="https://next--gohugoio.netlify.app/documentation/content-management/front-matter/"target="_blank" rel="external nofollow noopener noreferrer">front-matter</a></li>
<li>自定义变量：自定义变量会在<code>.Params</code>中引用</li>
</ul>
<h2 id="内容类型" class="heading-element">
  <a href="#%e5%86%85%e5%ae%b9%e7%b1%bb%e5%9e%8b" class="heading-mark"></a>内容类型</h2><p><code>hugo</code>是围绕内容类型构建的，不同类型可以使用不同的模板创建html文件。
内容类型由<code>type</code>变量指定，如果没有指定，则默认为主目录下的第1个目录，
如<code>content/blog/my-first-event.md</code>，它的内容类型为<code>blog</code></p>
<h2 id="内容模板" class="heading-element">
  <a href="#%e5%86%85%e5%ae%b9%e6%a8%a1%e6%9d%bf" class="heading-mark"></a>内容模板</h2><p><code>hugo new</code>创建文件时使用的模板，</p>
<div class="highlight" id="id-15"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">https://next--gohugoio.netlify.app/documentation/content-management/archetypes/</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="内容分组" class="heading-element">
  <a href="#%e5%86%85%e5%ae%b9%e5%88%86%e7%bb%84" class="heading-mark"></a>内容分组</h2><p>文档划分为不同的组，不同的组可以添加预定的内容。分组之间存在逻辑关联关系。</p>
<p>划分由<code>taxonomies</code>指定，<code>hugo</code>默认配置如下</p>
<div class="highlight" id="id-16"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">taxonomies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">category</span><span class="p">:</span><span class="w"> </span><span class="l">categories</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">tags</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这样在前置变量中使用<code>tags</code>打标签或<code>categories</code>进行归类。
想要修改默认值只要在配置文件中<code>taxonomies</code>值，想要禁止使用某些分组时，
可以使用<code>disableKinds</code>字段，如：</p>
<div class="highlight" id="id-17"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">disableKinds</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">taxonomy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">term</span></span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>New in v0.73.0</code>中，为了减少混乱，<code>hugo</code>对以下组进行约定:</p>
<ul>
<li><code>home</code>: 表示首页</li>
<li><code>page</code>: 表示文件</li>
<li><code>section</code>: 表示某个目录</li>
<li><code>taxonomy</code>: 表示分组</li>
<li><code>term</code>: 登录页</li>
</ul>
<h2 id="短代码" class="heading-element">
  <a href="#%e7%9f%ad%e4%bb%a3%e7%a0%81" class="heading-mark"></a>短代码</h2><p><code>md</code>文档格式简单，但功能也简单，更多功能通常插入<code>html</code>标签实现。
<code>hugo</code>提供一种支持自定义的模块语法，称为短代码(类似函数、模板)。
可以调用这短代码，实现重复的功能。</p>
<h2 id="hugo与markdown资源引用差异" class="heading-element">
  <a href="#hugo%e4%b8%8emarkdown%e8%b5%84%e6%ba%90%e5%bc%95%e7%94%a8%e5%b7%ae%e5%bc%82" class="heading-mark"></a>hugo与markdown资源引用差异</h2><p><code>hugo</code>中图片必须是页面资源或全局资源才行进行访问：</p>
<ul>
<li>页面资源大概意思是一个文档应该为它创建一个目录(称为页包)，
以<code>a.md</code>文档为例，那该创建一个<code>a</code>目录，该目录里面有<code>_index.md</code>或<code>index.md</code>才是文档内容，还有与之相关的静态资源，如图片，这种情况可以使用相对路径与绝对路径引用。</li>
<li>全局资源在<code>assets</code>或<code>static</code> 目录下，图片在该目录下，只能使用绝对路径引用</li>
</ul>
<p>当从其它环境转到<code>hugo</code>环境中时，如下：
<code>a.md</code>中使用<code>![](./t.png &quot;t2&quot;)</code>时是无法加载的</p>
<div class="highlight" id="id-18"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost FixIt<span class="o">]</span><span class="c1"># ll content/posts/test/</span>
</span></span><span class="line"><span class="cl">total <span class="m">360</span>
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root    <span class="m">202</span> Jul <span class="m">17</span> 16:43 a.md
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">364231</span> Jul <span class="m">17</span> 12:54 t.png</span></span></code></pre></td></tr></table>
</div>
</div><p>这是因为在<code>hugo</code>中当前路径指的是文章的<code>slug</code>路径。没有页包的情况下，
生成的静态网页会默认创建与文件同名无后缀的目录做为页包目录。
虽然生成的静态文件无法正确的引用，但也还是会把图片复制对应的目录中。
即<code>hugo</code>会解析为<code>/public/posts/test/a/t.png</code>。
因此可以使用<code>../t.png</code>引用.</p>
<p>这种方式把<code>md</code>文档放在其它环境时不兼容。有以下解决方法：</p>
<ul>
<li>方法1：资源使用绝对路径，这种方式优缺点：
<ul>
<li>缺点：上层及其以上的目录发生变化时也无法正确引用</li>
<li>缺点：要修改现有文档中的图片引用</li>
<li>优点：能兼容其它环境</li>
<li>优点：能使用永久链接</li>
</ul>
</li>
<li>方法2：资源使用相对路径，这种方式优缺点：
<ul>
<li>缺点：需要从 <code>web</code> 改写 <code>url</code> 地址</li>
<li>优点：不用修改现有文档</li>
</ul>
</li>
</ul>
<p>方法2在没有使用永久链接时<code>nginx</code>改写<code>url</code>地址只去除图片路径的上层目录即可</p>
<div class="highlight" id="id-19"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">[root@localhost</span> <span class="s">nginx]</span><span class="c1"># cat conf/FixIt.nginx.conf 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s">...</span>
</span></span><span class="line"><span class="cl">        <span class="s">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	    <span class="c1"># 默认需要修改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kn">rewrite</span> <span class="s">(.*\/)(.*\/)(.*\.png</span>$<span class="s">)</span> <span class="nv">$1$3</span> <span class="s">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.xml</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 	<span class="c1"># 不需要修改，绝对路径或使用页包       
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">location</span> <span class="p">~</span> <span class="sr">/hugo/hugotheme-.*/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.xml</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">}</span>
</span></span><span class="line"><span class="cl"><span class="err">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>方法2使用永久链接时需要把资源移到统一的路径，这样才方便写 <code>url</code> 规则</p>
<div class="highlight" id="id-20"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># /usr/local/nginx/note/ 是网站目录</span>
</span></span><span class="line"><span class="cl"><span class="c1"># /usr/local/nginx/note/download 是资源统一目录</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost hugo<span class="o">]</span><span class="c1"># cd /data/hugo/ &amp;&amp; \</span>
</span></span><span class="line"><span class="cl">rm -rf /usr/local/nginx/note/* <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>hugo --config Hugo.theme.next.yaml -d /usr/local/nginx/note/ <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>mkdir /usr/local/nginx/note/download  <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>mv <span class="k">$(</span>find /usr/local/nginx/note/archives/  -type f -a ! -name <span class="s2">&#34;*.xml&#34;</span> -a ! -name <span class="s2">&#34;*.html&#34;</span><span class="k">)</span> /usr/local/nginx/note/download/ <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="nb">echo</span> <span class="s1">&#39;ok&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Start building sites …
</span></span><span class="line"><span class="cl">hugo v0.102.0-DEV-223bf2800488ad5d38854bbb595d789bc35ebe32+extended linux/amd64 <span class="nv">BuildDate</span><span class="o">=</span>2022-07-09T14:03:11Z
</span></span><span class="line"><span class="cl">WARNING: calling IsSet with unsupported <span class="nb">type</span> <span class="s2">&#34;invalid&#34;</span> <span class="o">(</span>&lt;nil&gt;<span class="o">)</span> will always <span class="k">return</span> false.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                   <span class="p">|</span> ZH-CN
</span></span><span class="line"><span class="cl">-------------------+--------
</span></span><span class="line"><span class="cl">  Pages            <span class="p">|</span>   <span class="m">454</span>
</span></span><span class="line"><span class="cl">  Paginator pages  <span class="p">|</span>    <span class="m">31</span>
</span></span><span class="line"><span class="cl">  Non-page files   <span class="p">|</span>   <span class="m">108</span>
</span></span><span class="line"><span class="cl">  Static files     <span class="p">|</span>    <span class="m">46</span>
</span></span><span class="line"><span class="cl">  Processed images <span class="p">|</span>     <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Aliases          <span class="p">|</span>   <span class="m">171</span>
</span></span><span class="line"><span class="cl">  Sitemaps         <span class="p">|</span>     <span class="m">1</span>
</span></span><span class="line"><span class="cl">  Cleaned          <span class="p">|</span>     <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Total in <span class="m">4900</span> ms
</span></span><span class="line"><span class="cl">ok
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># nginx 规则</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 除 imgs/ （主题图片）以外的都要重写</span>
</span></span><span class="line"><span class="cl">server <span class="o">{</span>
</span></span><span class="line"><span class="cl">    rewrite <span class="o">([</span>^imgs<span class="o">]</span><span class="se">\/</span><span class="o">)(</span>.*<span class="se">\.</span><span class="o">(</span>gif<span class="p">|</span>jpg<span class="p">|</span>jpeg<span class="p">|</span>png<span class="p">|</span>bmp<span class="p">|</span>swf<span class="p">|</span>webp<span class="p">|</span>sh<span class="p">|</span>vim<span class="o">)</span>$<span class="o">)</span> /download/<span class="nv">$2</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="主题" class="heading-element">
  <a href="#%e4%b8%bb%e9%a2%98" class="heading-mark"></a>主题</h1><h2 id="next主题" class="heading-element">
  <a href="#next%e4%b8%bb%e9%a2%98" class="heading-mark"></a>next主题</h2><ul>
<li>下载</li>
</ul>
<div class="highlight" id="id-21"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 获取主题</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># git submodule add https://github.com/hugo-next/hugo-theme-next.git themes/hugo-theme-next</span>
</span></span><span class="line"><span class="cl">Cloning into <span class="s1">&#39;themes/hugo-theme-next&#39;</span>...
</span></span><span class="line"><span class="cl">remote: Enumerating objects: 1997, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Counting objects: 100% <span class="o">(</span>791/791<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Compressing objects: 100% <span class="o">(</span>487/487<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Total <span class="m">1997</span> <span class="o">(</span>delta 422<span class="o">)</span>, reused <span class="m">604</span> <span class="o">(</span>delta 283<span class="o">)</span>, pack-reused <span class="m">1206</span>
</span></span><span class="line"><span class="cl">Receiving objects: 100% <span class="o">(</span>1997/1997<span class="o">)</span>, 691.50 KiB <span class="p">|</span> <span class="m">0</span> bytes/s, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Resolving deltas: 100% <span class="o">(</span>976/976<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 把示例目录内容复制到网站家目录</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># cp -r themes/hugo-theme-next/exampleSite/* .</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">archetypes  config.toml  config.yaml  content  data  layouts  public  start.sh  static  themes
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 删除hugo默认配置文件</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost next<span class="o">]</span><span class="c1"># rm -rf config.toml</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="fixit" class="heading-element">
  <a href="#fixit" class="heading-mark"></a>FixIt</h2><p>来自：https://fixit.lruihao.cn/zh-cn/theme-documentation-basics/</p>
<div class="highlight" id="id-22"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 创建hugo环境</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost nginx<span class="o">]</span><span class="c1"># hugo new site FixIt</span>
</span></span><span class="line"><span class="cl">Congratulations! Your new Hugo site is created in /root/nginx/FixIt.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Just a few more steps and you<span class="s1">&#39;re ready to go:
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">1. Download a theme into the same-named folder.
</span></span></span><span class="line"><span class="cl"><span class="s1">   Choose a theme from https://themes.gohugo.io/ or
</span></span></span><span class="line"><span class="cl"><span class="s1">   create your own with the &#34;hugo new theme &lt;THEMENAME&gt;&#34; command.
</span></span></span><span class="line"><span class="cl"><span class="s1">2. Perhaps you want to add some content. You can add single files
</span></span></span><span class="line"><span class="cl"><span class="s1">   with &#34;hugo new &lt;SECTIONNAME&gt;/&lt;FILENAME&gt;.&lt;FORMAT&gt;&#34;.
</span></span></span><span class="line"><span class="cl"><span class="s1">3. Start the built-in live server via &#34;hugo server&#34;.
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">Visit https://gohugo.io/ for quickstart guide and full documentation.
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1"># 安装主题
</span></span></span><span class="line"><span class="cl"><span class="s1">[root@localhost nginx]# cd FixIt/
</span></span></span><span class="line"><span class="cl"><span class="s1">[root@localhost FixIt]# git clone https://github.com/Lruihao/FixIt.git themes/FixIt
</span></span></span><span class="line"><span class="cl"><span class="s1">Cloning into &#39;</span>themes/FixIt<span class="err">&#39;</span>...
</span></span><span class="line"><span class="cl">remote: Enumerating objects: 16856, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Counting objects: 100% <span class="o">(</span>1537/1537<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Compressing objects: 100% <span class="o">(</span>615/615<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Total <span class="m">16856</span> <span class="o">(</span>delta 967<span class="o">)</span>, reused <span class="m">1423</span> <span class="o">(</span>delta 891<span class="o">)</span>, pack-reused <span class="m">15319</span>
</span></span><span class="line"><span class="cl">Receiving objects: 100% <span class="o">(</span>16856/16856<span class="o">)</span>, 47.48 MiB <span class="p">|</span> 3.51 MiB/s, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Resolving deltas: 100% <span class="o">(</span>9045/9045<span class="o">)</span>, <span class="k">done</span>.</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改字体" class="heading-element">
  <a href="#%e4%bf%ae%e6%94%b9%e5%ad%97%e4%bd%93" class="heading-mark"></a>修改字体</h2><p>默认字体大写i与小写L辨识度不高。在 <code>assets/css/_custom.scss</code> 或 <code> FixIt/assets/css/_custom.scss</code> 中设置，覆盖主题默认设置</p>
<div class="highlight" id="id-23"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="o">[</span><span class="nt">root</span><span class="p">@</span><span class="k">localhost</span> <span class="nt">FixIt</span><span class="o">]</span><span class="err">#</span> <span class="nt">cat</span> <span class="nt">assets</span><span class="o">/</span><span class="nt">css</span><span class="o">/</span><span class="nt">_custom</span><span class="p">.</span><span class="nc">scss</span> 
</span></span><span class="line"><span class="cl"><span class="nt">html</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">font-family</span><span class="o">:</span> <span class="s2">&#34;JetBrains Mono&#34;</span><span class="o">,</span><span class="s1">&#39;system-ui, -apple-system&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="error" class="heading-element">
  <a href="#error" class="heading-mark"></a>error</h1><h2 id="hugo-lib64libstdcso6" class="heading-element">
  <a href="#hugo-lib64libstdcso6" class="heading-mark"></a>hugo: /lib64/libstdc++.so.6</h2><ul>
<li>下载二进制文件后无法直接运行</li>
</ul>
<div class="highlight" id="id-24"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost hugo<span class="o">]</span><span class="c1"># hugo version</span>
</span></span><span class="line"><span class="cl">hugo: /lib64/libstdc++.so.6: version <span class="sb">`</span>GLIBCXX_3.4.20<span class="s1">&#39; not found (required by hugo)
</span></span></span><span class="line"><span class="cl"><span class="s1">hugo: /lib64/libstdc++.so.6: version `CXXABI_1.3.8&#39;</span> not found <span class="o">(</span>required by hugo<span class="o">)</span>
</span></span><span class="line"><span class="cl">hugo: /lib64/libstdc++.so.6: version <span class="sb">`</span>GLIBCXX_3.4.21<span class="err">&#39;</span> not found <span class="o">(</span>required by hugo<span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>该问题没有得到解决，从其它地方下载库文件(如<code>klakegg/hugo</code>镜像中 )虽然可以正常
运行，但有其它报错，放弃继续使用该库文件。改用了源码编译方式</p>
<h1 id="使用incron实现hugo自动发布" class="heading-element">
  <a href="#%e4%bd%bf%e7%94%a8incron%e5%ae%9e%e7%8e%b0hugo%e8%87%aa%e5%8a%a8%e5%8f%91%e5%b8%83" class="heading-mark"></a>使用incron实现hugo自动发布</h1><p>我的场景：在windows上修改或增加文件后，
<code>verysync</code>软件自动同步到<code>linux</code>服务器上。
当<code>Inotify</code>监控到文件发生变化时重新生成静态文件</p>
<h2 id="verysync是一款简单易用的多平台文件同步软件" class="heading-element">
  <a href="#verysync%e6%98%af%e4%b8%80%e6%ac%be%e7%ae%80%e5%8d%95%e6%98%93%e7%94%a8%e7%9a%84%e5%a4%9a%e5%b9%b3%e5%8f%b0%e6%96%87%e4%bb%b6%e5%90%8c%e6%ad%a5%e8%bd%af%e4%bb%b6" class="heading-mark"></a>verysync是一款简单易用的多平台文件同步软件</h2><p>链接：<a href="http://www.verysync.com/manual/"target="_blank" rel="external nofollow noopener noreferrer">微力同步用户使用手册</a></p>
<h2 id="incron配置文件监控" class="heading-element">
  <a href="#incron%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9b%91%e6%8e%a7" class="heading-mark"></a>incron配置文件监控</h2><p><code>incron</code>是<code>inotify</code>的<code>cron</code>系统，包含一个后台守护进程(<code>incrond</code>)和一个事件编辑器
(<code>incrontab</code>)。由系统事件触发的机制，对于应用系统来说，几乎可以做到实时性。</p>
<ol>
<li>安装<code>icron</code></li>
</ol>
<div class="highlight" id="id-25"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum install incron -y</span>
</span></span><span class="line"><span class="cl">Loaded plugins: fastestmirror</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>编辑事件触发任务</li>
</ol>
<div class="highlight" id="id-26"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 查看支持的事件。监控对象为文件或目录</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># incrontab -t | sed &#39;s/,/\n/g&#39;</span>
</span></span><span class="line"><span class="cl">IN_ACCESS           <span class="c1"># 监控对象被读取</span>
</span></span><span class="line"><span class="cl">IN_MODIFY           <span class="c1"># 监控对象被写入</span>
</span></span><span class="line"><span class="cl">IN_ATTRIB           <span class="c1"># 监控对象属性被修改，如 chmod、chown、touch 等</span>
</span></span><span class="line"><span class="cl">IN_CLOSE_WRITE
</span></span><span class="line"><span class="cl">IN_CLOSE_NOWRITE
</span></span><span class="line"><span class="cl">IN_OPEN
</span></span><span class="line"><span class="cl">IN_MOVED_FROM       <span class="c1"># 监控对象被移走，如mv</span>
</span></span><span class="line"><span class="cl">IN_MOVED_TO         <span class="c1"># 监控对象被移来，如cp、mv</span>
</span></span><span class="line"><span class="cl">IN_CREATE           <span class="c1"># 监控对象增加，如创建新文件</span>
</span></span><span class="line"><span class="cl">IN_DELETE           <span class="c1"># 监控对象被删除，如rm</span>
</span></span><span class="line"><span class="cl">IN_DELETE_SELF      <span class="c1"># 监控对象自删除，即一个可执行文件在执行时删除自己</span>
</span></span><span class="line"><span class="cl">IN_CLOSE
</span></span><span class="line"><span class="cl">IN_MOVE             <span class="c1"># 监控对象被移动，等同于(IN_MOVED_FROM | IN_MOVED_TO)</span>
</span></span><span class="line"><span class="cl">IN_ONESHOT
</span></span><span class="line"><span class="cl">IN_ALL_EVENTS       <span class="c1"># 所有事件</span>
</span></span><span class="line"><span class="cl">IN_DONT_FOLLOW
</span></span><span class="line"><span class="cl">IN_ONLYDIR
</span></span><span class="line"><span class="cl">IN_MOVE_SELF        <span class="c1"># 监控对象自移动，即一个可执行文件在执行时移动自己</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 编辑配置文件，会默认保存在/var/spool/incron/ 目录下</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># incrontab -e</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># cat /var/spool/incron/root</span>
</span></span><span class="line"><span class="cl">/data/posts/	IN_MODIFY,IN_CREATE,IN_DELETE,IN_MOVE	<span class="nb">cd</span> /usr/local/nginx/FixIt/ <span class="o">&amp;&amp;</span> rm -rf public <span class="o">&amp;&amp;</span> hugo</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>启动<code>incron</code>并设置为开机启动</li>
</ol>
<div class="highlight" id="id-27"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># systemctl enable --now incrond</span>
</span></span><span class="line"><span class="cl">Created symlink from /etc/systemd/system/multi-user.target.wants/incrond.service to /usr/lib/systemd/system/incrond.service.
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># systemctl status incrond</span>
</span></span><span class="line"><span class="cl">● incrond.service - Inotify System Scheduler
</span></span><span class="line"><span class="cl">   Loaded: loaded <span class="o">(</span>/usr/lib/systemd/system/incrond.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">   Active: active <span class="o">(</span>running<span class="o">)</span> since Tue 2022-07-19 22:34:49 CST<span class="p">;</span> 1min 14s ago
</span></span><span class="line"><span class="cl">  Process: <span class="m">5916</span> <span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/incrond <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span>0/SUCCESS<span class="o">)</span>
</span></span><span class="line"><span class="cl"> Main PID: <span class="m">5917</span> <span class="o">(</span>incrond<span class="o">)</span>
</span></span><span class="line"><span class="cl">   CGroup: /system.slice/incrond.service
</span></span><span class="line"><span class="cl">           └─5917 /usr/sbin/incrond</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>测试：修改、删除、添加监控对象，观察日志</li>
</ol>
<div class="highlight" id="id-28"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># tail /var/log/cron</span>
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:01:01 localhost run-parts<span class="o">(</span>/etc/cron.hourly<span class="o">)[</span>2596<span class="o">]</span>: finished 0anacron
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:34:49 localhost incrond<span class="o">[</span>5916<span class="o">]</span>: starting service <span class="o">(</span>version 0.5.12, built on Mar <span class="m">18</span> <span class="m">2019</span> 17:56:43<span class="o">)</span>
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:34:49 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: loading system tables
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:34:49 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: loading user tables
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:34:49 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: loading table <span class="k">for</span> user root
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:34:49 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: ready to process filesystem events
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:38:10 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: PATH <span class="o">(</span>/data/posts/hugo<span class="o">)</span> FILE <span class="o">(</span>hugo.md<span class="o">)</span> EVENT <span class="o">(</span>IN_DELETE<span class="o">)</span>
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:38:10 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: <span class="o">(</span>root<span class="o">)</span> CMD <span class="o">(</span><span class="nb">cd</span> /usr/local/nginx/FixIt/ <span class="o">&amp;&amp;</span> rm -rf public <span class="o">&amp;&amp;</span> hugo<span class="o">)</span>
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:38:10 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: PATH <span class="o">(</span>/data/posts/hugo<span class="o">)</span> FILE <span class="o">(</span>hugo.md<span class="o">)</span> EVENT <span class="o">(</span>IN_MOVED_TO<span class="o">)</span>
</span></span><span class="line"><span class="cl">Jul <span class="m">19</span> 22:38:10 localhost incrond<span class="o">[</span>5917<span class="o">]</span>: <span class="o">(</span>root<span class="o">)</span> CMD <span class="o">(</span><span class="nb">cd</span> /usr/local/nginx/FixIt/ <span class="o">&amp;&amp;</span> rm -rf public <span class="o">&amp;&amp;</span> hugo<span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="配置-artalk-评论" class="heading-element">
  <a href="#%e9%85%8d%e7%bd%ae-artalk-%e8%af%84%e8%ae%ba" class="heading-mark"></a>配置 Artalk 评论</h1><h2 id="使用docker容器创建artalk" class="heading-element">
  <a href="#%e4%bd%bf%e7%94%a8docker%e5%ae%b9%e5%99%a8%e5%88%9b%e5%bb%baartalk" class="heading-mark"></a>使用<code>docker</code>容器创建<code>artalk</code></h2><ol>
<li>生成配置文件</li>
</ol>
<div class="highlight" id="id-29"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 当前目录</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ArtalkData<span class="o">]</span><span class="c1"># pwd</span>
</span></span><span class="line"><span class="cl">/data/ArtalkData
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 生成配置文件</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ArtalkData<span class="o">]</span><span class="c1"># docker run -it -v  /data/ArtalkData:/data --rm artalk/artalk-go gen config data/artalk-go.yml</span>
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>0000<span class="o">]</span> 创建文件: /data/artalk-go.yml                    
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ArtalkData<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">artalk-go.yml</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>生成密码，<code>artalk</code>配置文件能用上</li>
</ol>
<div class="highlight" id="id-30"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># bcrypt 加密方式</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># yum install -y htpasswd</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># htpasswd -bnBC 10 &#34;&#34; &#34;密码&#34; | tr -d &#39;:&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$2</span>y<span class="nv">$10$ZSJcesGd7PeNBHy05rnZ8uFIXQDmgkODX</span>.KcBgkDWuYv/7mfxWe9a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># md5 加密方式，要后面的空格与-</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># echo -n &#34;密码&#34; | md5sum </span>
</span></span><span class="line"><span class="cl">a8105204604a0b11e916f3879aae3b0b  -</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>修改配置文件</li>
</ol>
<div class="highlight" id="id-31"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ArtalkData<span class="o">]</span><span class="c1"># cat artalk-go.yml </span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># 加密密钥，随意修改</span>
</span></span><span class="line"><span class="cl">app_key: <span class="s2">&#34;OlCEAagaGMBDghhR&#34;</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">db:
</span></span><span class="line"><span class="cl">  type: <span class="s2">&#34;sqlite&#34;</span> <span class="c1"># 支持 sqlite, mysql, pgsql, mssql</span>
</span></span><span class="line"><span class="cl">  file: <span class="s2">&#34;./data/artalk-go.db&#34;</span> <span class="c1"># sqlite 数据库文件</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  使用SQLite, 注释多余的字段：</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  name: &#34;artalk&#34;     # 数据库名</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  host: &#34;localhost&#34;  # 地址</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  port: &#34;3306&#34;       # 端口</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  user: &#34;root&#34;       # 账号</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  password: &#34;&#34;       # 密码</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  charset: &#34;utf8mb4&#34; # 编码格式</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  table_prefix: &#34;&#34;   # 表前缀 (例如：&#34;atk_&#34;)</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># 可信域名，网页绑定的主机名或IP地址</span>
</span></span><span class="line"><span class="cl">trusted_domains:
</span></span><span class="line"><span class="cl">  - http://12.12.246.17:8023
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># 默认站点名，artalk使用单站点时使用该配置</span>
</span></span><span class="line"><span class="cl">site_default: <span class="s2">&#34;测试artalk&#34;</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># 管理员账户</span>
</span></span><span class="line"><span class="cl">admin_users:
</span></span><span class="line"><span class="cl">  - name: <span class="s2">&#34;admin&#34;</span>
</span></span><span class="line"><span class="cl">    email: <span class="s2">&#34;admin@example.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    password: &#34;&#34; # 密码支持 bcrypt 或 md5 加密，例如填写：&#34;(md5)50c2...</span>
</span></span><span class="line"><span class="cl">    password: <span class="s2">&#34;(bcrypt)</span><span class="nv">$2</span><span class="s2">y</span><span class="nv">$10$oEw8wmUv</span><span class="s2">...
</span></span></span><span class="line"><span class="cl"><span class="s2">    badge_name: &#34;</span>管理员<span class="s2">&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    badge_color: &#34;</span><span class="c1">#FF6C00&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 评论审核</span>
</span></span><span class="line"><span class="cl">moderator:
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">  keywords:
</span></span><span class="line"><span class="cl">    enabled: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">    pending: <span class="nb">true</span> <span class="c1"># 匹配成功设为待审状态</span>
</span></span><span class="line"><span class="cl">    files:         <span class="c1"># 支持多个词库文件</span>
</span></span><span class="line"><span class="cl">      - <span class="s2">&#34;./data/黑名单词库1.txt&#34;</span>
</span></span><span class="line"><span class="cl">    file_sep: <span class="s2">&#34;\n&#34;</span> <span class="c1"># 词库文件内容分割符</span>
</span></span><span class="line"><span class="cl">    replac_to: <span class="s2">&#34;x&#34;</span> <span class="c1"># 替换字符</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># 验证码</span>
</span></span><span class="line"><span class="cl">captcha:
</span></span><span class="line"><span class="cl">  enabled: <span class="nb">true</span>    <span class="c1"># 总开关</span>
</span></span><span class="line"><span class="cl">  always: <span class="nb">true</span>    <span class="c1"># 总是需要验证码</span>
</span></span><span class="line"><span class="cl">...</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>生成评论审核过滤词库</li>
</ol>
<div class="highlight" id="id-32"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ArtalkData<span class="o">]</span><span class="c1"># echo &#39;妈&#39; &gt;黑名单词库1.txt</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>运行 docker 容器</li>
</ol>
<div class="highlight" id="id-33"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># docker run -it -v /data/ArtalkData:/data -p 12.12.246.17:23366:23366 -d --name artalk-go-SQLite artalk/artalk-go </span>
</span></span><span class="line"><span class="cl">ab6004885c9ba988b48498ad332529a6fd164c727da313c885f1d6a3ab328c69
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># docker container ls</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE              COMMAND                  CREATED              STATUS              PORTS                             NAMES
</span></span><span class="line"><span class="cl">ab6004885c9b   artalk/artalk-go   <span class="s2">&#34;/entrypoint.sh serv…&#34;</span>   About a minute ago   Up About a minute   12.12.246.17:23366-&gt;23366/tcp   artalk-go-SQLite
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 检测</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># nc -zw 5 12.12.246.17 23366 &amp;&amp; echo $?</span>
</span></span><span class="line"><span class="cl"><span class="m">0</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="7">
<li>防火墙放行端口</li>
</ol>
<div class="highlight" id="id-34"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># firewall-cmd --add-rich-rule=&#39;rule family=&#34;ipv4&#34; destination address=&#34;12.12.246.17&#34; port port=&#34;23366&#34; protocol=&#34;tcp&#34; accept&#39;</span>
</span></span><span class="line"><span class="cl">success
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 写入防火墙配置文件</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># firewall-cmd --runtime-to-permanent</span>
</span></span><span class="line"><span class="cl">success</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改hugo配置文件" class="heading-element">
  <a href="#%e4%bf%ae%e6%94%b9hugo%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="heading-mark"></a>修改<code>hugo</code>配置文件</h2><div class="highlight" id="id-35"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># artalk 相关部分</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">comment</span><span class="p">:</span><span class="w">            </span><span class="c"># FixIt 更改 | 0.2.15 评论系统设置,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#      enable: false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">artalk</span><span class="p">:</span><span class="w"> </span><span class="c"># FixIt 新增 | 0.2.13 Artalk 评论系统设置 (https://artalk.js.org/)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="c"># artalk前端配置：https://artalk.js.org/guide/frontend/config.html#前端配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#        enable: false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;http://12.12.246.17:23366&#34;</span><span class="w"> </span><span class="c"># artalk 地址</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">site</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;测试artalk&#34;</span><span class="w">  </span><span class="c"># 与 artalk 配置站点名相同</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">editorTravel</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">flatMode</span><span class="p">:</span><span class="w"> </span><span class="l">auto</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">maxNesting</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">  </span><span class="c"># 评论「层级嵌套」模式的最大嵌套层数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">lightgallery</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">noComment</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="w">  </span><span class="c"># 评论为空时显示字符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">vote</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">    </span><span class="c"># 启用评论投票功能 (赞同 / 反对)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uaBadge</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># 显示用户的 UserAgent 信息徽标(浏览器与系统标识)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">listSort</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># 鼠标移到评论列表左上角「n 条评论」的位置，显示悬浮下拉层，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="c">#   可以指定评论排序方式</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">placeholder</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;在这里输入内容&#34;</span><span class="w"> </span><span class="c"># 评论框占位字符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">locale</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;zh-CN&#34;</span><span class="w">     </span><span class="c"># artalk 显示默认语言</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sendBtn</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;发送评论&#34;</span><span class="w"> </span><span class="c"># 发送按钮文字</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">pagination</span><span class="p">:</span><span class="w">     </span><span class="c"># 评论分页</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">readMore: true # 加载更多模式</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="l">(加载更多) or false(分页条)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">autoLoad</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># “加载更多”模式下滚动到底部自动加载</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">pageSize</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">  </span><span class="c"># 每次请求获取数量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">heightLimit</span><span class="p">:</span><span class="w">    </span><span class="c"># 超过设定高度的内容将被隐藏，并显示“阅读更多”按钮</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="m">300</span><span class="w">  </span><span class="c"># 评论内容限高。当值为 0 时，关闭限高</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">children</span><span class="p">:</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="c"># 子评论区域限高</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="我的网站配置" class="heading-element">
  <a href="#%e6%88%91%e7%9a%84%e7%bd%91%e7%ab%99%e9%85%8d%e7%bd%ae" class="heading-mark"></a>我的网站配置</h1><p><code>nginx</code> 配置</p>
<div class="highlight" id="id-36"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">log_format</span> <span class="s">note</span> <span class="s">escape=json</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;</span><span class="p">{</span> <span class="kn">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;responseTime&#34;:</span> <span class="s">&#34;</span><span class="nv">$time_iso8601&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestIP&#34;:</span> <span class="s">&#34;</span><span class="nv">$remote_addr&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestPort&#34;:</span> <span class="s">&#34;</span><span class="nv">$remote_port&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestScheme&#34;:</span> <span class="s">&#34;</span><span class="nv">$scheme&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestProtocol&#34;:</span> <span class="s">&#34;</span><span class="nv">$server_protocol&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestMethod&#34;:</span> <span class="s">&#34;</span><span class="nv">$request_method&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestDomainName&#34;:</span> <span class="s">&#34;</span><span class="nv">$host&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;requestUri&#34;:</span> <span class="s">&#34;</span><span class="nv">$request_uri&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;responseUrl&#34;:</span> <span class="s">&#34;</span><span class="nv">$uri&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;responseIP&#34;:</span> <span class="s">&#34;</span><span class="nv">$server_addr&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;responseport&#34;:</span> <span class="s">&#34;</span><span class="nv">$server_port&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;responseStatus&#34;:</span> <span class="s">&#34;</span><span class="nv">$status&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;\&#34;responseSize\&#34;:</span> <span class="s">&#34;</span> <span class="s">&#34;\&#34;</span><span class="nv">$bytes_sent&#34;</span> <span class="s">&#39;B\&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;\&#34;responseBodySize\&#34;:</span> <span class="s">&#34;</span> <span class="s">&#34;\&#34;</span><span class="nv">$body_bytes_sent&#34;</span> <span class="s">&#34;B\&#34;,&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;\&#34;processingConsumeTime\&#34;:</span> <span class="s">&#34;</span> <span class="s">&#34;\&#34;</span><span class="nv">$request_time&#34;</span> <span class="s">&#34;s\&#34;,&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;&#34;processingStatus&#34;:</span>  <span class="s">&#34;</span><span class="nv">$request_completion&#34;,&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#39;</span><span class="err">}</span><span class="s">&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span>  <span class="s">note.xiaosi.host</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 443 端口加上 ssl 参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">listen</span>       <span class="n">103.106.246.17</span><span class="p">:</span><span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span>       <span class="n">103.106.246.17</span><span class="p">:</span><span class="mi">80</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 证书公钥路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">ssl_certificate</span> <span class="s">/etc/letsencrypt/live/note.xiaosi.host/fullchain.pem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 证书私钥路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">ssl_certificate_key</span> <span class="s">/etc/letsencrypt/live/note.xiaosi.host/privkey.pem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 把 http 协议通过 301 跳转到 https 协议
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">if</span> <span class="s">(</span><span class="nv">$scheme</span> <span class="s">!=</span> <span class="s">&#34;https&#34;)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$host$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 指定日志记录位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">error_log</span> <span class="s">logs/note.xiaosi.host.nginx.error.log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">access_log</span> <span class="s">logs/note.xiaosi.host.nginx.access.log</span> <span class="s">note</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 重写资源路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">rewrite</span> <span class="s">([^imgs]\/)(.*\.(gif|jpg|jpeg|png|bmp|swf|webp|sh|vim)</span>$<span class="s">)</span> <span class="s">/download/</span><span class="nv">$2</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 设置浏览器缓存时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kn">expires</span> <span class="s">1d</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">root</span> <span class="s">note</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.xml</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="允许-url-使用大写字母" class="heading-element">
  <a href="#%e5%85%81%e8%ae%b8-url-%e4%bd%bf%e7%94%a8%e5%a4%a7%e5%86%99%e5%ad%97%e6%af%8d" class="heading-mark"></a>允许 URL 使用大写字母</h1><div class="highlight" id="id-37"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">disablePathToLower</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># URL禁止转换为小写</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="通过定时任务发布" class="heading-element">
  <a href="#%e9%80%9a%e8%bf%87%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1%e5%8f%91%e5%b8%83" class="heading-mark"></a>通过定时任务发布</h1><ol>
<li>
<p>创建脚本，以获得最新的文档</p>
<div class="highlight" id="id-38"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># cat /data/hugo/noteUpdate.sh</span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="nv">hugoConfig</span><span class="o">=</span>/data/hugo/hugoThemeFixItv0.3.1.config.yaml
</span></span><span class="line"><span class="cl"><span class="nv">webDir</span><span class="o">=</span>/usr/local/nginx/note/
</span></span><span class="line"><span class="cl"><span class="nv">hugoDir</span><span class="o">=</span>/data/hugo/
</span></span><span class="line"><span class="cl"><span class="nv">noteDir</span><span class="o">=</span>/data/hugo/content/posts/
</span></span><span class="line"><span class="cl"><span class="nv">noteFiles</span><span class="o">=</span>/data/hugo/content/posts/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> <span class="si">${</span><span class="nv">noteDir</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">git pull origin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> <span class="si">${</span><span class="nv">hugoDir</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">rm -rf <span class="si">${</span><span class="nv">webDir</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">hugo --config <span class="si">${</span><span class="nv">hugoConfig</span><span class="si">}</span> -d <span class="si">${</span><span class="nv">webDir</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除多余文件</span>
</span></span><span class="line"><span class="cl">find <span class="si">${</span><span class="nv">webDir</span><span class="si">}</span>posts/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -mindepth <span class="m">1</span> -maxdepth <span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -type d -a  -not -name <span class="s1">&#39;page&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -exec rm -rf <span class="o">{}</span> <span class="se">\;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 由于我的文档结构没有按hugo官方要求</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 要手动复制文件到资源目标地址，避免出现 404</span>
</span></span><span class="line"><span class="cl"><span class="nv">fileList</span><span class="o">=</span><span class="k">$(</span>find <span class="si">${</span><span class="nv">noteFiles</span><span class="si">}</span> -name <span class="s2">&#34;*.md&#34;</span> -and -type f <span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> fileName in <span class="si">${</span><span class="nv">fileList</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nv">fileSlug</span><span class="o">=</span><span class="k">$(</span>sed -n <span class="s1">&#39;2,/---/ {/slug/ {s/.*&#34;\(.*\)&#34;/\1/; p; } }&#39;</span> <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[[</span> -z <span class="si">${</span><span class="nv">fileSlug</span><span class="si">}</span> <span class="o">]]</span><span class="p">;</span><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;该文件没有slug前缀：</span><span class="si">${</span><span class="nv">fileName</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nv">attachmentList</span><span class="o">=</span><span class="k">$(</span>sed -n <span class="s1">&#39;/&lt;!--start of attachment line--&gt;/,/&lt;!--End of attachment line--&gt;/{ /\]:/ {s/.*://; p;} }&#39;</span> <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[[</span> -z <span class="si">${</span><span class="nv">attachmentList</span><span class="si">}</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">for</span> cpFile in <span class="si">${</span><span class="nv">attachmentList</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">      <span class="nv">dir</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>dirname <span class="si">${</span><span class="nv">fileName</span><span class="si">}</span><span class="k">)</span><span class="s2">/</span><span class="si">${</span><span class="nv">cpFile</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">      cp <span class="si">${</span><span class="nv">dir</span><span class="si">}</span> <span class="si">${</span><span class="nv">webDir</span><span class="si">}${</span><span class="nv">fileSlug</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>创建 <code>service</code> 单元执行脚本</p>
<div class="highlight" id="id-39"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1"># cat /usr/lib/systemd/system/noteUpdate.service</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>更新 note
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>simple
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/bin/bash /data/hugo/noteUpdate.sh
</span></span><span class="line"><span class="cl"><span class="nv">RestartSec</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">Restart</span><span class="o">=</span>on-failure
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>创建定时单元</p>
<div class="highlight" id="id-40"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1"># cat noteUpdate.timer</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>每30小时更新note
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Timer<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">OnBootSec</span><span class="o">=</span>10min
</span></span><span class="line"><span class="cl"><span class="nv">OnUnitActiveSec</span><span class="o">=</span>30h
</span></span><span class="line"><span class="cl"><span class="nv">Unit</span><span class="o">=</span>noteUpdate.service
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>default.target</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>加载<code>systemd</code> 配置并启动</p>
<div class="highlight" id="id-41"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1"># systemctl daemon-reload</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1"># systemctl start noteUpdate.timer</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1"># systemctl status noteUpdate.timer</span>
</span></span><span class="line"><span class="cl">● noteUpdate.timer - 每30小时更新note
</span></span><span class="line"><span class="cl">   Loaded: loaded <span class="o">(</span>/usr/lib/systemd/system/noteUpdate.timer<span class="p">;</span> disabled<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">   Active: active <span class="o">(</span>running<span class="o">)</span> since Sun 2024-01-28 15:18:02 CST<span class="p">;</span> 9s ago
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Jan <span class="m">28</span> 15:18:02 localhost.localdomain systemd<span class="o">[</span>1<span class="o">]</span>: Started 每30小时更新note.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost system<span class="o">]</span><span class="c1"># systemctl enable noteUpdate.timer</span>
</span></span><span class="line"><span class="cl">Created symlink from /etc/systemd/system/default.target.wants/noteUpdate.timer to /usr/lib/systemd/system/noteUpdate.timer.</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2024-01-29 17:36:27">更新于 2024-01-29&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/hugo/" class="post-tag" title="标签 - hugo">hugo</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/goQuestion/" class="post-nav-item" rel="prev" title="Go每日一题"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Go每日一题</a>
      <a href="/%E8%A1%97%E9%9C%B85/" class="post-nav-item" rel="next" title="街霸 5">街霸 5<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content always-active" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.115.3"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.1"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="/lib/pace/themes/blue/pace-theme-minimal.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/lightgallery/lightgallery.min.js" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js" defer></script><script src="/lib/pangu/pangu.min.js" defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"lightgallery":true,"pangu":{"enable":true,"selector":"article"},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":true,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
