<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Amazon CloudWatch - Amazon CloudWatch 可实时监控您的亚马逊云科技 (AWS) 资源以及您在 AWS 上运行的应用程序。 - 小厮</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="xiaosi" /><meta name="keywords" content='aws, CloudWatch' /><meta itemprop="name" content="Amazon CloudWatch - Amazon CloudWatch 可实时监控您的亚马逊云科技 (AWS) 资源以及您在 AWS 上运行的应用程序。">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2024-02-22T15:12:30+08:00" />
<meta itemprop="dateModified" content="2024-02-25T20:24:24+08:00" />
<meta itemprop="wordCount" content="5279">
<meta itemprop="keywords" content="aws,CloudWatch," /><meta property="og:title" content="Amazon CloudWatch - Amazon CloudWatch 可实时监控您的亚马逊云科技 (AWS) 资源以及您在 AWS 上运行的应用程序。" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/awsCloudWatchMetric/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-22T15:12:30+08:00" />
<meta property="article:modified_time" content="2024-02-25T20:24:24+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Amazon CloudWatch - Amazon CloudWatch 可实时监控您的亚马逊云科技 (AWS) 资源以及您在 AWS 上运行的应用程序。"/>
<meta name="twitter:description" content=""/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#ffffff" data-dark="#252627" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="/awsCloudWatchMetric/" /><link rel="prev" href="/mailx/" /><link rel="next" href="/eksPrometheus/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Amazon CloudWatch - Amazon CloudWatch 可实时监控您的亚马逊云科技 (AWS) 资源以及您在 AWS 上运行的应用程序。",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "\/awsCloudWatchMetric\/"
    },"genre": "posts","keywords": "aws, CloudWatch","wordcount":  5279 ,
    "url": "\/awsCloudWatchMetric\/","datePublished": "2024-02-22T15:12:30+08:00","dateModified": "2024-02-25T20:24:24+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "小厮"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="wide"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="小厮"><span class="header-title-text">首页</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class='fa-solid fa-archive fa-fw fa-sm'></i> 所有文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="小厮"><span class="header-title-text">首页</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class='fa-solid fa-archive fa-fw fa-sm'></i> 所有文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container container-reverse"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Amazon CloudWatch - Amazon CloudWatch 可实时监控您的亚马逊云科技 (AWS) 资源以及您在 AWS 上运行的应用程序。</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      小厮</span></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/aws/" class="post-category" title="分类 - aws"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> aws</a></span></div><div class="post-meta-line"><span title="发布于 2024-02-22 15:12:30"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2024-02-22">2024-02-22</time></span>&nbsp;<span title="更新于 2024-02-25 20:24:24"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden="true"></i><time datetime="2024-02-25">2024-02-25</time></span>&nbsp;<span title="5279 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 5300 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 11 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#指标">指标</a></li>
    <li><a href="#使用-cloudwatch-metrics-insights-查询指标">使用 CloudWatch Metrics Insights 查询指标</a></li>
    <li><a href="#搜索表达式">搜索表达式</a>
      <ul>
        <li><a href="#指标架构">指标架构</a></li>
        <li><a href="#搜索字符串">搜索字符串</a></li>
        <li><a href="#限制搜索对象">限制搜索对象</a></li>
        <li><a href="#布尔运算符">布尔运算符</a></li>
      </ul>
    </li>
    <li><a href="#仪表盘">仪表盘</a></li>
    <li><a href="#ec2-linux实例指标">EC2 linux实例指标</a>
      <ul>
        <li><a href="#cloudwatch-agent">CloudWatch agent</a></li>
        <li><a href="#在ec2中运行-cloudwatch-agent">在EC2中运行 CloudWatch agent</a></li>
        <li><a href="#cloudwatch-代理配置文件">CloudWatch 代理配置文件</a>
          <ul>
            <li><a href="#使用二进制文件生成配置文件">使用二进制文件生成配置文件</a></li>
            <li><a href="#运行-cloudwatch-代理">运行 CloudWatch 代理</a></li>
          </ul>
        </li>
        <li><a href="#cloudwatch-agent-收集的指标">CloudWatch agent 收集的指标</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><!-- FileID: FID -->
<blockquote>
<p>运行环境：</p>
<p>内容来自以下文档：</p>
<ul>
<li><a href="https://docs.aws.amazon.com/zh_cn/AmazonCloudWatch/latest/monitoring/Install-CloudWatch-Agent.html"target="_blank" rel="external nofollow noopener noreferrer"><code>Amazon CloudWatch 用户指南：</code>使用 CloudWatch 代理收集指标、日志和跟踪信息</a></li>
<li><a href="https://docs.aws.amazon.com/zh_cn/AmazonCloudWatch/latest/monitoring/aws-services-cloudwatch-metrics.html"target="_blank" rel="external nofollow noopener noreferrer"><code>Amazon CloudWatch 用户指南：</code>发布 CloudWatch 指标的 AWS 服务</a></li>
<li><a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html"target="_blank" rel="external nofollow noopener noreferrer"><code>Amazon EC2用户指南（适用于 Linux 实例）：</code>列出实例的可用 CloudWatch 指标</a></li>
</ul>
</blockquote>
<!--start of attachment line-->
<!--End of attachment line-->
<h1 id="指标" class="heading-element">
  <a href="#%e6%8c%87%e6%a0%87" class="heading-mark"></a>指标</h1><p>指标仅存在于创建它们的区域中。指标无法删除，但如果在 <code>15</code> 个月后没有向指标发布新数据，这些指标将自动过期。依据滚动机制，<code>15</code> 个月之前的数据点将过期；当新的数据点进入时，<code>15</code> 个月之前的数据将被丢弃。指标是通过一个名称、一个命名空间以及零个或多个维度进行唯一定义的。指标中的每个数据点都有一个时间戳和一个度量单位（可选）。您可以从 <code>CloudWatch</code> 中检索任何指标的统计数据。</p>
<p><code>CloudWatch</code> 将保留指标数据，如下所示：</p>
<ul>
<li>时间段短于 <code>60</code> 秒的数据点的可用时间为 <code>3</code> 小时。这些数据点是高精度自定义指标。</li>
<li>时间段为 <code>60</code> 秒 (<code>1</code> 分钟) 的数据点可用 <code>15</code> 天</li>
<li>时间段为 <code>300</code> 秒（<code>5</code> 分钟）的数据点可用 <code>63</code> 天</li>
<li>时间段为 <code>3600</code> 秒 (<code>1</code> 小时) 的数据点可用 <code>455</code> 天 (<code>15</code> 个月)</li>
</ul>
<p>最初以较短时间段发布的数据点汇总在一起，可实现长期存储。例如，如果您使用 <code>1</code> 分钟的时间段收集数据，数据以 <code>1</code> 分钟的精度保持 <code>15</code> 天可用。<code>15</code> 天之后，此数据仍可用，但汇总在一起，只能以 <code>5</code> 分钟的精度检索。<code>63</code> 天之后，数据进一步汇总，以 <code>1</code> 小时的精度提供。</p>
<p>控制台中不会显示在过去两周内没有任何新数据点的指标。当您在控制台的 <code>All metrics</code>（全部指标）选项卡的搜索框中键入指标名称或维度名称时，它们也不会显示，并且 <code>list-metrics</code> 命令的结果中不会返回它们。检索这些指标的最佳方法是使用 <code>AWS CLI</code> 中的 <code>get-metric-data</code> 或者 <code>get-metric-statistics</code> 命令。</p>
<h1 id="使用-cloudwatch-metrics-insights-查询指标" class="heading-element">
  <a href="#%e4%bd%bf%e7%94%a8-cloudwatch-metrics-insights-%e6%9f%a5%e8%af%a2%e6%8c%87%e6%a0%87" class="heading-mark"></a>使用 CloudWatch Metrics Insights 查询指标</h1><p><code>CloudWatch Metrics Insights</code> 是一个功能强大的高性能 <code>SQL</code> 查询引擎，可以使用它来大规模查询指标，有以下限制：</p>
<ul>
<li>只能查询最近三个小时的数据</li>
<li>单个查询可处理的指标不超过 <code>10,000</code> 个。这意味着，如果 <code>SELECT</code>、<code>FROM</code> 和 <code>WHERE</code> 子句匹配 <code>10,000</code> 个以上的指标，查询只处理找到的前 <code>10,000</code> 个指标。</li>
<li>单个查询可返回的时间序列不超过 <code>500</code> 个。这意味着，如果查询返回 <code>500</code> 个以上的指标，则查询结果中并非所有指标都将返回。如果您使用的是 <code>ORDER BY</code> 子句，则将对正在处理的所有指标进行排序，并根据您的 <code>ORDER BY</code> 子句，具有前 <code>500</code> 个最高值或最低值的指标将返回。</li>
<li>每个区域最多可以有 <code>75</code> 个 <code>Metrics Insights</code> 告警。</li>
<li><code>Metrics Insights</code> 不支持低于一分钟的指标，低于一分钟的指标会以一分钟聚合</li>
<li>每个 <code>GetMetricData</code> 操作只能有一个查询，但是您可以在控制面板中有多个小组件，每个小组件都包含一个查询</li>
</ul>
<p><code>CloudWatch Metrics Insights</code> 语法如下</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SELECT FUNCTION<span class="o">(</span>metricName<span class="o">)</span>
</span></span><span class="line"><span class="cl">FROM namespace <span class="p">|</span> SCHEMA<span class="o">(</span>...<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> WHERE labelKey OPERATOR labelValue <span class="o">[</span>AND ... <span class="o">]</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> GROUP BY labelKey <span class="o">[</span> , ... <span class="o">]</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> ORDER BY FUNCTION<span class="o">()</span> <span class="o">[</span> DESC <span class="p">|</span> ASC <span class="o">]</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> LIMIT number <span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>FUNCTION</code> 的有效值为:</p>
<ul>
<li><code>AVG</code> 计算查询匹配的观测值的平均值。</li>
<li><code>COUNT</code> 返回查询匹配的观测值的计数。</li>
<li><code>MAX</code> 返回查询匹配的观测值的最大值。</li>
<li><code>MIN</code> 返回查询匹配的观测值的最小值。</li>
<li><code>SUM</code> 计算查询匹配的观测值的总和。</li>
</ul>
<p><code>FROM</code> 是必选的，有以下用法</p>
<ul>
<li><code>FROM 指标命名空间</code>: 该方式返回所有指标</li>
<li><code>FROM SCHEMA(&quot;指标命名空间&quot;,[指标维度1,指标维度2,...)</code>: 通过指标维度筛选</li>
</ul>
<p><code>WHERE</code> 可通过指标值筛选，标签值必须始终放在单引号中。支持以下运算符：</p>
<ul>
<li><code>=</code> 值相等</li>
<li><code>!=</code> 值不相等</li>
<li><code>AND</code> 前后条件相等，可以使用多个<code>AND</code></li>
</ul>
<p><code>GROUP BY</code>: 结果分组依据</p>
<p><code>ORDER BY</code>子句可以根据使用的有效函数 <code>AVG()、COUNT()、MAX()、MIN() 和 SUM()</code>返回什值进行升序（<code>ASC</code>也是默认值） 或降序（<code>DESC</code>）</p>
<p><code>LIMIT</code> 将限制返回序列最大数量</p>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;{AWS/EC2,InstanceId} MetricName=&#34;CPUUtilization&#34;&#39;</span>, <span class="s1">&#39;Average&#39;</span>, 300<span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="搜索表达式" class="heading-element">
  <a href="#%e6%90%9c%e7%b4%a2%e8%a1%a8%e8%be%be%e5%bc%8f" class="heading-mark"></a>搜索表达式</h1><p>搜索表达式可让您快速向图表添加多个相关指标。它们还使您能够创建动态图表，从而自动将相应的指标添加到其显示中，即使您在第一次创建图表时不存在这些指标也是如此。例如，您可以创建一个搜索表达式来显示区域中所有实例的 <code>AWS/EC2 CPUUtilization</code> 指标。如果您稍后启动新实例，则新实例的 <code>CPUUtilization</code> 会自动添加到图表中。</p>
<p>被搜索对象有：命名空间、指标名名称、指标值、指标维度</p>
<p>搜索表达式有以下限制：</p>
<ul>
<li>只能找到在过去两周内的指标</li>
<li>由于搜索表达式可返回多个时间序列，因此无法根据创建告警</li>
<li>最大搜索表达式查询大小为 <code>1024</code> 个字符。一个图表上最多可以包含 <code>100</code> 个搜索表达式。一个图表可以显示多达 <code>500</code> 个时间序列。</li>
</ul>
<p>语法如下：</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; {Namespace, DimensionName1, DimensionName2, ...} SearchTerm&#39;</span>, <span class="s1">&#39;Statistic&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>DimensionName</code>: 是指标维度</li>
<li><code>SearchTerm</code>: 代指搜索条件的表达式</li>
<li><code>Statistic</code>: 代指统计方式名称，如<code>Average</code>（平均值）</li>
</ul>
<p>以下是一个示例：</p>
<div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 搜索 AWS/EC2 带有 InstanceId 维度的指标，如果指标名称是CPUUtilization，则返回平均值</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;{AWS/EC2,InstanceId} MetricName=&#34;CPUUtilization&#34;&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="指标架构" class="heading-element">
  <a href="#%e6%8c%87%e6%a0%87%e6%9e%b6%e6%9e%84" class="heading-mark"></a>指标架构</h2><p>指标架构即大括号部分是可以缺省的，缺省情况下表示所有命名空间中的搜索</p>
<div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 搜索名称为 CPUUtilization 的命名空间、指标名称、维度名称、维度值</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; &#34;CPUUtilization&#34; &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加条件，缩小范围</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; &#34;AWS/EC2&#34; AND MetricName=&#34;CPUUtilization&#34; &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="搜索字符串" class="heading-element">
  <a href="#%e6%90%9c%e7%b4%a2%e5%ad%97%e7%ac%a6%e4%b8%b2" class="heading-mark"></a>搜索字符串</h2><p>以下搜索表达示中<code>&quot;Errors&quot;</code> 中有双引号，表示精确匹配搜索对象</p>
<div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 只匹配为Errors的对象</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; &#34;Errors&#34; &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>如果 <code>SearchTerm</code> 部分指定的字符串没有双引号时，搜索词会被令牌化。<code>CloudWatch</code> 根据部分匹配项查找指标，部分匹配项是根据搜索词生成的单个令牌与根据指标名称、命名空间、维度名称或维度值生成的单个令牌的匹配项。如</p>
<div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 匹配对象中含有Errors的对象，如名为 ConnectionErrors 或 errors 的指标</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;Errors&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>搜索词令牌化即拆分搜索单词生成的字符串，大致原则如下：</p>
<ul>
<li>以驼峰式大小写区分</li>
<li>数字字符也可用作新令牌的开头</li>
<li>非字母数字字符用作分隔符</li>
<li>从而在非字母数字字符之前和之后创建令牌</li>
<li>相同类型的令牌分隔符字符的连续字符串会生成一个令牌</li>
<li>单个搜索词生成的令牌都是小写的</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">原始字符串（匹配的搜索对象）</th>
<th style="text-align:left">生成的令牌（可用于<code>SearchTerm</code> 部分指定的单词）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>CustomCount1</code></td>
<td style="text-align:left"><code>customcount1</code>, <code>custom</code>, <code>count</code>, <code>1</code>, <code>COUNT</code></td>
</tr>
<tr>
<td style="text-align:left"><code>SDBFailure</code></td>
<td style="text-align:left"><code>sdbfailure</code>, <code>sdb</code>, <code>failure</code></td>
</tr>
<tr>
<td style="text-align:left"><code>Project2-trial333</code></td>
<td style="text-align:left"><code>project2trial333</code>, <code>project</code>, <code>2</code>, <code>trial</code>, <code>333</code></td>
</tr>
</tbody>
</table>
<p>如果搜索词是复合对象，那么搜索是区分大小写的，如下面示例</p>
<div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 能匹配 CustomCount1</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;CustomCount&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 能匹配 CustomCount1</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;Count1&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 不能匹配 CustomCount1</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;customcount&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 不能匹配 CustomCount1</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;count1&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="限制搜索对象" class="heading-element">
  <a href="#%e9%99%90%e5%88%b6%e6%90%9c%e7%b4%a2%e5%af%b9%e8%b1%a1" class="heading-mark"></a>限制搜索对象</h2><ul>
<li>指定指标名示例</li>
</ul>
<div class="highlight" id="id-9"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; MetricName=&#34;CustomCount1&#34; &#39;</span>, <span class="s1">&#39;Maximum&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>指定命名空间与指标维度及其值</li>
</ul>
<div class="highlight" id="id-10"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; InstanceType=&#34;t2.micro&#34; Namespace=&#34;AWS/EC2&#34; &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="布尔运算符" class="heading-element">
  <a href="#%e5%b8%83%e5%b0%94%e8%bf%90%e7%ae%97%e7%ac%a6" class="heading-mark"></a>布尔运算符</h2><p>搜索支持在 <code>SearchTerm</code> 中使用布尔运算符 <code>AND</code>、<code>OR</code> 和 <code>NOT</code>。布尔运算符被括在用于将整个搜索词引起来的单引号中。布尔运算符必须是大写。</p>
<ul>
<li><code>AND</code>示例</li>
</ul>
<div class="highlight" id="id-11"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># AND 可以缺省</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39;{AWS/EC2,InstanceId} network AND packets&#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>NOT</code>示例</li>
</ul>
<div class="highlight" id="id-12"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 排除名为 i-1234567890123456 的对象</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; {AWS/EC2,InstanceId} MetricName=&#34;CPUUtilization&#34; NOT i-1234567890123456 &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 排除AWS命名空间</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span> <span class="s1">&#39;NOT Namespace=AWS &#39;</span>, <span class="s1">&#39;Maximum&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 排除名为 ProjectA 与 ProjectB 的对象</span>
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; {AWS/EC2,InstanceId} MetricName=&#34;CPUUtilization&#34; NOT &#34;ProjectA&#34; NOT &#34;ProjectB&#34; &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>布尔运算符支持使用括号进行分组</p>
<div class="highlight" id="id-13"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; (EC2 OR EBS) AND MetricName=ReadOps &#39;</span>, <span class="s1">&#39;Maximum&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; (EC2 OR EBS) AND ReadOps AND ProjectA &#39;</span>, <span class="s1">&#39;Maximum&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SEARCH<span class="o">(</span><span class="s1">&#39; {AWS/Lambda,FunctionName} MetricName=&#34;Errors&#34; OR (MetricName=&#34;Invocations&#34; AND (ProjectA OR ProjectB)) &#39;</span>, <span class="s1">&#39;Average&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="仪表盘" class="heading-element">
  <a href="#%e4%bb%aa%e8%a1%a8%e7%9b%98" class="heading-mark"></a>仪表盘</h1><p><code>Dashboards</code> 被翻译为控制面板，创建仪表盘后可以通前端提示或修改<code>json</code>内容创建/修改仪表盘</p>
<p>通过修改<code>json</code>文本内容步骤如下：</p>
<ol>
<li>创建或打开仪表盘</li>
<li>点击右上角操作下拉按妞，选择查看/编辑来源</li>
<li>在窗口中修改<code>json</code>内容后点击更新</li>
</ol>
<p>面板<code>josn</code>内容可查看<a href="https://docs.aws.amazon.com/zh_cn/AmazonCloudWatch/latest/APIReference/CloudWatch-Dashboard-Body-Structure.html"target="_blank" rel="external nofollow noopener noreferrer">Dashboard Body Structure and Syntax</a>，以下是部分注释</p>
<div class="highlight" id="id-14"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 仪表盘使用的变量，可选
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nt">&#34;values&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 定义仪表盘的字段，是必须的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nt">&#34;widgets&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 小仪表盘类型，必须字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// 值为之一：metric , text , log , alarm , explorer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nt">&#34;type&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 仪表盘窗口高度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// 值为：1~100
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="s2">&#34;height&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 仪表盘窗口宽度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// 值为：1~24
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="s2">&#34;width&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 仪表盘水平位置，必须字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// 值为：0~23整数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="s2">&#34;y&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 仪表盘垂直位置，必须字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// 值为：大于或等于0的整数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="s2">&#34;x&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 小仪表盘定义字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="s2">&#34;properties&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// aws 区域，必须字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;region&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 指标表达式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// [ {&#34;expression&#34; : &#34;expression&#34;, [&#34;label&#34; : &#34;label&#34;] , [&#34;id&#34; : &#34;id&#34;] } ]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// [ Namespace, MetricName, [{DimensionName,DimensionValue}...] {Rendering Properties Object} ]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;metrics&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">[</span><span class="err">....</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 数据点时间周期，单位为秒
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 值为：60或60的倍数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;period&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 指标统计信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 值为：SampleCount , Average , Sum , Minimum , Maximum
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;stat&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 仪表盘标题 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;title&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 是否显示实时数据，立即显示最新数据点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 值为：true 或 false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;liveData&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 图像出现位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;legend&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// 值为：right, bottom, hidden
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nt">&#34;position&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 图形形状：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 值为之一：timeSeries(线形图或) , singleValue(数字) , gauge , bar , pie , taule
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;view&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 是否将线形图改为堆叠面积图
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 值为：true 或 false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;stacked&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>其中<code>@.widgets.properties.metrics</code> 字段说明：</p>
<ul>
<li>
<div class="highlight" id="id-15"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 指标命名空间,指标名称, 可选的指标维度与值，{度量属性}</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> Namespace, MetricName, <span class="o">[{</span>DimensionName,DimensionValue<span class="o">}</span>...<span class="o">]</span> <span class="o">{</span>Rendering Properties Object<span class="o">}</span> <span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>Rendering Properties Object</code>: 是度量（每条查询）属性，即当前指标展示属性，会覆盖小仪表盘的值（<code>@.widgets.properties</code>）。如：
<ul>
<li><code>stat</code>: 统计方式</li>
<li><code>yAxis</code>: 图表单位展示位置，默认为<code>left</code>（左），可以指定为<code>right</code>（右）</li>
<li><code>clolr</code>: <code>html</code>图表展示的颜色</li>
<li><code>label</code>: <code>html</code>图表展示该指标显示的标签名，用于区分查询语句</li>
<li><code>period</code>: 时间颗粒度，为<code>60</code>或<code>60</code>的倍数，单位为秒</li>
<li><code>visible</code>: 是否在<code>html</code>图表中展示</li>
<li><code>id</code>: 此查询语句<code>ID</code></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="highlight" id="id-16"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># expression 为表达示：数学表达式、Metrics Insights，搜索表达式</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> <span class="o">{</span><span class="s2">&#34;expression&#34;</span> : <span class="s2">&#34;expression&#34;</span>, <span class="o">[</span><span class="s2">&#34;label&#34;</span> : <span class="s2">&#34;label&#34;</span><span class="o">]</span> , <span class="o">[</span><span class="s2">&#34;id&#34;</span> : <span class="s2">&#34;id&#34;</span><span class="o">]</span> <span class="o">}</span> <span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>示例：</p>
<div class="highlight" id="id-17"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 命名空间：CWAgent, 指标：cpu_usage_idle, 后面是维度与值, {...} </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> <span class="s2">&#34;CWAgent&#34;</span>, <span class="s2">&#34;cpu_usage_idle&#34;</span>, <span class="s2">&#34;InstanceId&#34;</span>, <span class="s2">&#34;i-0cdd956cd0af2408e&#34;</span>, <span class="s2">&#34;ImageId&#34;</span>, <span class="s2">&#34;ami-08a2628fc1b0020bf&#34;</span>, <span class="s2">&#34;cpu&#34;</span>, <span class="s2">&#34;cpu3&#34;</span>, <span class="s2">&#34;InstanceType&#34;</span>, <span class="s2">&#34;c5a.xlarge&#34;</span>, <span class="o">{</span> <span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;ap-southeast-1&#34;</span>, <span class="s2">&#34;id&#34;</span>: <span class="s2">&#34;m1&#34;</span>, <span class="s2">&#34;visible&#34;</span>: <span class="nb">false</span> <span class="o">}</span> <span class="o">]</span>,
</span></span><span class="line"><span class="cl"><span class="c1"># 一个点.表示引用上层，但不含展示属性部分</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 三个点.表示引用上层，但为贪婪匹配</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> <span class="s2">&#34;...&#34;</span>, <span class="s2">&#34;cpu0&#34;</span>, <span class="s2">&#34;.&#34;</span>, <span class="s2">&#34;.&#34;</span>, <span class="o">{</span> <span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;ap-southeast-1&#34;</span>, <span class="s2">&#34;id&#34;</span>: <span class="s2">&#34;m2&#34;</span>, <span class="s2">&#34;visible&#34;</span>: <span class="nb">false</span> <span class="o">}</span> <span class="o">]</span>,
</span></span><span class="line"><span class="cl"><span class="o">[</span> <span class="s2">&#34;...&#34;</span>, <span class="s2">&#34;cpu2&#34;</span>, <span class="s2">&#34;.&#34;</span>, <span class="s2">&#34;.&#34;</span>, <span class="o">{</span> <span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;ap-southeast-1&#34;</span>, <span class="s2">&#34;id&#34;</span>: <span class="s2">&#34;m3&#34;</span>, <span class="s2">&#34;visible&#34;</span>: <span class="nb">false</span> <span class="o">}</span> <span class="o">]</span>,
</span></span><span class="line"><span class="cl"><span class="o">[</span> <span class="s2">&#34;...&#34;</span>, <span class="s2">&#34;cpu1&#34;</span>, <span class="s2">&#34;.&#34;</span>, <span class="s2">&#34;.&#34;</span>, <span class="o">{</span> <span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;ap-southeast-1&#34;</span>, <span class="s2">&#34;id&#34;</span>: <span class="s2">&#34;m4&#34;</span>, <span class="s2">&#34;visible&#34;</span>: <span class="nb">false</span> <span class="o">}</span> <span class="o">]</span>,
</span></span><span class="line"><span class="cl"><span class="c1"># expression 后面接的是表达示</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> <span class="o">{</span> <span class="s2">&#34;expression&#34;</span>: <span class="s2">&#34;100-(m1+m2+m3+m4)/4&#34;</span>, <span class="s2">&#34;label&#34;</span>: <span class="s2">&#34;表达式1&#34;</span>, <span class="s2">&#34;id&#34;</span>: <span class="s2">&#34;e1&#34;</span>, <span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;ap-southeast-1&#34;</span>, <span class="s2">&#34;stat&#34;</span>: <span class="s2">&#34;Maximum&#34;</span>, <span class="s2">&#34;color&#34;</span>: <span class="s2">&#34;#8c564b&#34;</span> <span class="o">}</span> <span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ec2-linux实例指标" class="heading-element">
  <a href="#ec2-linux%e5%ae%9e%e4%be%8b%e6%8c%87%e6%a0%87" class="heading-mark"></a>EC2 linux实例指标</h1><table>
<thead>
<tr>
<th style="text-align:left">指标名称</th>
<th style="text-align:left">单位</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>CPUUtilization</code></td>
<td style="text-align:left">百分比</td>
<td style="text-align:left">用于运行 <code>EC</code>2 实例的物理 <code>CPU</code> 时间的百分比，包括运行用户代码和 <code>Amazon EC</code>2 代码所花费的时间。</td>
</tr>
<tr>
<td style="text-align:left"><code>DiskReadOps</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">在指定时间段内从可供实例使用的所有实例存储卷完成的读取操作次数。</td>
</tr>
<tr>
<td style="text-align:left"><code>DiskWriteOps</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">在指定时间段内向可供实例使用的所有实例存储卷完成的写入操作次数。</td>
</tr>
<tr>
<td style="text-align:left"><code>DiskWriteBytes</code></td>
<td style="text-align:left">字节</td>
<td style="text-align:left">向可供实例使用的所有实例存储卷写入的字节数。</td>
</tr>
<tr>
<td style="text-align:left"><code>NetworkIn</code></td>
<td style="text-align:left">字节</td>
<td style="text-align:left">实例在所有网络接口上收到的字节数。</td>
</tr>
<tr>
<td style="text-align:left"><code>NetworkOut</code></td>
<td style="text-align:left">字节</td>
<td style="text-align:left">实例在所有网络接口上发送的字节数</td>
</tr>
<tr>
<td style="text-align:left"><code>NetworkPacketsIn</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">实例在所有网络接口上收到的数据包数</td>
</tr>
<tr>
<td style="text-align:left"><code>NetworkPacketsOut</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">实例在所有网络接口上发送的数据包数。</td>
</tr>
<tr>
<td style="text-align:left"><code>CPUCreditUsage</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">实例为保持 <code>CPU</code> 使用率而花费的 <code>CPU</code> 积分数。<code>CPU</code> 信用指标仅每 5 分钟提供一次。如果您指定一个大于五分钟的时间段，请使用<code>Sum</code> 统计数据，而非 <code>Average</code> 统计数据。</td>
</tr>
<tr>
<td style="text-align:left"><code>CPUCreditBalance</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">实例自启动后已累积获得的 <code>CPU</code> 积分数。</td>
</tr>
<tr>
<td style="text-align:left"><code>CPUSurplusCreditBalance</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">实例花费的超额积分数。</td>
</tr>
<tr>
<td style="text-align:left"><code>CPUSurplusCreditsCharged</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">未由获得的 <code>CPU</code> 积分支付并且会产生额外费用的已花费超额积分数。</td>
</tr>
<tr>
<td style="text-align:left"><code>StatusCheckFailed</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">报告实例在上一分钟是否通过了实例状态检查和系统状态检查。此指标可以是 0（通过）或 1（失败）。</td>
</tr>
<tr>
<td style="text-align:left"><code>StatusCheckFailed_Instance</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">报告实例在上个 1 分钟内是否通过了 实例状况检查。</td>
</tr>
<tr>
<td style="text-align:left"><code>StatusCheckFailed_System</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">报告实例在上一分钟内是否通过了 系统状况检查。</td>
</tr>
<tr>
<td style="text-align:left"><code>StatusCheckFailed_AttachedEBS</code></td>
<td style="text-align:left">计数</td>
<td style="text-align:left">报告实例在上一分钟内是否通过了附加的 <code>EBS</code> 卷状态检查。</td>
</tr>
</tbody>
</table>
<p><code>EC2</code> 指标都有以下维度</p>
<table>
<thead>
<tr>
<th style="text-align:left">维度</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>AutoScalingGroupName</code></td>
<td style="text-align:left">自动扩展组</td>
</tr>
<tr>
<td style="text-align:left"><code>ImageId</code></td>
<td style="text-align:left"><code>AMI</code></td>
</tr>
<tr>
<td style="text-align:left"><code>InstanceId</code></td>
<td style="text-align:left">实例<code>ID</code></td>
</tr>
<tr>
<td style="text-align:left"><code>InstanceType</code></td>
<td style="text-align:left">实例类型</td>
</tr>
</tbody>
</table>
<h2 id="cloudwatch-agent" class="heading-element">
  <a href="#cloudwatch-agent" class="heading-mark"></a>CloudWatch agent</h2><p>CloudWatch 代理执行以下操作：</p>
<ul>
<li>跨操作系统从 <code>Amazon EC2</code> 实例中收集内部系统级指标。</li>
<li>从本地服务器中收集系统级别指标</li>
<li>使用 <code>StatsD</code> 和 <code>collectd</code> 协议从应用程序或服务中检索自定义指标</li>
</ul>
<p>由统一 <code>CloudWatch</code>代理收集的日志在 <code>Amazon CloudWatch Logs</code>中处理和存储</p>
<h2 id="在ec2中运行-cloudwatch-agent" class="heading-element">
  <a href="#%e5%9c%a8ec2%e4%b8%ad%e8%bf%90%e8%a1%8c-cloudwatch-agent" class="heading-mark"></a>在EC2中运行 CloudWatch agent</h2><ol>
<li>
<p>创建<code>CloudWatch</code> 代理将指标写入 <code>CloudWatch</code> 所需的权限</p>
<ol>
<li>登录到<a href="https://console.aws.amazon.com/iam/"target="_blank" rel="external nofollow noopener noreferrer">AWS IAM 控制台</a></li>
<li>在左侧的导航窗格中选择：访问管理（<code>Access management</code>）-&gt; <code>Roles</code> (角色) -&gt; <code>Create role</code> (创建角色)</li>
<li>在受信任实体的类型（Trusted entity type）中选择服务（<code>AWS service</code>）</li>
<li>在使用案例(<code>Use case</code>)中搜索与指定<code>ec2</code>后选择下一步</li>
<li>在权限策略(<code>Permissions policies</code>)中搜索并指定<code>CloudWatchAgentServerPolicy</code>。然后下一步</li>
<li>指定角色名称，并创建</li>
</ol>
</li>
<li>
<p>对于创建中的<code>EC2</code>，在高级详细信息中指定<code>IAM</code> 实例配置文件值为上一步创建的角色</p>
</li>
<li>
<p>在系统中安装<code>amazon-cloudwatch-agent</code></p>
<ul>
<li><code>Amazon Linux 2</code> 系统可以直接使用以下命令安装</li>
</ul>
<div class="highlight" id="id-18"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo yum install amazon-cloudwatch-agent</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>centos</code> 系列：</li>
</ul>
<div class="highlight" id="id-19"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@ip-172-31-3-132 ~<span class="o">]</span><span class="c1"># dnf -y install https://amazoncloudwatch-agent.s3.amazonaws.com/centos/amd64/latest/amazon-cloudwatch-agent.rpm</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">Installed:
</span></span><span class="line"><span class="cl">  amazon-cloudwatch-agent-1.300033.0b462-1.x86_64
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Complete!</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="cloudwatch-代理配置文件" class="heading-element">
  <a href="#cloudwatch-%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="heading-mark"></a>CloudWatch 代理配置文件</h2><p>代理配置文件是一个 <code>JSON</code> 文件，它指定了该代理要收集的指标(包括自定义指标)、日志和跟踪信息，每次更改代理配置文件时，您必须重新启动该代理以使更改生效。</p>
<p>配置文件<code>json</code>文件分为以下几部分：</p>
<ul>
<li><code>agent</code>: 默认配置值，会被其它部分覆盖</li>
<li><code>metrics</code>: 收集指标并发布到 <code>CloudWatch</code></li>
<li><code>logs</code>: 将日志文件发布到 <code>CloudWatch Logs</code></li>
<li><code>traces</code>: 部分指定收集并发送到 <code>AWS X-Ray</code></li>
</ul>
<h3 id="使用二进制文件生成配置文件" class="heading-element">
  <a href="#%e4%bd%bf%e7%94%a8%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e7%94%9f%e6%88%90%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="heading-mark"></a>使用二进制文件生成配置文件</h3><p>运行该二进制文件可通过选项生成配置文件，文件将保存到<code>/opt/aws/amazon-cloudwatch-agent/bin/config.json</code></p>
<div class="highlight" id="id-20"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 执行后为交互式选项</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@ip-172-31-3-132 ~<span class="o">]</span><span class="c1"># sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard</span>
</span></span><span class="line"><span class="cl"><span class="o">================================================================</span>
</span></span><span class="line"><span class="cl"><span class="o">=</span> Welcome to the Amazon CloudWatch Agent Configuration <span class="nv">Manager</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="o">=</span>                                                              <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="o">=</span> CloudWatch Agent allows you to collect metrics and logs <span class="nv">from</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="o">=</span> your host and send them to CloudWatch. Additional <span class="nv">CloudWatch</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="o">=</span> charges may apply.                                           <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="o">================================================================</span>
</span></span><span class="line"><span class="cl">On which OS are you planning to use the agent?
</span></span><span class="line"><span class="cl">1. linux
</span></span><span class="line"><span class="cl">2. windows
</span></span><span class="line"><span class="cl">3. darwin
</span></span><span class="line"><span class="cl">default choice: <span class="o">[</span>1<span class="o">]</span>:
</span></span><span class="line"><span class="cl"><span class="m">1</span>
</span></span><span class="line"><span class="cl">。。。。。。
</span></span><span class="line"><span class="cl">Please check the above content of the config.
</span></span><span class="line"><span class="cl">The config file is also located at /opt/aws/amazon-cloudwatch-agent/bin/config.json.
</span></span><span class="line"><span class="cl">Edit it manually <span class="k">if</span> needed.
</span></span><span class="line"><span class="cl">Do you want to store the config in the SSM parameter store?
</span></span><span class="line"><span class="cl">1. yes
</span></span><span class="line"><span class="cl">2. no
</span></span><span class="line"><span class="cl">default choice: <span class="o">[</span>1<span class="o">]</span>:
</span></span><span class="line"><span class="cl"><span class="m">2</span>
</span></span><span class="line"><span class="cl">Program exits now.</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="运行-cloudwatch-代理" class="heading-element">
  <a href="#%e8%bf%90%e8%a1%8c-cloudwatch-%e4%bb%a3%e7%90%86" class="heading-mark"></a>运行 CloudWatch 代理</h3><p><code>amazon-cloudwatch-agent-ctl</code> 查找帮助选项</p>
<div class="highlight" id="id-21"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@ip-172-31-3-132 ~<span class="o">]</span><span class="c1"># amazon-cloudwatch-agent-ctl --help</span>
</span></span><span class="line"><span class="cl">Invalid option: --
</span></span><span class="line"><span class="cl">-a: action
</span></span><span class="line"><span class="cl">    stop:                                   stop the agent process.
</span></span><span class="line"><span class="cl">    start:                                  start the agent process.
</span></span><span class="line"><span class="cl">    status:                                 get the status of the agent process.
</span></span><span class="line"><span class="cl">    fetch-config:   <span class="c1"># 应用配置文件（并不会重启进程）</span>
</span></span><span class="line"><span class="cl">    append-config:  <span class="c1"># 添加json字段与值到配置文件 </span>
</span></span><span class="line"><span class="cl">    remove-config:  <span class="c1"># 从配置文件移除json字段与值</span>
</span></span><span class="line"><span class="cl">    set-log-level:  <span class="c1"># 日本级别</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-m: mode
</span></span><span class="line"><span class="cl">    ec2:               <span class="c1"># ec2实例运行</span>
</span></span><span class="line"><span class="cl">    onPremise, onPrem: <span class="c1"># indicate this is on onPremise host.</span>
</span></span><span class="line"><span class="cl">    auto:              <span class="c1"># 自动判断</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-s <span class="c1"># 执行 &#39;fetch-config&#39;, &#39;append-config&#39;, &#39;remove-config&#39; 动作时重启进程</span>
</span></span><span class="line"><span class="cl">-c <span class="c1"># 指定运行时配置文件。有以下方式</span>
</span></span><span class="line"><span class="cl">   <span class="c1"># default: 默认配置</span>
</span></span><span class="line"><span class="cl">   <span class="c1"># ssm:&lt;parameter-store-name&gt;: AWS Systems Manager 地址</span>
</span></span><span class="line"><span class="cl">   <span class="c1"># file:&lt;file-path&gt;: 本地主机地址</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>示例</li>
</ul>
<div class="highlight" id="id-22"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@ip-172-31-3-132 ~<span class="o">]</span><span class="c1"># amazon-cloudwatch-agent-ctl \</span>
</span></span><span class="line"><span class="cl">-a fetch-config -s <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-m ec2 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json
</span></span><span class="line"><span class="cl">****** processing amazon-cloudwatch-agent ******
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">amazon-cloudwatch-agent has already been stopped
</span></span><span class="line"><span class="cl">Created symlink /etc/systemd/system/multi-user.target.wants/amazon-cloudwatch-agent.service → /etc/systemd/system/amazon-cloudwatch-agent.service.
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@ip-172-31-3-132 ~<span class="o">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@ip-172-31-3-132 ~<span class="o">]</span><span class="c1"># systemctl status amazon-cloudwatch-agent.service</span>
</span></span><span class="line"><span class="cl">● amazon-cloudwatch-agent.service - Amazon CloudWatch Agent
</span></span><span class="line"><span class="cl">     Loaded: loaded <span class="o">(</span>/etc/systemd/system/amazon-cloudwatch-agent.service<span class="p">;</span> enabled<span class="p">;</span> preset: disabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">     Active: active <span class="o">(</span>running<span class="o">)</span> since Thu 2024-02-22 08:59:06 UTC<span class="p">;</span> 26s ago
</span></span><span class="line"><span class="cl">   Main PID: <span class="m">4260</span> <span class="o">(</span>amazon-cloudwat<span class="o">)</span>
</span></span><span class="line"><span class="cl">      Tasks: <span class="m">9</span> <span class="o">(</span>limit: 47887<span class="o">)</span>
</span></span><span class="line"><span class="cl">     Memory: 22.8M
</span></span><span class="line"><span class="cl">        CPU: 217ms
</span></span><span class="line"><span class="cl">     CGroup: /system.slice/amazon-cloudwatch-agent.service
</span></span><span class="line"><span class="cl">     ...</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cloudwatch-agent-收集的指标" class="heading-element">
  <a href="#cloudwatch-agent-%e6%94%b6%e9%9b%86%e7%9a%84%e6%8c%87%e6%a0%87" class="heading-mark"></a>CloudWatch agent 收集的指标</h2><p><a href="https://docs.aws.amazon.com/zh_cn/AmazonCloudWatch/latest/monitoring/metrics-collected-by-CloudWatch-agent.html"target="_blank" rel="external nofollow noopener noreferrer">CloudWatch 代理收集的指标</a></p>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2024-02-25 20:24:24">更新于 2024-02-25&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/aws/" class="post-tag" title="标签 - aws">aws</a><a href="/tags/CloudWatch/" class="post-tag" title="标签 - CloudWatch">CloudWatch</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/mailx/" class="post-nav-item" rel="prev" title="mailx - 发送和接收网络邮件"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>mailx - 发送和接收网络邮件</a>
      <a href="/eksPrometheus/" class="post-nav-item" rel="next" title="eks中部署prometheus">eks中部署prometheus<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content always-active" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.115.3"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.1"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="/lib/pace/themes/blue/pace-theme-minimal.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/lightgallery/lightgallery.min.js" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js" defer></script><script src="/lib/pangu/pangu.min.js" defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"lightgallery":true,"pangu":{"enable":true,"selector":"article"},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":true,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
