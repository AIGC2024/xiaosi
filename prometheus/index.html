<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>prometheus 是一个开源系统监控和警报工具包 - 小厮</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="xiaosi" /><meta name="keywords" content='prometheus' /><meta itemprop="name" content="prometheus 是一个开源系统监控和警报工具包">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2023-06-25T21:10:30+08:00" />
<meta itemprop="dateModified" content="2024-02-09T13:45:16+08:00" />
<meta itemprop="wordCount" content="10579">
<meta itemprop="keywords" content="prometheus," /><meta property="og:title" content="prometheus 是一个开源系统监控和警报工具包" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/prometheus/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-25T21:10:30+08:00" />
<meta property="article:modified_time" content="2024-02-09T13:45:16+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="prometheus 是一个开源系统监控和警报工具包"/>
<meta name="twitter:description" content=""/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#ffffff" data-dark="#252627" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="/prometheus/" /><link rel="prev" href="/harbor/" /><link rel="next" href="/dockerdConfig/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "prometheus 是一个开源系统监控和警报工具包",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "\/prometheus\/"
    },"genre": "posts","keywords": "prometheus","wordcount":  10579 ,
    "url": "\/prometheus\/","datePublished": "2023-06-25T21:10:30+08:00","dateModified": "2024-02-09T13:45:16+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "小厮"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('light' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'light' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="wide"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="小厮"><span class="header-title-text">首页</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class='fa-solid fa-archive fa-fw fa-sm'></i> 所有文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="小厮"><span class="header-title-text">首页</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class='fa-solid fa-archive fa-fw fa-sm'></i> 所有文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container container-reverse"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>prometheus 是一个开源系统监控和警报工具包</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      小厮</span></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/prometheus/" class="post-category" title="分类 - prometheus"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> prometheus</a></span></div><div class="post-meta-line"><span title="发布于 2023-06-25 21:10:30"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2023-06-25">2023-06-25</time></span>&nbsp;<span title="更新于 2024-02-09 13:45:16"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden="true"></i><time datetime="2024-02-09">2024-02-09</time></span>&nbsp;<span title="10579 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 10600 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 22 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#简介">简介</a></li>
    <li><a href="#安装">安装</a>
      <ul>
        <li><a href="#二进制文件">二进制文件</a></li>
        <li><a href="#docker方式运行">docker方式运行</a></li>
      </ul>
    </li>
    <li><a href="#命令行参数">命令行参数</a></li>
    <li><a href="#配置文件">配置文件</a>
      <ul>
        <li><a href="#global-配置">global 配置</a></li>
        <li><a href="#目标组">目标组</a></li>
        <li><a href="#静态目标发现配置">静态目标发现配置</a></li>
        <li><a href="#基于文件内容的服务发现">基于文件内容的服务发现</a></li>
        <li><a href="#标签重写">标签重写</a></li>
      </ul>
    </li>
    <li><a href="#指标">指标</a></li>
    <li><a href="#promql">PromQL</a>
      <ul>
        <li><a href="#运算">运算</a></li>
        <li><a href="#向量匹配">向量匹配</a></li>
        <li><a href="#函数">函数</a>
          <ul>
            <li><a href="#rate">rate()</a></li>
            <li><a href="#irate">irate()</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#exporter规范">Exporter规范</a></li>
    <li><a href="#node_exporter">node_exporter</a>
      <ul>
        <li><a href="#选项与指标">选项与指标</a></li>
        <li><a href="#cpu-相关指标与选项">CPU 相关指标与选项</a></li>
        <li><a href="#流量相关指标与选项">流量相关指标与选项</a></li>
        <li><a href="#文件系统指标与选项">文件系统指标与选项</a></li>
        <li><a href="#磁盘指标与选项">磁盘指标与选项</a></li>
        <li><a href="#内存指标与选项">内存指标与选项</a></li>
        <li><a href="#其它选项与指标">其它选项与指标</a></li>
      </ul>
    </li>
    <li><a href="#error">error</a>
      <ul>
        <li><a href="#warning-error-fetching-server-time-detected-37920000076293945-seconds-time-difference-between-your-browser-and-the-server-prometheus-relies-on-accurate-time-and-time-drift-might-cause-unexpected-query-results">Warning: Error fetching server time: Detected 37.920000076293945 seconds time difference between your browser and the server. Prometheus relies on accurate time and time drift might cause unexpected query results.</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><!-- FileID: FID -->
<blockquote>
<p>运行环境：</p>
<ul>
<li>centos: 7</li>
</ul>
<p>内容来自以下文档：</p>
<ul>
<li><code>yunlzheng：</code><a href="https://yunlzheng.gitbook.io/prometheus-book/introduction"target="_blank" rel="external nofollow noopener noreferrer">prometheus-book</a></li>
<li><a href="https://mp.weixin.qq.com/s/mYAVgI3DhJsHq3sPLb4opQ"target="_blank" rel="external nofollow noopener noreferrer"><code>kevinkrcai：</code>一文带你了解 Prometheus</a></li>
<li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/"target="_blank" rel="external nofollow noopener noreferrer">configuration</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1885191"target="_blank" rel="external nofollow noopener noreferrer"><code>我是阳明：</code>Prometheus Relabeling 重新标记的使用</a></li>
<li><a href="https://mp.weixin.qq.com/s/hTl6yj0Ty4_LBtuiartKqw"target="_blank" rel="external nofollow noopener noreferrer"><code>民工哥技术之路：</code>构建企业级监控平台系列（十三）：Prometheus Server 配置详解</a></li>
</ul>
</blockquote>
<!--start of attachment line-->
<!--End of attachment line-->
<h1 id="简介" class="heading-element">
  <a href="#%e7%ae%80%e4%bb%8b" class="heading-mark"></a>简介</h1><p>在<code>Prometheus</code>的架构设计中，<code>Prometheus</code> <code>Server</code>并不直接服务监控特定的目标，其主要任务负责数据的收集，存储并且对外提供数据查询支持。因此为了能够能够监控到某些东西，如主机的<code>CPU</code>使用率，我们需要使用到<code>Exporter</code>。<code>Prometheus</code>周期性的从<code>Exporter</code>暴露的<code>HTTP</code>服务地址（通常是<code>/metrics</code>）拉取监控样本数据。架构图如下：
<img loading="lazy" src="prometheus%e6%9e%b6%e6%9e%84%e5%9b%be.png" alt="prometheus架构图.png" srcset="prometheus%e6%9e%b6%e6%9e%84%e5%9b%be.png?size=small, prometheus%e6%9e%b6%e6%9e%84%e5%9b%be.png?size=medium 1.5x, prometheus%e6%9e%b6%e6%9e%84%e5%9b%be.png?size=large 2x" sizes="auto" data-title="prometheus架构图.png" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h1 id="安装" class="heading-element">
  <a href="#%e5%ae%89%e8%a3%85" class="heading-mark"></a>安装</h1><h2 id="二进制文件" class="heading-element">
  <a href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6" class="heading-mark"></a>二进制文件</h2><ol>
<li>
<p>从<a href="https://prometheus.io/download/"target="_blank" rel="external nofollow noopener noreferrer">官网下载</a>二进制</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># wget -P /data/download/ https://github.com/prometheus/prometheus/releases/download/v2.45.0/prometheus-2.45.0.linux-amd64.tar.gz</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># tar -zxf /data/download/prometheus-2.45.0.linux-amd64.tar.gz -C /data/prometheus</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># cd /data/prometheus/ &amp;&amp; ls</span>
</span></span><span class="line"><span class="cl">console_libraries  consoles  LICENSE  NOTICE  prometheus  prometheus.yml  promtool</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>创建运行用户与组</p>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># useradd --no-create-home --shell /bin/false prometheus</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># chown -R prometheus:prometheus /data/prometheus</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>创建 <code>prometheus.service</code> 文件，以守护进程方式运行</p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># cat /etc/systemd/system/prometheus.service</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>Prometheus Server
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">User</span><span class="o">=</span>prometheus
</span></span><span class="line"><span class="cl"><span class="nv">Group</span><span class="o">=</span>prometheus
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>simple
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/data/prometheus/prometheus <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --config.file<span class="o">=</span>/data/prometheus/prometheus.yml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --storage.tsdb.path<span class="o">=</span>/data/prometheus/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --web.console.templates<span class="o">=</span>/data/prometheus/consoles <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --web.console.libraries<span class="o">=</span>/data/prometheus/console_libraries
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># systemctl daemon-reload</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># systemctl start prometheus &amp;&amp; systemctl status prometheus</span>
</span></span><span class="line"><span class="cl">● prometheus.service - Prometheus Server
</span></span><span class="line"><span class="cl">   Loaded: loaded <span class="o">(</span>/etc/systemd/system/prometheus.service<span class="p">;</span> disabled<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">   Active: active <span class="o">(</span>running<span class="o">)</span> since Sun 2023-09-03 16:30:17 CST<span class="p">;</span> 7s ago
</span></span><span class="line"><span class="cl"> Main PID: <span class="m">19837</span> <span class="o">(</span>prometheus<span class="o">)</span>
</span></span><span class="line"><span class="cl"> ...</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="docker方式运行" class="heading-element">
  <a href="#docker%e6%96%b9%e5%bc%8f%e8%bf%90%e8%a1%8c" class="heading-mark"></a>docker方式运行</h2><div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># cat docker-prometheus.sh</span>
</span></span><span class="line"><span class="cl">docker container run  -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --name <span class="s2">&#34;prometheus&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p 9090:9090 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -v /data/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  prom/prometheus:v2.49.1 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --config.file<span class="o">=</span>/etc/prometheus/prometheus.yml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --storage.tsdb.retention.time 3d</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="命令行参数" class="heading-element">
  <a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%8f%82%e6%95%b0" class="heading-mark"></a>命令行参数</h1><div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># ./prometheus --help</span>
</span></span><span class="line"><span class="cl">usage: prometheus <span class="o">[</span>&lt;flags&gt;<span class="o">]</span>
</span></span><span class="line"><span class="cl">-h, --<span class="o">[</span>no-<span class="o">]</span><span class="nb">help</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 查看帮助</span>
</span></span><span class="line"><span class="cl">--version 
</span></span><span class="line"><span class="cl">  <span class="c1"># 显示版本信息</span>
</span></span><span class="line"><span class="cl">--config.file<span class="o">=</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 指定运行配置文件</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>运行地址</li>
</ul>
<div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--web.listen-address<span class="o">=</span>“0.0.0.0:9090” 
</span></span><span class="line"><span class="cl">  <span class="c1"># ui、api、telemetry监听地址信息</span>
</span></span><span class="line"><span class="cl">--web.config.file<span class="o">=</span><span class="s2">&#34;&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># TLS或身份验证配置文件</span>
</span></span><span class="line"><span class="cl">--web.read-timeout<span class="o">=</span>5m 
</span></span><span class="line"><span class="cl">  <span class="c1"># 页面读取请求最大超时时间 </span>
</span></span><span class="line"><span class="cl">--web.max-connections<span class="o">=</span><span class="m">512</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 同时访问Prometheus页面的最大连接数，默认为512</span>
</span></span><span class="line"><span class="cl">--web.external-url<span class="o">=</span>&lt;URL&gt; 
</span></span><span class="line"><span class="cl">  <span class="c1"># Prometheus对外提供的url(eg: Prometheus通过反向代理提供服务)。用于生成一个相对和绝对的链接返回给Prometheus本身。如果这个url有路径部分，它将用于Prometheus所有HTTP端点的前缀。如果省略了，则相关的url组件将自动派生。</span>
</span></span><span class="line"><span class="cl">--web.route-prefix<span class="o">=</span>&lt;path&gt; 
</span></span><span class="line"><span class="cl">  <span class="c1"># Web端点内部路由的前缀。默认路径：web.external-url</span>
</span></span><span class="line"><span class="cl">--web.user-assets<span class="o">=</span>&lt;path&gt; 
</span></span><span class="line"><span class="cl">  <span class="c1"># 静态资源路径，可以在/user下找到</span>
</span></span><span class="line"><span class="cl">--web.enable-lifecycle  
</span></span><span class="line"><span class="cl">  <span class="c1"># 通过HTTP请求启用关闭和重新加载</span>
</span></span><span class="line"><span class="cl">--web.enable-admin-api  
</span></span><span class="line"><span class="cl">  <span class="c1"># 启用管理控制操作的api端点</span>
</span></span><span class="line"><span class="cl">--web.console.templates<span class="o">=</span><span class="s2">&#34;consoles&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 到控制台模板目录的路径，可以在consoles/目录下找到。</span>
</span></span><span class="line"><span class="cl">--web.console.libraries<span class="o">=</span><span class="s2">&#34;console_libraries&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 控制台库目录的路径</span>
</span></span><span class="line"><span class="cl">–web.page-title<span class="o">=</span>”Prometheus时间序列采集和处理服务器” 
</span></span><span class="line"><span class="cl">  <span class="c1"># Prometheus实例的文件标题。</span>
</span></span><span class="line"><span class="cl">--web.cors.origin<span class="o">=</span><span class="s2">&#34;.*&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 正则表达式为CORS原点。它已完全锚定。例子:“https ?: / / (domain1 | domain2) \。com”</span></span></span></code></pre></td></tr></table>
</div>
</div><p>存储</p>
<div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--storage.tsdb.path<span class="o">=</span><span class="s2">&#34;data/&#34;</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 数据存储的基本路径</span>
</span></span><span class="line"><span class="cl">--storage.tsdb.min-block-duration<span class="o">=</span>2h 
</span></span><span class="line"><span class="cl">  <span class="c1"># 在持久化之前数据块的最短保存期</span>
</span></span><span class="line"><span class="cl">--storage.tsdb.max-block-duration<span class="o">=</span>&lt;duration&gt; 
</span></span><span class="line"><span class="cl">  <span class="c1"># 在持久化之前数据块的最大保存期(默认为保存期的10%)</span>
</span></span><span class="line"><span class="cl">--storage.tsdb.retention<span class="o">=</span>STORAGE.TSDB.RETENTION 
</span></span><span class="line"><span class="cl">  <span class="c1"># 样品保存的时间。此标志已被弃用，请使用&#34;--storage.tsdb.retention.time&#34;</span>
</span></span><span class="line"><span class="cl">--storage.tsdb.retention.time<span class="o">=</span>STORAGE.TSDB.RETENTION.TIME 
</span></span><span class="line"><span class="cl">  <span class="c1"># 样品保存的时间，默认为15d。支持单位:y, w, d, h, m, s, ms。</span>
</span></span><span class="line"><span class="cl">--storage.tsdb.retention.size<span class="o">=</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 存储的最大字节数。支持单位:B、KB、MB、GB、TB、PB、EB。</span>
</span></span><span class="line"><span class="cl">--storage.tsdb.no-lockfile 
</span></span><span class="line"><span class="cl">  <span class="c1"># 不在数据目录中创建lockfile。</span>
</span></span><span class="line"><span class="cl">–storage.tsdb.allow-overlapping-blocks 
</span></span><span class="line"><span class="cl">  <span class="c1"># 允许重叠块，从而支持垂直压缩和垂直查询合并。</span>
</span></span><span class="line"><span class="cl">–storage.tsdb.wal-compression 
</span></span><span class="line"><span class="cl">  <span class="c1"># 压缩tsdb WAL。</span>
</span></span><span class="line"><span class="cl">–storage.remote.flush-deadline<span class="o">=</span> <span class="c1"># 关闭或重新加载配置时需要等待多长时间刷新样例。</span>
</span></span><span class="line"><span class="cl">–storage.remote.read-sample-limit<span class="o">=</span>5e7 
</span></span><span class="line"><span class="cl">  <span class="c1"># 在单个查询中通过远程读接口返回的最大样本总数。0意味着没有限制。对于流响应类型，此限制将被忽略。</span>
</span></span><span class="line"><span class="cl">–storage.remote.read-concurrent-limit<span class="o">=</span><span class="m">10</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 并发远程读调用的最大数量。0意味着没有限制。</span>
</span></span><span class="line"><span class="cl">–storage.remote.read-max-bytes-in-frame<span class="o">=</span><span class="m">1048576</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 在编组前流化远程读取响应类型的单个帧中的最大字节数。请注意，客户端可能也有帧大小的限制。默认情况下为1MB。</span>
</span></span><span class="line"><span class="cl">–rules.alert.for-outage-tolerance<span class="o">=</span>1h 
</span></span><span class="line"><span class="cl">  <span class="c1"># 忍受Prometheus故障恢复“for”警报状态的最大时间。</span>
</span></span><span class="line"><span class="cl">--rules.alert.for-grace-period<span class="o">=</span>10m 
</span></span><span class="line"><span class="cl">  <span class="c1"># 警报和恢复“for”状态之间的最小持续时间。仅对配置的“for”时间大于宽限期的警报进行维护。</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">–rules.alert.resend-delay<span class="o">=</span>1m  
</span></span><span class="line"><span class="cl">  <span class="c1"># 在向Alertmanager重新发送警报之前等待的最短时。间。</span>
</span></span><span class="line"><span class="cl">--alertmanager.notification-queue-capacity<span class="o">=</span><span class="m">10000</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 等待报警通知队列的大小。</span>
</span></span><span class="line"><span class="cl">--alertmanager.timeout<span class="o">=</span>10s 
</span></span><span class="line"><span class="cl">  <span class="c1"># 发送警报到Alertmanager的超时时间。</span>
</span></span><span class="line"><span class="cl">--query.lookback-delta<span class="o">=</span>5m 
</span></span><span class="line"><span class="cl">  <span class="c1"># 允许在表达式求值期间检索度量值的delta差值。</span>
</span></span><span class="line"><span class="cl">--query.timeout<span class="o">=</span>2m 
</span></span><span class="line"><span class="cl">  <span class="c1"># 一个查询在终止之前可以执行的最长时间(如果超过2min，就会自动kill掉)。</span>
</span></span><span class="line"><span class="cl">--query.max-concurrency<span class="o">=</span><span class="m">20</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 并发执行的最大查询数，默认为20。</span>
</span></span><span class="line"><span class="cl">–query.max-samples<span class="o">=</span><span class="m">50000000</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 单个查询可以加载到内存中的最大样本数。注意，如果查询尝试将比这个更多的样本加载到内存中，那么查询将会失败，因此这也限制了查询可以返回的样本数量。</span>
</span></span><span class="line"><span class="cl">--enable-feature<span class="o">=</span> 
</span></span><span class="line"><span class="cl">  <span class="c1"># 逗号分隔要启用的功能名称，有效选项：agent、examplar-storage、expand-external-labels、memory--snapshot-on-shutdown、promql-at-modifier、promql-negative-offset、remote-write-reciver、extra-scrape-metrics、new-service-discovery-manager，详情请查看https://prometheus.io/docs/prometheus/latest/feature_flags/。</span>
</span></span><span class="line"><span class="cl">--log.level<span class="o">=</span>info  
</span></span><span class="line"><span class="cl">  <span class="c1"># 开启打印日志级别(debug,info,warn,error,fatal)。默认为info。</span>
</span></span><span class="line"><span class="cl">--log.format<span class="o">=</span>logfmt 
</span></span><span class="line"><span class="cl">  <span class="c1"># 日志消息的输出格式。其中一个:[logfmt, json]。</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>Prometheus</code> 的本地存储不支持不符合 <code>POSIX</code> 标准的文件系统，因为可能会发生不可恢复的损坏。不支持 <code>NFS</code> 文件系统（包括 <code>AWS</code> 的 <code>EFS</code>）。<code>NFS</code> 可能符合 <code>POSIX</code> 标准，但大多数实现并非如此。为了可靠性，强烈建议使用本地文件系统。如果同时指定了时间和大小保留策略，则将使用先触发的触发器。过期块清理在后台进行。删除过期的块最多可能需要两个小时。块必须完全过期才能被删除。</p>
<p><code>Prometheus</code> 的本地存储并不是为了持久的长期存储。本地存储由于某种原因而损坏，解决该问题的最佳策略是关闭 <code>Prometheus</code>，然后删除整个存储目录。</p>
<h1 id="配置文件" class="heading-element">
  <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="heading-mark"></a>配置文件</h1><blockquote>
<p><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/"target="_blank" rel="external nofollow noopener noreferrer">https://prometheus.io/docs/prometheus/latest/configuration/configuration/</a></p>
</blockquote>
<p>配置文件是<code>yml</code>格式的文本，默认在以下目录，可以通过<code>--config.file</code>指定新的配置文件</p>
<ul>
<li>二进制文件包：执行文件目录中的<code>prometheus.yml</code></li>
<li>容器：<code>/etc/prometheus/prometheus.yml</code></li>
</ul>
<p>配置文件分为以下部分</p>
<ul>
<li><code>global</code>: 全局配置。做为其它配置项默认配置</li>
<li><code>scrape_config</code>: 抓取目标服务地址</li>
<li><code>rule_files</code>: 报警规则的文件</li>
<li><code>alerting</code>: Alertmanager配置</li>
<li><code>remote_write</code>: 远程写入功能相关的设置</li>
<li><code>remote_read</code>: 远程读取相关功能的设置</li>
</ul>
<h2 id="global-配置" class="heading-element">
  <a href="#global-%e9%85%8d%e7%bd%ae" class="heading-mark"></a>global 配置</h2><div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">global:
</span></span><span class="line"><span class="cl">  <span class="c1"># 默认情况抓取目标的频率，默认1分钟</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span> scrape_interval: &lt;duration&gt; <span class="p">|</span> <span class="nv">default</span> <span class="o">=</span> 1m <span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># 抓取请求超时的时间，默认10S</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span> scrape_timeout: &lt;duration&gt; <span class="p">|</span> <span class="nv">default</span> <span class="o">=</span> 10s <span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># 评估规则的频率，默认1分钟</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span> evaluation_interval: &lt;duration&gt; <span class="p">|</span> <span class="nv">default</span> <span class="o">=</span> 1m <span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># 外部系统标签用于区分prometheus服务实例</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># 外部系统（federation、远程、storage、Alertmanager）</span>
</span></span><span class="line"><span class="cl">  external_labels:
</span></span><span class="line"><span class="cl">    <span class="o">[</span> &lt;labelname&gt;: &lt;labelvalue&gt; ... <span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># PromQL查询记录到的文件。重新加载配置将重新打开该文件。</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span> query_log_file: &lt;string&gt; <span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="目标组" class="heading-element">
  <a href="#%e7%9b%ae%e6%a0%87%e7%bb%84" class="heading-mark"></a>目标组</h2><p>如何抓取组与目标组参数</p>
<div class="highlight" id="id-9"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">scrape_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 默认情况下，分配给临时度量的作业名称。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;job_name&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 从这项工作中抓取目标的频率。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;duration&gt; | default = &lt;global_config.scrape_interval&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 此作业时的每次抓取超时时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ scrape_timeout</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;duration&gt; | default = &lt;global_config.scrape_timeout&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 要从目标获取度量的HTTP资源路径</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ metrics_path</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;path&gt; | default = /metrics ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># honor_labels主要用于解决prometheus server的label与exporter端用户自定义label冲突的问题。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 为“true”，则通过保留标签来解决标签冲突值，并忽略冲突的服务器端标签。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 为“false”，则通过重命名解决标签冲突，采集端标签将添加exported_前缀</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ honor_labels</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;boolean&gt; | default = false ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 如果honor_timestamps设置为“true”，则将显示度量的时间戳由目标将被使用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 为“false”，则会显示度量的时间戳，将忽略由目标创建的。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ honor_timestamps</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;boolean&gt; | default = true ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 配置用于请求的协议方案。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ scheme</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;scheme&gt; | default = http ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 可选的HTTP URL参数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ &lt;string&gt;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">&lt;string&gt;, ...] ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 使用配置的用户名和密码，密码和密码文件是互斥的。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">basic_auth</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ username</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;string&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ password</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;secret&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ password_file</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;string&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 使用设置每个刮取请求的“Authorization”标头为配置的凭据。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">authorization</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 设置请求的请求头身份验证类型。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ type: &lt;string&gt; | default</span><span class="p">:</span><span class="w"> </span><span class="l">Bearer ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 设置请求的凭据。这是和credentials_file相互排斥的</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ credentials</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;secret&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 使用从中读取的凭据设置请求的凭据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">[ credentials_file</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;filename&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 可选的OAuth 2.0配置。不能与基本授权或授权同时使用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">oauth2</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="l">&lt;oauth2&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 配置抓取请求是否遵循HTTP 3xx重定向。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ follow_redirects</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;bool&gt; | default = true ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 配置请求的TLS设置。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls_config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="l">&lt;tls_config&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 可选的代理URL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ proxy_url</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;string&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 服务发现配置，以下只是部分值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># k8s 服务发现</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">kubernetes_sd_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 静态目标发现</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">static_configs:</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="静态目标发现配置" class="heading-element">
  <a href="#%e9%9d%99%e6%80%81%e7%9b%ae%e6%a0%87%e5%8f%91%e7%8e%b0%e9%85%8d%e7%bd%ae" class="heading-mark"></a>静态目标发现配置</h2><div class="highlight" id="id-10"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 静态目标发现</span>
</span></span><span class="line"><span class="cl">static_configs:
</span></span><span class="line"><span class="cl">  <span class="c1"># 目标列表</span>
</span></span><span class="line"><span class="cl">  targets:
</span></span><span class="line"><span class="cl">    <span class="o">[</span> - <span class="s1">&#39;&lt;host&gt;[:prot]&#39;</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># 指标附加的标签列表</span>
</span></span><span class="line"><span class="cl">  labels:
</span></span><span class="line"><span class="cl">    <span class="o">[</span> &lt;labelname&gt;: &lt;labelvalue&gt; ... <span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="基于文件内容的服务发现" class="heading-element">
  <a href="#%e5%9f%ba%e4%ba%8e%e6%96%87%e4%bb%b6%e5%86%85%e5%ae%b9%e7%9a%84%e6%9c%8d%e5%8a%a1%e5%8f%91%e7%8e%b0" class="heading-mark"></a>基于文件内容的服务发现</h2><p>基于文件的服务发现方式，可以将<code>target</code>配置信息写入单独的<code>JSON</code>和<code>YAML</code>配置文件中，然后将这些配置文件添加到<code>file_sd_configs</code>配置项中，<code>Prometheus server</code> 会定期检测这些文件的变化，若发生变化，则会重新配置<code>target</code>信息。同时，<code>Prometheus server</code>也会定期全量加载这些配置文件中的<code>target</code>信息</p>
<div class="highlight" id="id-11"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">scrape_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#此处定义了自动发现的采集任务名称，可以依据自己的业务定义多个自动发现任务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;file_ds&#39;</span><span class="w">   
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">file_sd_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">targets/*.json        </span><span class="w"> </span><span class="c">#采集文件路径</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">refresh_interval</span><span class="p">:</span><span class="w"> </span><span class="l">5m</span><span class="w"> </span><span class="c">#自动发现间隔时间，默认5m</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="标签重写" class="heading-element">
  <a href="#%e6%a0%87%e7%ad%be%e9%87%8d%e5%86%99" class="heading-mark"></a>标签重写</h2><p><code>Relabeling</code> 是作为一系列转换步骤实现的，我们可以在 Prometheus 的配置文件中应用这些步骤来过滤或修改标记对象</p>
<ul>
<li>发现的抓取目标（<code>relabel_configs</code>）：即实际抓取之前</li>
<li>抓取的单个样本（<code>metric_relabel_configs</code>）：即抓取后保存到时序数据库之前</li>
<li>发送给 Alertmanager 的报警（<code>alert_relabel_configs</code>）</li>
<li>写到远程存储的样本（<code>write_relabel_configs</code>）</li>
</ul>
<div class="highlight" id="id-12"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">relabel_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">[ source_labels</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;[&#39;</span><span class="w"> </span><span class="l">&lt;labelname&gt; [, ...] &#39;]&#39; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ separator</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;string&gt; | default = ; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ target_label</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;labelname&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ regex</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;regex&gt; | default = (.*) ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ modulus</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;int&gt; ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ replacement</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;string&gt; | default = $1 ]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">[ action</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;relabel_action&gt; | default = replace ]</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>source_labels</code> 原标签列表，即被操作的标签列表</li>
<li><code>separator</code>: <code>source_labels</code> 的分隔符，默认为<code>;</code></li>
<li><code>target_label</code>: 目标标签，即操作后的标签</li>
<li><code>regex</code>: <code>RE2</code> 正则表达式，用于触发修改的条件，默认值为<code>(.*)</code></li>
<li><code>modulus</code>: 模数，串联的源标签哈希值的模，主要用于 <code>Prometheus</code> 水平分片</li>
<li><code>replacement</code>: 用于替换的值</li>
<li><code>action</code>: 执行操作，有：
<ul>
<li><code>replace</code>: 对满足<code>regex</code>的标签进行标签值替换</li>
<li><code>lowercase</code>:</li>
<li><code>uppercase</code>:</li>
<li><code>keep</code>: 标签值与<code>regex</code>匹配，保留匹配的对象，删除不匹配对象</li>
<li><code>drop</code>: 标签值与<code>regex</code>匹配，删除匹配的对象，保留不匹配对象</li>
<li><code>keepequal</code>:</li>
<li><code>dropequal</code>:</li>
<li><code>hashmod</code>:</li>
<li><code>labelmap</code>: 标签名与<code>regex</code>匹配，把值复制/映射到<code>replacement</code>指定的标签中</li>
<li><code>labeldrop</code>:</li>
<li><code>labelkeep</code>:</li>
</ul>
</li>
</ul>
<p>示例：</p>
<ul>
<li>
<p>把 <code>env</code> 标签设置为 <code>production</code></p>
<div class="highlight" id="id-13"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">replacement</span><span class="p">:</span><span class="w"> </span><span class="l">production</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">target_label</span><span class="p">:</span><span class="w"> </span><span class="l">env</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>把端口替换为<code>80</code></p>
<div class="highlight" id="id-14"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">source_labels</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">__address__]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">regex</span><span class="p">:</span><span class="w"> </span><span class="l">([^:]+)(?::\d+)?</span><span class="w"> </span><span class="c"># 第一个捕获组匹配的是 host，第二个匹配的是 port 端口。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">replacement</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;$1:80&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">target_label</span><span class="p">:</span><span class="w"> </span><span class="l">__address__</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><code>relabel_configs</code> 部分可以在抓取之前通过标签重写主机信息，可以使用以下变量</p>
<ul>
<li><code>__address__</code>: <code>scrape_configs.job_name.static_configs.targets</code>值</li>
<li><code>__scheme__</code>: 协议，值为 <code>http</code> 或 <code>https</code></li>
<li><code>__metrics_path__</code>: 抓取路径</li>
<li><code>__param_&lt;name&gt;</code>: <code>URL</code> 参数名称<code>&lt;name&gt;</code></li>
<li><code>__meta_</code>:</li>
<li>临时标签使用 <code>__tpm</code> 做为后缀</li>
</ul>
<div class="highlight" id="id-15"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">relabel_configs:    <span class="c1"># 以下列表都是可选的</span>
</span></span><span class="line"><span class="cl">  - source_labels:  <span class="c1"># 匹配的标签值列表</span>
</span></span><span class="line"><span class="cl">    target_label:   <span class="c1"># 被修改的标签</span>
</span></span><span class="line"><span class="cl">    regex:          <span class="c1"># 值是  RE2 正则表达式，用于触发修改的条件，默认值为(.*)</span>
</span></span><span class="line"><span class="cl">    modulus:        <span class="c1"># </span>
</span></span><span class="line"><span class="cl">    replacement:    <span class="c1"># 修改后的值</span>
</span></span><span class="line"><span class="cl">    action:         <span class="c1"># 修改方式，默认值为：replace</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>action</code> 指定修改方式，有以下方式（部分）</p>
<ul>
<li><code>replace</code>: 如果 <code>regex</code> 条件满足，则修改 <code>target_label</code> 指定的标签值为 <code>replacement</code> 指定的值</li>
<li><code>drop</code>: 删除</li>
</ul>
<div class="highlight" id="id-16"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">relabel_configs:
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: instance
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>.*<span class="o">)</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __address__
</span></span><span class="line"><span class="cl">   replacement: prometheus:9090
</span></span><span class="line"><span class="cl"><span class="c1"># 抓取频率设置</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __scrape_interval__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target1:9090<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: 10s  <span class="c1"># 目标主机1的抓取频率为10秒</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __scrape_interval__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target2:8080<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: 30s  <span class="c1"># 目标主机2的抓取频率为30秒</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __scrape_interval__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target3:9100<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: 15s  <span class="c1"># 目标主机3的抓取频率为15秒</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># 身份验证设置</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __scheme__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target2:8080<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: https  <span class="c1"># 目标主机2使用HTTPS协议</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1"># 请求路径和端口设置</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __metrics_path__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target1:9090<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: /metrics-path1  <span class="c1"># 目标主机1的请求路径</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __metrics_path__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target2:8080<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: /metrics-path2  <span class="c1"># 目标主机2的请求路径</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __metrics_path__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target3:9100<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: /metrics-path3  <span class="c1"># 目标主机3的请求路径</span>
</span></span><span class="line"><span class="cl"> - source_labels: <span class="o">[</span>__address__<span class="o">]</span>
</span></span><span class="line"><span class="cl">   target_label: __address__
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target2:8080<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: target2:8443  <span class="c1"># 目标主机2的端口设置为8443</span>
</span></span><span class="line"><span class="cl">   action: replace
</span></span><span class="line"><span class="cl">   regex: <span class="o">(</span>target3:9100<span class="o">)</span>
</span></span><span class="line"><span class="cl">   replacement: target3:9200  <span class="c1"># 目标主机3的端口设置为9200</span>
</span></span><span class="line"><span class="cl">   action: replace</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="指标" class="heading-element">
  <a href="#%e6%8c%87%e6%a0%87" class="heading-mark"></a>指标</h1><p>指标格式如下</p>
<div class="highlight" id="id-17"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;<span class="o">=</span>&lt;label value&gt;, ...<span class="o">}</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>metric name</code>: 指标表示特征，指标名称满足正则表达式：<code>[a-zA-Z_:][a-zA-Z0-9_:]*</code>，冒号（<code>:</code>）通常为用户自定义</li>
<li><code>label name</code>: 标签表示不同维度，标签名满足正则表达式：<code>[a-zA-Z_][a-zA-Z0-9_]*</code>, 以<code>__</code>开头为<code>prometheus</code>自用的</li>
<li><code>label value</code>: 标签值可以包含任何<code>Unicode</code>字符，如果值为空等效标签不存在</li>
</ul>
<p><code>Prometheus</code> 底层存储上其实并没有对指标做类型的区分，都是以时间序列的形式存储，但是为了方便用户的使用和理解不同监控指标之间的差异，定义了 <code>4</code> 种不同的指标类型：</p>
<ul>
<li>计数器 <code>counter</code>: 只增不减，只有重置后归零</li>
<li>仪表盘 <code>gauge</code>: 动态变化的数据，如内存占用、<code>CPU</code>利用率</li>
<li>直方图 <code>histogram</code>: 是累计直方图，可以观察到指标在各个不同的区间范围的分布情况。</li>
<li>摘要 <code>summary</code>: 百分位数，可以直观的观察到样本的中位数，<code>P90</code> 和 <code>P99</code>。</li>
</ul>
<h1 id="promql" class="heading-element">
  <a href="#promql" class="heading-mark"></a>PromQL</h1><p><code>Prometheus</code>通过指标名称（<code>metrics</code> <code>name</code>）以及对应的一组标签（<code>labelset</code>）唯一定义一条时间序列。指标名称反映了监控样本的基本标识，而<code>label</code>则在这个基本特征上为采集到的数据提供了多种特征维度。用户可以基于这些特征维度过滤，聚合，统计从而产生新的计算后的一条时间序列。<code>PromQL</code>是<code>Prometheus</code>内置的数据查询语言，其提供对时间序列数据丰富的查询，聚合以及逻辑运算能力的支持。并且被广泛应用在<code>Prometheus</code>的日常应用当中，包括对数据查询、可视化、告警处理当中。语法格式如下：</p>
<p>查看指标名称所有时间序列</p>
<div class="highlight" id="id-18"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&lt;metric name&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># 或</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>根据指标标签过滤时间序列</p>
<div class="highlight" id="id-19"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 指标之前使用逗号, 表示标签之间逻辑为和</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;!<span class="o">=</span>&lt;label value&gt;, ...<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 相等</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;<span class="o">=</span>&lt;label value&gt;, ...<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 不相等</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;!<span class="o">=</span>&lt;label value&gt;, ...<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 正则表达式相等</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;<span class="o">=</span>~&lt;label value&gt;, ...<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 正则表达式不相等</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;!~&lt;label value&gt;, ...<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 标签值之前使用 | 表示值关系为逻辑或</span>
</span></span><span class="line"><span class="cl">&lt;metric name&gt;<span class="o">{</span>&lt;label name&gt;<span class="o">=</span>&lt;label value<span class="p">|</span>label value<span class="p">|</span>...&gt;, ...<span class="o">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>根据时间过滤时间序列，按时间作为一个区间，寻找这个区间的第一个点到最后一个样本点。</p>
<div class="highlight" id="id-20"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 缺省时间时，表示查询最新样本值(瞬时向量)
</span></span><span class="line"><span class="cl">&lt;metric name&gt;{&lt;label name&gt;=&lt;label value&gt;, ...}
</span></span><span class="line"><span class="cl"># 最新指定时间内的样本值(以当前时间为基准)，
</span></span><span class="line"><span class="cl"># 时间单位为：秒(s)、分(m)、时(m)、天(d)、周(w)、年(y)
</span></span><span class="line"><span class="cl">&lt;metric name&gt;{&lt;label name&gt;=&lt;label value&gt;, ...}[time]
</span></span><span class="line"><span class="cl"># 以 time1 时间为基准，时间往前推移 time2，这段时间内，即 time2 ~ time1 时间段
</span></span><span class="line"><span class="cl">&lt;metric name&gt;{&lt;label name&gt;=&lt;label value&gt;, ...}[time1] offset time2</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="运算" class="heading-element">
  <a href="#%e8%bf%90%e7%ae%97" class="heading-mark"></a>运算</h2><p>在<code>PromQL</code>操作符中优先级由高到低为：</p>
<ul>
<li><code>^</code>(幂运算)</li>
<li><code>*</code>(乘法), <code>/</code>(除法), <code>%</code>(求余)</li>
<li><code>+</code>(加法), <code>-</code>(减法)</li>
<li><code>==</code>(相等), <code>!=</code>(不相等), <code>&lt;=</code>(大于等于), <code>&lt;</code>(大于), <code>&gt;=</code>(小于等于), <code>&gt;</code>(小于)</li>
<li><code>and</code>(逻辑和), <code>unless</code>(排除)</li>
<li><code>or</code>(逻辑或)</li>
</ul>
<p>可以使用 <code>bool</code> 修饰符改变布尔运算符的行为，结果为<code>true</code>则返回<code>1</code></p>
<div class="highlight" id="id-21"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">http_requests_total &gt; bool <span class="m">1000</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="向量匹配" class="heading-element">
  <a href="#%e5%90%91%e9%87%8f%e5%8c%b9%e9%85%8d" class="heading-mark"></a>向量匹配</h2><p>向量与向量之间进行运算操作时会基于默认的匹配规则：依次找到与左边向量元素匹配（标签完全一致）的右边向量元素进行运算，如果没找到匹配元素，则直接丢弃</p>
<ul>
<li>一对一匹配模式会从操作符两边表达式获取的瞬时向量依次比较并找到唯一匹配(标签完全一致)的样本值。
<div class="highlight" id="id-22"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vector1 &lt;operator&gt; vector2
</span></span><span class="line"><span class="cl"><span class="c1"># vector 是指标向量</span>
</span></span><span class="line"><span class="cl"><span class="c1"># &lt;bin-op&gt; 二元操作运算符</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ignoring 表示匹配时忽略的指标列表，用逗号分隔</span>
</span></span><span class="line"><span class="cl">&lt;vector expr&gt; &lt;bin-op&gt; ignoring<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> &lt;vector expr&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># on 表示只配置某些标签</span>
</span></span><span class="line"><span class="cl">&lt;vector expr&gt; &lt;bin-op&gt; on<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> &lt;vector expr&gt;</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>多对一和一对多两种匹配模式指的是“一”侧的每一个向量元素可以与&quot;多&quot;侧的多个元素匹配的情况。在这种情况下，必须使用<code>group</code>修饰符：<code>group_left</code>或者<code>group_right</code>来确定哪一个向量具有更高的基数（充当“多”的角色）
<div class="highlight" id="id-23"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># group_left 表示对左侧向量按照指定的标签列表进行聚合操作</span>
</span></span><span class="line"><span class="cl">&lt;vector expr&gt; &lt;bin-op&gt; ignoring<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> group_left<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> &lt;vector expr&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># group_right 表示对右侧向量按照指定的标签列表进行聚合操作</span>
</span></span><span class="line"><span class="cl">&lt;vector expr&gt; &lt;bin-op&gt; ignoring<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> group_right<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> &lt;vector expr&gt;
</span></span><span class="line"><span class="cl">&lt;vector expr&gt; &lt;bin-op&gt; on<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> group_left<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> &lt;vector expr&gt;
</span></span><span class="line"><span class="cl">&lt;vector expr&gt; &lt;bin-op&gt; on<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> group_right<span class="o">(</span>&lt;label list&gt;<span class="o">)</span> &lt;vector expr&gt;</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>一对多示例</p>
<div class="highlight" id="id-24"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 库内容
</span></span><span class="line"><span class="cl">A={metric=&#34;temperature&#34;, location=&#34;room1&#34;, sensor=&#34;sensor1&#34;, value=&#34;25&#34;}
</span></span><span class="line"><span class="cl">B={metric=&#34;temperature&#34;, location=&#34;room1&#34;, sensor=&#34;sensor2&#34;, value=&#34;22&#34;}
</span></span><span class="line"><span class="cl">C={metric=&#34;temperature&#34;, location=&#34;room2&#34;, sensor=&#34;sensor1&#34;, value=&#34;23&#34;}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 执行的 PromQL：
</span></span><span class="line"><span class="cl"># 指标 A 与 B 进行加法运算
</span></span><span class="line"><span class="cl"># 忽略 sensor 标签
</span></span><span class="line"><span class="cl"># 根据左侧 A 指标的 location 标签值聚合
</span></span><span class="line"><span class="cl">A + ignoring(sensor) group_left(location) B
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 结果
</span></span><span class="line"><span class="cl">result={metric=&#34;temperature&#34;, location=&#34;room1&#34;, value=&#34;47&#34;}</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="函数" class="heading-element">
  <a href="#%e5%87%bd%e6%95%b0" class="heading-mark"></a>函数</h2><blockquote>
<p><a href="https://prometheus.io/docs/prometheus/latest/querying/functions/#increase"target="_blank" rel="external nofollow noopener noreferrer">https://prometheus.io/docs/prometheus/latest/querying/functions/#increase</a></p>
</blockquote>
<ul>
<li><code>job</code>: 标签值为<code>scrape_configs.job_name</code>值，即 <code>job</code> 名称</li>
<li><code>instance</code>: 标签值为 <code>scrape_configs.job_name.static_configs.targets</code>值，即目标地址及其端口</li>
<li><code>UP{}</code>: 如果能够连接目标则值为<code>1</code>，否则为<code>0</code></li>
<li><code>scrape_duration_seconds{}</code>: 收集耗时</li>
<li><code>scrape_samples_scraped{}</code>: <code>job</code>收集的样本数量</li>
<li><code>scrape_series_added{}</code>:</li>
</ul>
<p>以下函数作用域瞬时向量。可以将瞬时表达式返回的样本数据进行聚合，形成一个新的时间序列。</p>
<ul>
<li><code>sum</code> (求和)</li>
<li><code>min</code> (最小值)</li>
<li><code>max</code> (最大值)</li>
<li><code>avg</code> (平均值)</li>
<li><code>stddev</code> (标准差)</li>
<li><code>stdvar</code> (标准方差)</li>
<li><code>count</code> (计数)</li>
<li><code>count_values</code> (对<code>value</code>进行计数)</li>
<li><code>bottomk</code> (后<code>n</code>条时序)</li>
<li><code>topk</code> (前<code>n</code>条时序)</li>
<li><code>quantile</code> (分位数)</li>
</ul>
<p>使用聚合操作的语法如下：</p>
<div class="highlight" id="id-25"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&lt;aggr-op&gt;<span class="o">([</span>parameter,<span class="o">]</span> &lt;vector expression&gt;<span class="o">)</span> <span class="o">[</span>without<span class="p">|</span>by <span class="o">(</span>&lt;label list&gt;<span class="o">)]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># aggr-op: 聚合操作函数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># parameter: 聚合操作函数参数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># vector expression: 指标名</span>
</span></span><span class="line"><span class="cl"><span class="c1"># without: 所有标签</span>
</span></span><span class="line"><span class="cl"><span class="c1"># by: 指定标签</span></span></span></code></pre></td></tr></table>
</div>
</div><p>指标增长差：</p>
<ul>
<li><code>increase(v range-vector)</code>函数其中参数<code>v</code>是一个区间向量，<code>increase</code>函数获取区间向量中的第一个后最后一个样本并返回其增长量</li>
<li><code>rate(v range-vector)</code>，在指定时间区间内，计算每秒数值差</li>
<li><code>irate(v range-vector)</code> 同上，但能反应出的是瞬时增长率</li>
<li><code>predict_linear(v range-vector, t scalar)</code>根据当前样本时间差推算未来时间内的值</li>
</ul>
<p>示例：查看 <code>CPU</code> 使用率</p>
<div class="highlight" id="id-26"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sum by<span class="o">(</span>instance<span class="o">)</span> <span class="o">(</span>irate<span class="o">(</span>node_cpu_seconds_total<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span>, mode!<span class="o">=</span><span class="s2">&#34;idle&#34;</span><span class="o">}[</span>10m15s<span class="o">]))</span> / on<span class="o">(</span>instance<span class="o">)</span> group_left sum by <span class="o">(</span>instance<span class="o">)((</span>irate<span class="o">(</span>node_cpu_seconds_total<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span><span class="o">}[</span>10m15s<span class="o">])))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># sum by(instance) (irate(node_cpu_seconds_total{instance=&#34;103.106.246.112:9100&#34;,job=&#34;node&#34;, mode!=&#34;idle&#34;}[10m15s])) </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 计算出所有 CPU 在 10m15s 内空闲时间总和</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sum 根据 instance 标签计算总值</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_cpu_seconds_total 指标是 Counter 类型，因此要使用 irate 查看</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># on(instance) group_left 表示以左边语句中的 instance 标签(主机地址)进行匹配</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># sum by (instance) ((irate(node_cpu_seconds_total{instance=&#34;103.106.246.112:9100&#34;,job=&#34;node&#34;}[10m15s])))</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 以同样的方式算出CPU 在 10m15s 内CPU使用时间总和</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># *100 是把单位换成 % 比</span></span></span></code></pre></td></tr></table>
</div>
</div><p>示例：查看目标机器 <code>CPU</code> 数量</p>
<div class="highlight" id="id-27"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 计算出机器CPU 数量 </span>
</span></span><span class="line"><span class="cl">count<span class="o">(</span>count<span class="o">(</span>node_cpu_seconds_total<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span><span class="o">})</span> by <span class="o">(</span>cpu<span class="o">))</span></span></span></code></pre></td></tr></table>
</div>
</div><p>示例：查看目标机器最近 <code>5</code> 分钟 <code>CPU</code> 使用率</p>
<div class="highlight" id="id-28"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># cpu 5 分钟负载 / cpu 核心数</span>
</span></span><span class="line"><span class="cl">avg<span class="o">(</span>node_load5<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span><span class="o">})</span> /  count<span class="o">(</span>count<span class="o">(</span>node_cpu_seconds_total<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span><span class="o">})</span> by <span class="o">(</span>cpu<span class="o">))</span> * <span class="m">100</span></span></span></code></pre></td></tr></table>
</div>
</div><p>示例：查看目标机器内存使用率</p>
<div class="highlight" id="id-29"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="cl"><span class="m">100</span> - <span class="o">((</span>node_memory_MemAvailable_bytes<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span><span class="o">})</span> / node_memory_MemTotal_bytes<span class="o">{</span><span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>,job<span class="o">=</span><span class="s2">&#34;node&#34;</span><span class="o">})</span> * <span class="m">100</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="rate" class="heading-element">
  <a href="#rate" class="heading-mark"></a>rate()</h3><p><strong><code>rate</code> 函数可以用来求指标的平均变化速率（<code>rate</code>函数<code>=</code>时间区间前后两个点的差<code>/</code>时间范围）</strong></p>
<p><img loading="lazy" src="prometheus-rate%e5%87%bd%e6%95%b0.png" alt="prometheus-rate函数.png" srcset="prometheus-rate%e5%87%bd%e6%95%b0.png?size=small, prometheus-rate%e5%87%bd%e6%95%b0.png?size=medium 1.5x, prometheus-rate%e5%87%bd%e6%95%b0.png?size=large 2x" sizes="auto" data-title="prometheus-rate函数.png" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h3 id="irate" class="heading-element">
  <a href="#irate" class="heading-mark"></a>irate()</h3><p><strong><code>irate</code> 函数可以求出来的就是瞬时变化率（时间区间内最后两个样本点的差<code>/</code>最后两个样本点的时间差）</strong></p>
<p><img loading="lazy" src="prometheus-irate%e5%87%bd%e6%95%b0.png" alt="prometheus-irate函数.png" srcset="prometheus-irate%e5%87%bd%e6%95%b0.png?size=small, prometheus-irate%e5%87%bd%e6%95%b0.png?size=medium 1.5x, prometheus-irate%e5%87%bd%e6%95%b0.png?size=large 2x" sizes="auto" data-title="prometheus-irate函数.png" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h1 id="exporter规范" class="heading-element">
  <a href="#exporter%e8%a7%84%e8%8c%83" class="heading-mark"></a>Exporter规范</h1><p>所有的<code>Exporter</code>程序都需要按照<code>Prometheus</code>的规范，返回监控的样本数据。样本数据规范如下(<code>//</code>表示注释)</p>
<div class="highlight" id="id-30"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"># HELP <span class="p">&lt;</span><span class="nt">metrics_name</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">doc_string</span><span class="p">&gt;</span> // 指标名称 说明信息
</span></span><span class="line"><span class="cl"># TYPE <span class="p">&lt;</span><span class="nt">metrics_name</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">metrics_type</span><span class="p">&gt;</span> // 指标名称 指标类型
</span></span><span class="line"><span class="cl">// 样本数据格式：指标名称 标签名与值 float64类型的指标值 时间戳
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">metrics_name</span><span class="p">&gt;</span> [{<span class="p">&lt;</span><span class="nt">label</span> <span class="na">name</span><span class="p">&gt;</span>=<span class="p">&lt;</span><span class="nt">label</span> <span class="na">value</span><span class="p">&gt;</span>}] <span class="p">&lt;</span><span class="nt">float64</span><span class="p">&gt;</span> [timestamp]</span></span></code></pre></td></tr></table>
</div>
</div><p>以 <code># HELP</code> 开头表示指标说明信息，<code>&lt;doc_string&gt;</code> 部分为使用<code>Prometheus</code>的用户提供上下文说明</p>
<p>以 <code># TYPE</code> 开头表示指标类型，如果缺省，则为 <code>UNTYPED</code>。其它类型有：</p>
<ul>
<li><code>Counter</code>: 计数器类型，只增不减，但可以重置为 <code>0</code></li>
<li><code>Gauge</code>: 动态值，表示当前的值</li>
<li><code>Histogram</code>: 在一定时间内持续采样</li>
<li><code>Summary</code>:</li>
</ul>
<p>指标名称应该反应监控对象，名称符合正则表达式<code>[a-zA-Z_:][a-zA-Z0-9_:]* </code> 如 <code>prometheus_http_requests_total</code> 表示 <code>prometheus http</code> 连接数。指标名称没有强制规范，但良好易读的指标应该满足以下条件</p>
<ul>
<li>指标名称应该有个特定于应用程序的指标前缀。如 <code>prometheus_* </code> 表示特定于<code>Prometheus</code>服务器</li>
<li>指标名称应该有个基本单位。如 <code>bytes</code>(字节) 、<code>seconds</code>(秒)、<code>info</code>(二进制文件元数据)</li>
<li>指标名称应该有被测量的名称。如 <code>cpu</code></li>
</ul>
<p>标签用于区分被测量的特征，键值标签对的每个唯一组合都代表一个新的时间序列，过多的标签会导致存储数量的增加。</p>
<ul>
<li>标签名必须满足正则表达式 <code>[a-zA-Z_][a-zA-Z0-9_]* </code>，且以 <code>__</code> 开头的标签被<code>Prometheus</code>保留使用，因此<code>api_http_requests_total{method=&quot;POST&quot;, handler=&quot;/messages&quot;}</code> 与 <code>{__name__=&quot;api_http_requests_total&quot;，method=&quot;POST&quot;, handler=&quot;/messages&quot;}</code> 两种方式均表示的同一条<code>time-series</code></li>
<li>标签值标签值可以包含任何 <code>Unicode</code> 字符，但具有空标签值的标签被视为等同于不存在的标签</li>
</ul>
<p>检测数据是一个 <code>float64</code> 值，其后有个可选精确到毫秒的时间戳，但通常是由<code>Prometheus</code>主动获取时才会获取检测指标值，因此通常是没有的</p>
<p>下面是 <code>node_exporter</code> 中的样本数据</p>
<div class="highlight" id="id-31"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost var<span class="o">]</span><span class="c1"># curl 127.0.0.1:9100/metrics</span>
</span></span><span class="line"><span class="cl"><span class="c1"># HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># TYPE go_gc_duration_seconds summary</span>
</span></span><span class="line"><span class="cl">go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">&#34;0&#34;</span><span class="o">}</span> 7.5049e-05
</span></span><span class="line"><span class="cl">go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">&#34;0.25&#34;</span><span class="o">}</span> 8.6675e-05
</span></span><span class="line"><span class="cl">go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">&#34;0.5&#34;</span><span class="o">}</span> 9.9667e-05
</span></span><span class="line"><span class="cl">go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">&#34;0.75&#34;</span><span class="o">}</span> 0.000112079
</span></span><span class="line"><span class="cl">go_gc_duration_seconds<span class="o">{</span><span class="nv">quantile</span><span class="o">=</span><span class="s2">&#34;1&#34;</span><span class="o">}</span> 0.000176933
</span></span><span class="line"><span class="cl">go_gc_duration_seconds_sum 0.384272714
</span></span><span class="line"><span class="cl">go_gc_duration_seconds_count <span class="m">3853</span>
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl"><span class="c1"># HELP go_info Information about the Go environment.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># TYPE go_info gauge</span>
</span></span><span class="line"><span class="cl">go_info<span class="o">{</span><span class="nv">version</span><span class="o">=</span><span class="s2">&#34;go1.20.4&#34;</span><span class="o">}</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># TYPE go_memstats_alloc_bytes_total counter</span>
</span></span><span class="line"><span class="cl">go_memstats_alloc_bytes_total 7.170472736e+09</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="node_exporter" class="heading-element">
  <a href="#node_exporter" class="heading-mark"></a>node_exporter</h1><div class="highlight" id="id-32"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># curl -sOL https://github.com/prometheus/node_exporter/releases/download/v1.6.0/node_exporter-1.6.0.linux-amd64.tar.gz</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># tar -zxf node_exporter-1.6.0.linux-amd64.tar.gz</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># ./node_exporter-1.6.0.linux-amd64/node_exporter --version</span>
</span></span><span class="line"><span class="cl">node_exporter, version 1.6.0 <span class="o">(</span>branch: HEAD, revision: ff7f9d69b645cb691dd3e84dc3afc88f5c006962<span class="o">)</span>
</span></span><span class="line"><span class="cl">  build user:       root@f9c3ed0cfbd3
</span></span><span class="line"><span class="cl">  build date:       20230527-12:03:54
</span></span><span class="line"><span class="cl">  go version:       go1.20.4
</span></span><span class="line"><span class="cl">  platform:         linux/amd64
</span></span><span class="line"><span class="cl">  tags:             netgo osusergo static_build
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost prometheus<span class="o">]</span><span class="c1"># cp node_exporter-1.6.0.linux-amd64/node_exporter /usr/local/bin/</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>node_exporter</code> 选项有以下规律</p>
<ul>
<li><code>--[no-]-collector.*</code>: 启用或禁用某指标收集器</li>
<li><code>--[no-]collector.disable-defaults --collector.* ...</code>: 只启用或禁用某些指标收集器</li>
<li>可以使用正则表达式缩小指标收集器的范围，如：<code>--collector.filesystem.mount-points-exclude=^/(dev|proc|sys|var/lib/docker/.+|var/lib/kubelet/.+)($|/)</code></li>
</ul>
<div class="highlight" id="id-33"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># node_exporter --help</span>
</span></span><span class="line"><span class="cl">usage: node_exporter <span class="o">[</span>&lt;flags&gt;<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Flags:
</span></span><span class="line"><span class="cl">  -h, --<span class="o">[</span>no-<span class="o">]</span><span class="nb">help</span>                Show context-sensitive <span class="nb">help</span> <span class="o">(</span>also try --help-long and --help-man<span class="o">)</span>.
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">     --web.telemetry-path<span class="o">=</span><span class="s2">&#34;/metrics&#34;</span>
</span></span><span class="line"><span class="cl">                                 Path under which to expose metrics.
</span></span><span class="line"><span class="cl">      --<span class="o">[</span>no-<span class="o">]</span>web.disable-exporter-metrics
</span></span><span class="line"><span class="cl">                                 Exclude metrics about the exporter itself <span class="o">(</span>promhttp_*, process_*, go_*<span class="o">)</span>.
</span></span><span class="line"><span class="cl">      --web.max-requests<span class="o">=</span><span class="m">40</span>      Maximum number of parallel scrape requests. Use <span class="m">0</span> to disable.
</span></span><span class="line"><span class="cl">      --<span class="o">[</span>no-<span class="o">]</span>collector.disable-defaults
</span></span><span class="line"><span class="cl">                                 Set all collectors to disabled by default.
</span></span><span class="line"><span class="cl">      --runtime.gomaxprocs<span class="o">=</span><span class="m">1</span>     The target number of CPUs Go will run on <span class="o">(</span>GOMAXPROCS<span class="o">)</span> <span class="o">(</span><span class="nv">$GOMAXPROCS</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      --<span class="o">[</span>no-<span class="o">]</span>web.systemd-socket  Use systemd socket activation listeners instead of port listeners <span class="o">(</span>Linux only<span class="o">)</span>.
</span></span><span class="line"><span class="cl">      --web.listen-address<span class="o">=</span>:9100 ...
</span></span><span class="line"><span class="cl">                                 Addresses on which to expose metrics and web interface. Repeatable <span class="k">for</span> multiple addresses.
</span></span><span class="line"><span class="cl">      --web.config.file<span class="o">=</span><span class="s2">&#34;&#34;</span>       <span class="o">[</span>EXPERIMENTAL<span class="o">]</span> Path to configuration file that can <span class="nb">enable</span> TLS or authentication. See:
</span></span><span class="line"><span class="cl">                                 https://github.com/prometheus/exporter-toolkit/blob/master/docs/web-configuration.md
</span></span><span class="line"><span class="cl">      --log.level<span class="o">=</span>info           Only log messages with the given severity or above. One of: <span class="o">[</span>debug, info, warn, error<span class="o">]</span>
</span></span><span class="line"><span class="cl">      --log.format<span class="o">=</span>logfmt        Output format of log messages. One of: <span class="o">[</span>logfmt, json<span class="o">]</span>
</span></span><span class="line"><span class="cl">      --<span class="o">[</span>no-<span class="o">]</span>version             Show application version.</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="选项与指标" class="heading-element">
  <a href="#%e9%80%89%e9%a1%b9%e4%b8%8e%e6%8c%87%e6%a0%87" class="heading-mark"></a>选项与指标</h2><p><code>node_exporter</code> 会启用以下指标</p>
<div class="highlight" id="id-34"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go_gc_duration_seconds
</span></span><span class="line"><span class="cl">go_gc_duration_seconds_count
</span></span><span class="line"><span class="cl">go_gc_duration_seconds_sum
</span></span><span class="line"><span class="cl">go_goroutines
</span></span><span class="line"><span class="cl">go_info
</span></span><span class="line"><span class="cl">go_memstats_alloc_bytes
</span></span><span class="line"><span class="cl">go_memstats_alloc_bytes_total
</span></span><span class="line"><span class="cl">go_memstats_buck_hash_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_frees_total
</span></span><span class="line"><span class="cl">go_memstats_gc_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_heap_alloc_bytes
</span></span><span class="line"><span class="cl">go_memstats_heap_idle_bytes
</span></span><span class="line"><span class="cl">go_memstats_heap_inuse_bytes
</span></span><span class="line"><span class="cl">go_memstats_heap_objects
</span></span><span class="line"><span class="cl">go_memstats_heap_released_bytes
</span></span><span class="line"><span class="cl">go_memstats_heap_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_last_gc_time_seconds
</span></span><span class="line"><span class="cl">go_memstats_lookups_total
</span></span><span class="line"><span class="cl">go_memstats_mallocs_total
</span></span><span class="line"><span class="cl">go_memstats_mcache_inuse_bytes
</span></span><span class="line"><span class="cl">go_memstats_mcache_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_mspan_inuse_bytes
</span></span><span class="line"><span class="cl">go_memstats_mspan_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_next_gc_bytes
</span></span><span class="line"><span class="cl">go_memstats_other_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_stack_inuse_bytes
</span></span><span class="line"><span class="cl">go_memstats_stack_sys_bytes
</span></span><span class="line"><span class="cl">go_memstats_sys_bytes
</span></span><span class="line"><span class="cl">go_threads
</span></span><span class="line"><span class="cl">node_exporter_build_info
</span></span><span class="line"><span class="cl">process_cpu_seconds_total
</span></span><span class="line"><span class="cl">process_max_fds
</span></span><span class="line"><span class="cl">process_open_fds
</span></span><span class="line"><span class="cl">process_resident_memory_bytes
</span></span><span class="line"><span class="cl">process_start_time_seconds
</span></span><span class="line"><span class="cl">process_virtual_memory_bytes
</span></span><span class="line"><span class="cl">process_virtual_memory_max_bytes
</span></span><span class="line"><span class="cl">promhttp_metric_handler_errors_total
</span></span><span class="line"><span class="cl">promhttp_metric_handler_requests_in_flight
</span></span><span class="line"><span class="cl">promhttp_metric_handler_requests_total</span></span></code></pre></td></tr></table>
</div>
</div><p>如果启用了其它指标（包含默认启用的），会产生以下两个指标：</p>
<div class="highlight" id="id-35"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#   </span>
</span></span><span class="line"><span class="cl"><span class="c1"># 抓取指标耗时</span>
</span></span><span class="line"><span class="cl">node_scrape_collector_duration_seconds
</span></span><span class="line"><span class="cl"><span class="c1"># 收集是否成功</span>
</span></span><span class="line"><span class="cl">node_scrape_collector_success</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cpu-相关指标与选项" class="heading-element">
  <a href="#cpu-%e7%9b%b8%e5%85%b3%e6%8c%87%e6%a0%87%e4%b8%8e%e9%80%89%e9%a1%b9" class="heading-mark"></a>CPU 相关指标与选项</h2><div class="highlight" id="id-36"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--collector.cpufreq
</span></span><span class="line"><span class="cl">--collector.cpu.guest
</span></span><span class="line"><span class="cl">--collector.cpu.info
</span></span><span class="line"><span class="cl">--collector.cpu
</span></span><span class="line"><span class="cl">  node_cpu_guest_seconds_total
</span></span><span class="line"><span class="cl">  node_cpu_seconds_total
</span></span><span class="line"><span class="cl">--collector.loadavg
</span></span><span class="line"><span class="cl">  node_load1 <span class="c1"># cpu 平均负载</span>
</span></span><span class="line"><span class="cl">  node_load5
</span></span><span class="line"><span class="cl">  node_load15</span></span></code></pre></td></tr></table>
</div>
</div><p><code>node_cpu_seconds_total</code></p>
<div class="highlight" id="id-37"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;idle&#34;</span><span class="o">}</span>       <span class="c1"># cpu 空闲时间占比 %</span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;iowait&#34;</span><span class="o">}</span>     <span class="c1"># 磁盘 IO 时间占比</span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;irq&#34;</span><span class="o">}</span>        <span class="c1"># </span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;nice&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;softirq&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;steal&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;system&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">node_cpu_seconds_total<span class="o">{</span><span class="nv">cpu</span><span class="o">=</span><span class="s2">&#34;0&#34;</span>, <span class="nv">instance</span><span class="o">=</span><span class="s2">&#34;103.106.246.112:9100&#34;</span>, <span class="nv">job</span><span class="o">=</span><span class="s2">&#34;node&#34;</span>, <span class="nv">mode</span><span class="o">=</span><span class="s2">&#34;user&#34;</span><span class="o">}</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="流量相关指标与选项" class="heading-element">
  <a href="#%e6%b5%81%e9%87%8f%e7%9b%b8%e5%85%b3%e6%8c%87%e6%a0%87%e4%b8%8e%e9%80%89%e9%a1%b9" class="heading-mark"></a>流量相关指标与选项</h2><div class="highlight" id="id-38"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--collector.ethtool
</span></span><span class="line"><span class="cl">  node_ethtool_info
</span></span><span class="line"><span class="cl">  node_ethtool_peer_ifindex
</span></span><span class="line"><span class="cl">  node_ethtool_received_gso_checksum_fixup
</span></span><span class="line"><span class="cl">  node_network_asymmetricpause_advertised
</span></span><span class="line"><span class="cl">  node_network_asymmetricpause_supported
</span></span><span class="line"><span class="cl">  node_network_autonegotiate
</span></span><span class="line"><span class="cl">  node_network_autonegotiate_advertised
</span></span><span class="line"><span class="cl">  node_network_autonegotiate_supported
</span></span><span class="line"><span class="cl">  node_network_pause_advertised
</span></span><span class="line"><span class="cl">  node_network_pause_supported
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--collector.netdev
</span></span><span class="line"><span class="cl">  node_network_receive_bytes_total
</span></span><span class="line"><span class="cl">  node_network_receive_compressed_total
</span></span><span class="line"><span class="cl">  node_network_receive_drop_total
</span></span><span class="line"><span class="cl">  node_network_receive_errs_total
</span></span><span class="line"><span class="cl">  node_network_receive_fifo_total
</span></span><span class="line"><span class="cl">  node_network_receive_frame_total
</span></span><span class="line"><span class="cl">  node_network_receive_multicast_total
</span></span><span class="line"><span class="cl">  node_network_receive_nohandler_total
</span></span><span class="line"><span class="cl">  node_network_receive_packets_total
</span></span><span class="line"><span class="cl">  node_network_transmit_bytes_total
</span></span><span class="line"><span class="cl">  node_network_transmit_carrier_total
</span></span><span class="line"><span class="cl">  node_network_transmit_colls_total
</span></span><span class="line"><span class="cl">  node_network_transmit_compressed_total
</span></span><span class="line"><span class="cl">  node_network_transmit_drop_total
</span></span><span class="line"><span class="cl">  node_network_transmit_errs_total
</span></span><span class="line"><span class="cl">  node_network_transmit_fifo_total
</span></span><span class="line"><span class="cl">  node_network_transmit_packets_total</span></span></code></pre></td></tr></table>
</div>
</div><p><code>node_network_receive_bytes_total</code></p>
<div class="highlight" id="id-39"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 类型 counter</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 网卡接收总字节数量</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="文件系统指标与选项" class="heading-element">
  <a href="#%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e6%8c%87%e6%a0%87%e4%b8%8e%e9%80%89%e9%a1%b9" class="heading-mark"></a>文件系统指标与选项</h2><div class="highlight" id="id-40"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--collector.filesystem
</span></span><span class="line"><span class="cl">  node_filesystem_avail_bytes
</span></span><span class="line"><span class="cl">  node_filesystem_device_error
</span></span><span class="line"><span class="cl">  node_filesystem_files
</span></span><span class="line"><span class="cl">  node_filesystem_files_free
</span></span><span class="line"><span class="cl">  node_filesystem_free_bytes
</span></span><span class="line"><span class="cl">  node_filesystem_readonly
</span></span><span class="line"><span class="cl">  node_filesystem_size_bytes</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight" id="id-41"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># gauge 类型指标：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_free_bytes: 文件系统剩余总字节数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_avail_bytes: 非root 可用的字节数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_device_error</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_files: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_files_free: </span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_readonly: 是否为只读</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_filesystem_size_bytes: 文件系统总字节数</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="磁盘指标与选项" class="heading-element">
  <a href="#%e7%a3%81%e7%9b%98%e6%8c%87%e6%a0%87%e4%b8%8e%e9%80%89%e9%a1%b9" class="heading-mark"></a>磁盘指标与选项</h2><div class="highlight" id="id-42"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--collector.diskstats
</span></span><span class="line"><span class="cl">  node_disk_device_mapper_info
</span></span><span class="line"><span class="cl">  node_disk_filesystem_info
</span></span><span class="line"><span class="cl">  node_disk_info
</span></span><span class="line"><span class="cl">  node_disk_io_now
</span></span><span class="line"><span class="cl">  node_disk_io_time_seconds_total
</span></span><span class="line"><span class="cl">  node_disk_io_time_weighted_seconds_total
</span></span><span class="line"><span class="cl">  node_disk_read_bytes_total
</span></span><span class="line"><span class="cl">  node_disk_reads_completed_total
</span></span><span class="line"><span class="cl">  node_disk_reads_merged_total
</span></span><span class="line"><span class="cl">  node_disk_read_time_seconds_total
</span></span><span class="line"><span class="cl">  node_disk_writes_completed_total
</span></span><span class="line"><span class="cl">  node_disk_writes_merged_total
</span></span><span class="line"><span class="cl">  node_disk_write_time_seconds_total
</span></span><span class="line"><span class="cl">  node_disk_written_bytes_total</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight" id="id-43"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># gauge 类型指标：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_scrape_collector_success: 收集指标耗时</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_scrape_collector_success: 收集是否成功</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_device_mapper_info: lvm 信息</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_filesystem_info: 文件系统信息</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_info: 从/sys/block/ 获取的块设备信息</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_io_now: 块设备正在进行 I/O 数量</span>
</span></span><span class="line"><span class="cl"><span class="c1"># counter 类型指标:</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_io_time_seconds_total: I/O 总耗时时间</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_io_time_weighted_seconds_total:</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_read_bytes_total: 成功读取的总字节数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_read_time_seconds_total: 读取操作总时间(秒)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_reads_completed_total: 成功读取总次数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_reads_merged_total: 合并读取总次数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_written_bytes_total: 成功写入的总字节数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_write_time_seconds_total: 写入操作总时间(秒)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_writes_completed_total: 成功写入总次数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node_disk_writes_merged_total: 合并写入总次数</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="内存指标与选项" class="heading-element">
  <a href="#%e5%86%85%e5%ad%98%e6%8c%87%e6%a0%87%e4%b8%8e%e9%80%89%e9%a1%b9" class="heading-mark"></a>内存指标与选项</h2><div class="highlight" id="id-44"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--collector.meminfo
</span></span><span class="line"><span class="cl">  node_memory_Active_anon_bytes
</span></span><span class="line"><span class="cl">  node_memory_Active_bytes
</span></span><span class="line"><span class="cl">  node_memory_Active_file_bytes
</span></span><span class="line"><span class="cl">  node_memory_AnonHugePages_bytes
</span></span><span class="line"><span class="cl">  node_memory_AnonPages_bytes
</span></span><span class="line"><span class="cl">  node_memory_Bounce_bytes
</span></span><span class="line"><span class="cl">  node_memory_Buffers_bytes
</span></span><span class="line"><span class="cl">  node_memory_Cached_bytes
</span></span><span class="line"><span class="cl">  node_memory_CmaFree_bytes
</span></span><span class="line"><span class="cl">  node_memory_CmaTotal_bytes
</span></span><span class="line"><span class="cl">  node_memory_CommitLimit_bytes
</span></span><span class="line"><span class="cl">  node_memory_Committed_AS_bytes
</span></span><span class="line"><span class="cl">  node_memory_DirectMap2M_bytes
</span></span><span class="line"><span class="cl">  node_memory_DirectMap4k_bytes
</span></span><span class="line"><span class="cl">  node_memory_Dirty_bytes
</span></span><span class="line"><span class="cl">  node_memory_HardwareCorrupted_bytes
</span></span><span class="line"><span class="cl">  node_memory_HugePages_Free
</span></span><span class="line"><span class="cl">  node_memory_Hugepagesize_bytes
</span></span><span class="line"><span class="cl">  node_memory_HugePages_Rsvd
</span></span><span class="line"><span class="cl">  node_memory_HugePages_Surp
</span></span><span class="line"><span class="cl">  node_memory_HugePages_Total
</span></span><span class="line"><span class="cl">  node_memory_Inactive_anon_bytes
</span></span><span class="line"><span class="cl">  node_memory_Inactive_bytes
</span></span><span class="line"><span class="cl">  node_memory_Inactive_file_bytes
</span></span><span class="line"><span class="cl">  node_memory_KernelStack_bytes
</span></span><span class="line"><span class="cl">  node_memory_Mapped_bytes
</span></span><span class="line"><span class="cl">  node_memory_MemAvailable_bytes
</span></span><span class="line"><span class="cl">  node_memory_MemFree_bytes
</span></span><span class="line"><span class="cl">  node_memory_MemTotal_bytes
</span></span><span class="line"><span class="cl">  node_memory_Mlocked_bytes
</span></span><span class="line"><span class="cl">  node_memory_NFS_Unstable_bytes
</span></span><span class="line"><span class="cl">  node_memory_PageTables_bytes
</span></span><span class="line"><span class="cl">  node_memory_Percpu_bytes
</span></span><span class="line"><span class="cl">  node_memory_Shmem_bytes
</span></span><span class="line"><span class="cl">  node_memory_Slab_bytes
</span></span><span class="line"><span class="cl">  node_memory_SReclaimable_bytes
</span></span><span class="line"><span class="cl">  node_memory_SUnreclaim_bytes
</span></span><span class="line"><span class="cl">  node_memory_SwapCached_bytes
</span></span><span class="line"><span class="cl">  node_memory_SwapFree_bytes
</span></span><span class="line"><span class="cl">  node_memory_SwapTotal_bytes
</span></span><span class="line"><span class="cl">  node_memory_Unevictable_bytes
</span></span><span class="line"><span class="cl">  node_memory_VmallocChunk_bytes
</span></span><span class="line"><span class="cl">  node_memory_VmallocTotal_bytes
</span></span><span class="line"><span class="cl">  node_memory_VmallocUsed_bytes
</span></span><span class="line"><span class="cl">  node_memory_Writeback_bytes
</span></span><span class="line"><span class="cl">  node_memory_WritebackTmp_bytes
</span></span><span class="line"><span class="cl">--collector.meminfo_numa
</span></span><span class="line"><span class="cl">  node_memory_numa_Active
</span></span><span class="line"><span class="cl">  node_memory_numa_Active_anon
</span></span><span class="line"><span class="cl">  node_memory_numa_Active_file
</span></span><span class="line"><span class="cl">  node_memory_numa_AnonHugePages
</span></span><span class="line"><span class="cl">  node_memory_numa_AnonPages
</span></span><span class="line"><span class="cl">  node_memory_numa_Bounce
</span></span><span class="line"><span class="cl">  node_memory_numa_Dirty
</span></span><span class="line"><span class="cl">  node_memory_numa_FilePages
</span></span><span class="line"><span class="cl">  node_memory_numa_HugePages_Free
</span></span><span class="line"><span class="cl">  node_memory_numa_HugePages_Surp
</span></span><span class="line"><span class="cl">  node_memory_numa_HugePages_Total
</span></span><span class="line"><span class="cl">  node_memory_numa_Inactive
</span></span><span class="line"><span class="cl">  node_memory_numa_Inactive_anon
</span></span><span class="line"><span class="cl">  node_memory_numa_Inactive_file
</span></span><span class="line"><span class="cl">  node_memory_numa_interleave_hit_total
</span></span><span class="line"><span class="cl">  node_memory_numa_KernelStack
</span></span><span class="line"><span class="cl">  node_memory_numa_local_node_total
</span></span><span class="line"><span class="cl">  node_memory_numa_Mapped
</span></span><span class="line"><span class="cl">  node_memory_numa_MemFree
</span></span><span class="line"><span class="cl">  node_memory_numa_MemTotal
</span></span><span class="line"><span class="cl">  node_memory_numa_MemUsed
</span></span><span class="line"><span class="cl">  node_memory_numa_Mlocked
</span></span><span class="line"><span class="cl">  node_memory_numa_NFS_Unstable
</span></span><span class="line"><span class="cl">  node_memory_numa_numa_foreign_total
</span></span><span class="line"><span class="cl">  node_memory_numa_numa_hit_total
</span></span><span class="line"><span class="cl">  node_memory_numa_numa_miss_total
</span></span><span class="line"><span class="cl">  node_memory_numa_other_node_total
</span></span><span class="line"><span class="cl">  node_memory_numa_PageTables
</span></span><span class="line"><span class="cl">  node_memory_numa_Shmem
</span></span><span class="line"><span class="cl">  node_memory_numa_Slab
</span></span><span class="line"><span class="cl">  node_memory_numa_SReclaimable
</span></span><span class="line"><span class="cl">  node_memory_numa_SUnreclaim
</span></span><span class="line"><span class="cl">  node_memory_numa_Unevictable
</span></span><span class="line"><span class="cl">  node_memory_numa_Writeback
</span></span><span class="line"><span class="cl">  node_memory_numa_WritebackTmp</span></span></code></pre></td></tr></table>
</div>
</div><p><code>node_memory_MemAvailable_bytes</code></p>
<div class="highlight" id="id-45"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 内存可用字节，包含共用内存</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 指标类型：gauge</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>node_memory_MemTotal_bytes</code></p>
<div class="highlight" id="id-46"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 内存大小，单位字节
</span></span><span class="line"><span class="cl"># 指标类型：gauge</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="其它选项与指标" class="heading-element">
  <a href="#%e5%85%b6%e5%ae%83%e9%80%89%e9%a1%b9%e4%b8%8e%e6%8c%87%e6%a0%87" class="heading-mark"></a>其它选项与指标</h2><div class="highlight" id="id-47"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--collector.netclass.ignore-invalid-speed
</span></span><span class="line"><span class="cl">--collector.netclass.netlink
</span></span><span class="line"><span class="cl">--collector.netclass_rtnl.with-stats
</span></span><span class="line"><span class="cl">--collector.netdev.address-info
</span></span><span class="line"><span class="cl">--collector.netdev.enable-detailed-metrics
</span></span><span class="line"><span class="cl">--collector.netdev.netlink
</span></span><span class="line"><span class="cl">--collector.ntp.server-is-local
</span></span><span class="line"><span class="cl">--collector.perf.disable-hardware-profilers
</span></span><span class="line"><span class="cl">--collector.perf.disable-software-profilers
</span></span><span class="line"><span class="cl">--collector.perf.disable-cache-profilers
</span></span><span class="line"><span class="cl">--collector.rapl.enable-zone-label
</span></span><span class="line"><span class="cl">--collector.stat.softirq
</span></span><span class="line"><span class="cl">--collector.systemd.enable-task-metrics
</span></span><span class="line"><span class="cl">--collector.systemd.enable-restarts-metrics
</span></span><span class="line"><span class="cl">--collector.systemd.enable-start-time-metrics
</span></span><span class="line"><span class="cl">--collector.arp
</span></span><span class="line"><span class="cl">  node_arp_entries
</span></span><span class="line"><span class="cl">--collector.bcache
</span></span><span class="line"><span class="cl">--collector.bonding
</span></span><span class="line"><span class="cl">--collector.btrfs
</span></span><span class="line"><span class="cl">--collector.buddyinfo
</span></span><span class="line"><span class="cl">  node_buddyinfo_blocks
</span></span><span class="line"><span class="cl">--collector.cgroups
</span></span><span class="line"><span class="cl">  node_cgroups_cgroups
</span></span><span class="line"><span class="cl">  node_cgroups_enabled
</span></span><span class="line"><span class="cl">--collector.conntrack
</span></span><span class="line"><span class="cl">  node_nf_conntrack_entries
</span></span><span class="line"><span class="cl">  node_nf_conntrack_entries_limit
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_drop
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_early_drop
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_found
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_ignore
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_insert
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_insert_failed
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_invalid
</span></span><span class="line"><span class="cl">  node_nf_conntrack_stat_search_restart
</span></span><span class="line"><span class="cl">--collector.dmi
</span></span><span class="line"><span class="cl">--collector.drbd
</span></span><span class="line"><span class="cl">--collector.drm
</span></span><span class="line"><span class="cl">--collector.edac
</span></span><span class="line"><span class="cl">--collector.entropy
</span></span><span class="line"><span class="cl">  node_entropy_available_bits
</span></span><span class="line"><span class="cl">  node_entropy_pool_size_bits
</span></span><span class="line"><span class="cl">--collector.fibrechannel
</span></span><span class="line"><span class="cl">--collector.filefd
</span></span><span class="line"><span class="cl">  node_filefd_allocated
</span></span><span class="line"><span class="cl">  node_filefd_maximum
</span></span><span class="line"><span class="cl">--collector.hwmon
</span></span><span class="line"><span class="cl">  node_hwmon_chip_names
</span></span><span class="line"><span class="cl">  node_hwmon_sensor_label
</span></span><span class="line"><span class="cl">  node_hwmon_temp_celsius
</span></span><span class="line"><span class="cl">  node_hwmon_temp_crit_alarm_celsius
</span></span><span class="line"><span class="cl">  node_hwmon_temp_crit_celsius
</span></span><span class="line"><span class="cl">  node_hwmon_temp_max_celsius
</span></span><span class="line"><span class="cl">--collector.infiniband
</span></span><span class="line"><span class="cl">--collector.interrupts
</span></span><span class="line"><span class="cl">  node_interrupts_total
</span></span><span class="line"><span class="cl">--collector.ipvs
</span></span><span class="line"><span class="cl">--collector.ksmd
</span></span><span class="line"><span class="cl">  node_ksmd_full_scans_total
</span></span><span class="line"><span class="cl">  node_ksmd_merge_across_nodes
</span></span><span class="line"><span class="cl">  node_ksmd_pages_shared
</span></span><span class="line"><span class="cl">  node_ksmd_pages_sharing
</span></span><span class="line"><span class="cl">  node_ksmd_pages_to_scan
</span></span><span class="line"><span class="cl">  node_ksmd_pages_unshared
</span></span><span class="line"><span class="cl">  node_ksmd_pages_volatile
</span></span><span class="line"><span class="cl">  node_ksmd_run
</span></span><span class="line"><span class="cl">  node_ksmd_sleep_seconds
</span></span><span class="line"><span class="cl">--collector.lnstat
</span></span><span class="line"><span class="cl">  node_lnstat_allocs_total
</span></span><span class="line"><span class="cl">  node_lnstat_delete_list_total
</span></span><span class="line"><span class="cl">  node_lnstat_delete_total
</span></span><span class="line"><span class="cl">  node_lnstat_destroys_total
</span></span><span class="line"><span class="cl">  node_lnstat_drop_total
</span></span><span class="line"><span class="cl">  node_lnstat_early_drop_total
</span></span><span class="line"><span class="cl">  node_lnstat_entries_total
</span></span><span class="line"><span class="cl">  node_lnstat_expect_create_total
</span></span><span class="line"><span class="cl">  node_lnstat_expect_delete_total
</span></span><span class="line"><span class="cl">  node_lnstat_expect_new_total
</span></span><span class="line"><span class="cl">  node_lnstat_forced_gc_runs_total
</span></span><span class="line"><span class="cl">  node_lnstat_found_total
</span></span><span class="line"><span class="cl">  node_lnstat_gc_dst_overflow_total
</span></span><span class="line"><span class="cl">  node_lnstat_gc_goal_miss_total
</span></span><span class="line"><span class="cl">  node_lnstat_gc_ignored_total
</span></span><span class="line"><span class="cl">  node_lnstat_gc_total_total
</span></span><span class="line"><span class="cl">  node_lnstat_hash_grows_total
</span></span><span class="line"><span class="cl">  node_lnstat_hits_total
</span></span><span class="line"><span class="cl">  node_lnstat_icmp_error_total
</span></span><span class="line"><span class="cl">  node_lnstat_ignore_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_brd_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_hit_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_hlist_search_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_martian_dst_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_martian_src_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_no_route_total
</span></span><span class="line"><span class="cl">  node_lnstat_insert_failed_total
</span></span><span class="line"><span class="cl">  node_lnstat_insert_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_slow_mc_total
</span></span><span class="line"><span class="cl">  node_lnstat_in_slow_tot_total
</span></span><span class="line"><span class="cl">  node_lnstat_invalid_total
</span></span><span class="line"><span class="cl">  node_lnstat_lookups_total
</span></span><span class="line"><span class="cl">  node_lnstat_new_total
</span></span><span class="line"><span class="cl">  node_lnstat_out_hit_total
</span></span><span class="line"><span class="cl">  node_lnstat_out_hlist_search_total
</span></span><span class="line"><span class="cl">  node_lnstat_out_slow_mc_total
</span></span><span class="line"><span class="cl">  node_lnstat_out_slow_tot_total
</span></span><span class="line"><span class="cl">  node_lnstat_periodic_gc_runs_total
</span></span><span class="line"><span class="cl">  node_lnstat_rcv_probes_mcast_total
</span></span><span class="line"><span class="cl">  node_lnstat_rcv_probes_ucast_total
</span></span><span class="line"><span class="cl">  node_lnstat_res_failed_total
</span></span><span class="line"><span class="cl">  node_lnstat_searched_total
</span></span><span class="line"><span class="cl">  node_lnstat_search_restart_total
</span></span><span class="line"><span class="cl">  node_lnstat_unresolved_discards_total
</span></span><span class="line"><span class="cl">--collector.logind
</span></span><span class="line"><span class="cl">  node_logind_sessions
</span></span><span class="line"><span class="cl">--collector.mdadm
</span></span><span class="line"><span class="cl">--collector.mountstats
</span></span><span class="line"><span class="cl">--collector.netclass
</span></span><span class="line"><span class="cl">  node_network_address_assign_type
</span></span><span class="line"><span class="cl">  node_network_carrier
</span></span><span class="line"><span class="cl">  node_network_carrier_changes_total
</span></span><span class="line"><span class="cl">  node_network_device_id
</span></span><span class="line"><span class="cl">  node_network_dormant
</span></span><span class="line"><span class="cl">  node_network_flags
</span></span><span class="line"><span class="cl">  node_network_iface_id
</span></span><span class="line"><span class="cl">  node_network_iface_link
</span></span><span class="line"><span class="cl">  node_network_iface_link_mode
</span></span><span class="line"><span class="cl">  node_network_info
</span></span><span class="line"><span class="cl">  node_network_mtu_bytes
</span></span><span class="line"><span class="cl">  node_network_net_dev_group
</span></span><span class="line"><span class="cl">  node_network_protocol_type
</span></span><span class="line"><span class="cl">  node_network_speed_bytes
</span></span><span class="line"><span class="cl">  node_network_transmit_queue_length
</span></span><span class="line"><span class="cl">  node_network_up
</span></span><span class="line"><span class="cl">--collector.netstat
</span></span><span class="line"><span class="cl">  node_netstat_Icmp6_InErrors
</span></span><span class="line"><span class="cl">  node_netstat_Icmp6_InMsgs
</span></span><span class="line"><span class="cl">  node_netstat_Icmp6_OutMsgs
</span></span><span class="line"><span class="cl">  node_netstat_Icmp_InErrors
</span></span><span class="line"><span class="cl">  node_netstat_Icmp_InMsgs
</span></span><span class="line"><span class="cl">  node_netstat_Icmp_OutMsgs
</span></span><span class="line"><span class="cl">  node_netstat_Ip6_InOctets
</span></span><span class="line"><span class="cl">  node_netstat_Ip6_OutOctets
</span></span><span class="line"><span class="cl">  node_netstat_IpExt_InOctets
</span></span><span class="line"><span class="cl">  node_netstat_IpExt_OutOctets
</span></span><span class="line"><span class="cl">  node_netstat_Ip_Forwarding
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_ActiveOpens
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_CurrEstab
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_ListenDrops
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_ListenOverflows
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_SyncookiesFailed
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_SyncookiesRecv
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_SyncookiesSent
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_TCPSynRetrans
</span></span><span class="line"><span class="cl">  node_netstat_TcpExt_TCPTimeouts
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_InErrs
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_InSegs
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_OutRsts
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_OutSegs
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_PassiveOpens
</span></span><span class="line"><span class="cl">  node_netstat_Tcp_RetransSegs
</span></span><span class="line"><span class="cl">  node_netstat_Udp6_InDatagrams
</span></span><span class="line"><span class="cl">  node_netstat_Udp6_InErrors
</span></span><span class="line"><span class="cl">  node_netstat_Udp6_NoPorts
</span></span><span class="line"><span class="cl">  node_netstat_Udp6_OutDatagrams
</span></span><span class="line"><span class="cl">  node_netstat_Udp6_RcvbufErrors
</span></span><span class="line"><span class="cl">  node_netstat_Udp6_SndbufErrors
</span></span><span class="line"><span class="cl">  node_netstat_Udp_InDatagrams
</span></span><span class="line"><span class="cl">  node_netstat_Udp_InErrors
</span></span><span class="line"><span class="cl">  node_netstat_UdpLite6_InErrors
</span></span><span class="line"><span class="cl">  node_netstat_UdpLite_InErrors
</span></span><span class="line"><span class="cl">  node_netstat_Udp_NoPorts
</span></span><span class="line"><span class="cl">  node_netstat_Udp_OutDatagrams
</span></span><span class="line"><span class="cl">  node_netstat_Udp_RcvbufErrors
</span></span><span class="line"><span class="cl">  node_netstat_Udp_SndbufErrors
</span></span><span class="line"><span class="cl">--collector.network_route
</span></span><span class="line"><span class="cl">  node_network_route_info
</span></span><span class="line"><span class="cl">  node_network_routes
</span></span><span class="line"><span class="cl">--collector.nfs
</span></span><span class="line"><span class="cl">--collector.nfsd
</span></span><span class="line"><span class="cl">--collector.ntp
</span></span><span class="line"><span class="cl">--collector.nvme
</span></span><span class="line"><span class="cl">--collector.os
</span></span><span class="line"><span class="cl">  node_os_info
</span></span><span class="line"><span class="cl">  node_os_version
</span></span><span class="line"><span class="cl">--collector.perf
</span></span><span class="line"><span class="cl">  node_perf_context_switches_total
</span></span><span class="line"><span class="cl">  node_perf_cpu_migrations_total
</span></span><span class="line"><span class="cl">  node_perf_major_faults_total
</span></span><span class="line"><span class="cl">  node_perf_minor_faults_total
</span></span><span class="line"><span class="cl">  node_perf_page_faults_total
</span></span><span class="line"><span class="cl">--collector.powersupplyclass
</span></span><span class="line"><span class="cl">--collector.pressure
</span></span><span class="line"><span class="cl">--collector.processes
</span></span><span class="line"><span class="cl">  node_processes_max_processes
</span></span><span class="line"><span class="cl">  node_processes_max_threads
</span></span><span class="line"><span class="cl">  node_processes_pids
</span></span><span class="line"><span class="cl">  node_processes_state
</span></span><span class="line"><span class="cl">  node_processes_threads
</span></span><span class="line"><span class="cl">  node_processes_threads_state
</span></span><span class="line"><span class="cl">--collector.qdisc
</span></span><span class="line"><span class="cl">  node_qdisc_backlog
</span></span><span class="line"><span class="cl">  node_qdisc_bytes_total
</span></span><span class="line"><span class="cl">  node_qdisc_current_queue_length
</span></span><span class="line"><span class="cl">  node_qdisc_drops_total
</span></span><span class="line"><span class="cl">  node_qdisc_overlimits_total
</span></span><span class="line"><span class="cl">  node_qdisc_packets_total
</span></span><span class="line"><span class="cl">  node_qdisc_requeues_total
</span></span><span class="line"><span class="cl">--collector.rapl
</span></span><span class="line"><span class="cl">  node_rapl_core_joules_total
</span></span><span class="line"><span class="cl">  node_rapl_dram_joules_total
</span></span><span class="line"><span class="cl">  node_rapl_package_joules_total
</span></span><span class="line"><span class="cl">--collector.runit
</span></span><span class="line"><span class="cl">--collector.schedstat
</span></span><span class="line"><span class="cl">  node_schedstat_running_seconds_total
</span></span><span class="line"><span class="cl">  node_schedstat_timeslices_total
</span></span><span class="line"><span class="cl">  node_schedstat_waiting_seconds_total
</span></span><span class="line"><span class="cl">--collector.selinux
</span></span><span class="line"><span class="cl">  node_selinux_config_mode
</span></span><span class="line"><span class="cl">  node_selinux_current_mode
</span></span><span class="line"><span class="cl">  node_selinux_enabled
</span></span><span class="line"><span class="cl">--collector.slabinfo
</span></span><span class="line"><span class="cl">  node_slabinfo_active_objects
</span></span><span class="line"><span class="cl">  node_slabinfo_objects
</span></span><span class="line"><span class="cl">  node_slabinfo_object_size_bytes
</span></span><span class="line"><span class="cl">  node_slabinfo_objects_per_slab
</span></span><span class="line"><span class="cl">  node_slabinfo_pages_per_slab
</span></span><span class="line"><span class="cl">--collector.sockstat
</span></span><span class="line"><span class="cl">  node_sockstat_FRAG6_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_FRAG6_memory
</span></span><span class="line"><span class="cl">  node_sockstat_FRAG_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_FRAG_memory
</span></span><span class="line"><span class="cl">  node_sockstat_RAW6_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_RAW_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_sockets_used
</span></span><span class="line"><span class="cl">  node_sockstat_TCP6_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_TCP_alloc
</span></span><span class="line"><span class="cl">  node_sockstat_TCP_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_TCP_mem
</span></span><span class="line"><span class="cl">  node_sockstat_TCP_mem_bytes
</span></span><span class="line"><span class="cl">  node_sockstat_TCP_orphan
</span></span><span class="line"><span class="cl">  node_sockstat_TCP_tw
</span></span><span class="line"><span class="cl">  node_sockstat_UDP6_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_UDP_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_UDPLITE6_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_UDPLITE_inuse
</span></span><span class="line"><span class="cl">  node_sockstat_UDP_mem
</span></span><span class="line"><span class="cl">  node_sockstat_UDP_mem_bytes
</span></span><span class="line"><span class="cl">--collector.softirqs
</span></span><span class="line"><span class="cl">  node_softirqs_functions_total
</span></span><span class="line"><span class="cl">--collector.softnet
</span></span><span class="line"><span class="cl">  node_softnet_backlog_len
</span></span><span class="line"><span class="cl">  node_softnet_cpu_collision_total
</span></span><span class="line"><span class="cl">  node_softnet_dropped_total
</span></span><span class="line"><span class="cl">  node_softnet_flow_limit_count_total
</span></span><span class="line"><span class="cl">  node_softnet_processed_total
</span></span><span class="line"><span class="cl">  node_softnet_received_rps_total
</span></span><span class="line"><span class="cl">  node_softnet_times_squeezed_total
</span></span><span class="line"><span class="cl">--collector.stat
</span></span><span class="line"><span class="cl">  node_boot_time_seconds
</span></span><span class="line"><span class="cl">  node_context_switches_total
</span></span><span class="line"><span class="cl">  node_forks_total
</span></span><span class="line"><span class="cl">  node_intr_total
</span></span><span class="line"><span class="cl">  node_procs_blocked
</span></span><span class="line"><span class="cl">  node_procs_running
</span></span><span class="line"><span class="cl">--collector.supervisord
</span></span><span class="line"><span class="cl">--collector.sysctl
</span></span><span class="line"><span class="cl">--collector.systemd
</span></span><span class="line"><span class="cl">  node_systemd_socket_accepted_connections_total
</span></span><span class="line"><span class="cl">  node_systemd_socket_current_connections
</span></span><span class="line"><span class="cl">  node_systemd_system_running
</span></span><span class="line"><span class="cl">  node_systemd_timer_last_trigger_seconds
</span></span><span class="line"><span class="cl">  node_systemd_units
</span></span><span class="line"><span class="cl">  node_systemd_unit_state
</span></span><span class="line"><span class="cl">  node_systemd_version
</span></span><span class="line"><span class="cl">--collector.tapestats
</span></span><span class="line"><span class="cl">--collector.tcpstat
</span></span><span class="line"><span class="cl">  node_tcp_connection_states
</span></span><span class="line"><span class="cl">--collector.textfile
</span></span><span class="line"><span class="cl">  node_textfile_scrape_error
</span></span><span class="line"><span class="cl">--collector.thermal_zone
</span></span><span class="line"><span class="cl">--collector.time
</span></span><span class="line"><span class="cl">  node_time_clocksource_available_info
</span></span><span class="line"><span class="cl">  node_time_clocksource_current_info
</span></span><span class="line"><span class="cl">  node_time_seconds
</span></span><span class="line"><span class="cl">  node_time_zone_offset_seconds
</span></span><span class="line"><span class="cl">--collector.timex
</span></span><span class="line"><span class="cl">  node_timex_estimated_error_seconds
</span></span><span class="line"><span class="cl">  node_timex_frequency_adjustment_ratio
</span></span><span class="line"><span class="cl">  node_timex_loop_time_constant
</span></span><span class="line"><span class="cl">  node_timex_maxerror_seconds
</span></span><span class="line"><span class="cl">  node_timex_offset_seconds
</span></span><span class="line"><span class="cl">  node_timex_pps_calibration_total
</span></span><span class="line"><span class="cl">  node_timex_pps_error_total
</span></span><span class="line"><span class="cl">  node_timex_pps_frequency_hertz
</span></span><span class="line"><span class="cl">  node_timex_pps_jitter_seconds
</span></span><span class="line"><span class="cl">  node_timex_pps_jitter_total
</span></span><span class="line"><span class="cl">  node_timex_pps_shift_seconds
</span></span><span class="line"><span class="cl">  node_timex_pps_stability_exceeded_total
</span></span><span class="line"><span class="cl">  node_timex_pps_stability_hertz
</span></span><span class="line"><span class="cl">  node_timex_status
</span></span><span class="line"><span class="cl">  node_timex_sync_status
</span></span><span class="line"><span class="cl">  node_timex_tai_offset_seconds
</span></span><span class="line"><span class="cl">  node_timex_tick_seconds
</span></span><span class="line"><span class="cl">--collector.udp_queues
</span></span><span class="line"><span class="cl">  node_udp_queues
</span></span><span class="line"><span class="cl">--collector.uname
</span></span><span class="line"><span class="cl">  node_uname_info
</span></span><span class="line"><span class="cl">--collector.vmstat
</span></span><span class="line"><span class="cl">  node_vmstat_pgfault
</span></span><span class="line"><span class="cl">  node_vmstat_pgmajfault
</span></span><span class="line"><span class="cl">  node_vmstat_pgpgin
</span></span><span class="line"><span class="cl">  node_vmstat_pgpgout
</span></span><span class="line"><span class="cl">  node_vmstat_pswpin
</span></span><span class="line"><span class="cl">  node_vmstat_pswpout
</span></span><span class="line"><span class="cl">--collector.wifi
</span></span><span class="line"><span class="cl">--collector.xfs
</span></span><span class="line"><span class="cl">  node_xfs_allocation_btree_compares_total
</span></span><span class="line"><span class="cl">  node_xfs_allocation_btree_lookups_total
</span></span><span class="line"><span class="cl">  node_xfs_allocation_btree_records_deleted_total
</span></span><span class="line"><span class="cl">  node_xfs_allocation_btree_records_inserted_total
</span></span><span class="line"><span class="cl">  node_xfs_block_map_btree_compares_total
</span></span><span class="line"><span class="cl">  node_xfs_block_map_btree_lookups_total
</span></span><span class="line"><span class="cl">  node_xfs_block_map_btree_records_deleted_total
</span></span><span class="line"><span class="cl">  node_xfs_block_map_btree_records_inserted_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_extent_list_compares_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_extent_list_deletions_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_extent_list_insertions_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_extent_list_lookups_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_reads_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_unmaps_total
</span></span><span class="line"><span class="cl">  node_xfs_block_mapping_writes_total
</span></span><span class="line"><span class="cl">  node_xfs_directory_operation_create_total
</span></span><span class="line"><span class="cl">  node_xfs_directory_operation_getdents_total
</span></span><span class="line"><span class="cl">  node_xfs_directory_operation_lookup_total
</span></span><span class="line"><span class="cl">  node_xfs_directory_operation_remove_total
</span></span><span class="line"><span class="cl">  node_xfs_extent_allocation_blocks_allocated_total
</span></span><span class="line"><span class="cl">  node_xfs_extent_allocation_blocks_freed_total
</span></span><span class="line"><span class="cl">  node_xfs_extent_allocation_extents_allocated_total
</span></span><span class="line"><span class="cl">  node_xfs_extent_allocation_extents_freed_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_attempts_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_attribute_changes_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_duplicates_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_found_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_missed_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_reclaims_total
</span></span><span class="line"><span class="cl">  node_xfs_inode_operation_recycled_total
</span></span><span class="line"><span class="cl">  node_xfs_read_calls_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_active_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_allocate_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_get_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_hold_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_reclaim_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_release_total
</span></span><span class="line"><span class="cl">  node_xfs_vnode_remove_total
</span></span><span class="line"><span class="cl">  node_xfs_write_calls_total
</span></span><span class="line"><span class="cl">--collector.zfs
</span></span><span class="line"><span class="cl">--collector.zoneinfo
</span></span><span class="line"><span class="cl">  node_zoneinfo_high_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_low_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_managed_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_min_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_active_anon_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_active_file_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_anon_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_anon_transparent_hugepages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_dirtied_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_dirty_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_file_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_free_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_inactive_anon_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_inactive_file_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_isolated_anon_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_isolated_file_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_kernel_stacks
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_mapped_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_shmem_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_slab_reclaimable_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_slab_unreclaimable_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_unevictable_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_writeback_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_nr_written_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_numa_foreign_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_numa_hit_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_numa_interleave_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_numa_local_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_numa_miss_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_numa_other_total
</span></span><span class="line"><span class="cl">  node_zoneinfo_present_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_scanned_pages
</span></span><span class="line"><span class="cl">  node_zoneinfo_spanned_pages</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="error" class="heading-element">
  <a href="#error" class="heading-mark"></a>error</h1><h2 id="warning-error-fetching-server-time-detected-37920000076293945-seconds-time-difference-between-your-browser-and-the-server-prometheus-relies-on-accurate-time-and-time-drift-might-cause-unexpected-query-results" class="heading-element">
  <a href="#warning-error-fetching-server-time-detected-37920000076293945-seconds-time-difference-between-your-browser-and-the-server-prometheus-relies-on-accurate-time-and-time-drift-might-cause-unexpected-query-results" class="heading-mark"></a>Warning: Error fetching server time: Detected 37.920000076293945 seconds time difference between your browser and the server. Prometheus relies on accurate time and time drift might cause unexpected query results.</h2></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2024-02-09 13:45:16">更新于 2024-02-09&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/prometheus/" class="post-tag" title="标签 - prometheus">prometheus</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/harbor/" class="post-nav-item" rel="prev" title="harbor"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>harbor</a>
      <a href="/dockerdConfig/" class="post-nav-item" rel="next" title="dockerd 配置项">dockerd 配置项<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content always-active" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.115.3"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.1"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="/lib/pace/themes/blue/pace-theme-minimal.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/lightgallery/lightgallery.min.js" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js" defer></script><script src="/lib/pangu/pangu.min.js" defer></script><script src="/lib/pace/pace.min.js" async defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"lightgallery":true,"pangu":{"enable":true,"selector":"article"},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":true,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":50,"threshold":0.3,"type":"fuse","useExtendedSearch":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
